File: app/src/main/java/com/codeest/geeknews/app/Constants.java
Patch:
@@ -48,6 +48,8 @@ public class Constants {
 
     public static final String BUGLY_ID = "257700f3f8";
 
+    public static final String FILE_PROVIDER_AUTHORITY="com.codeest.geeknews.fileprovider";
+
     //================= PATH ====================
 
     public static final String PATH_DATA = App.getInstance().getCacheDir().getAbsolutePath() + File.separator + "data";

File: app/src/main/java/com/codeest/geeknews/app/Constants.java
Patch:
@@ -48,6 +48,8 @@ public class Constants {
 
     public static final String BUGLY_ID = "257700f3f8";
 
+    public static final String FILE_PROVIDER_AUTHORITY="com.codeest.geeknews.fileprovider";
+
     //================= PATH ====================
 
     public static final String PATH_DATA = App.getInstance().getCacheDir().getAbsolutePath() + File.separator + "data";

File: app/src/main/java/com/codeest/geeknews/ui/vtex/activity/RepliesActivity.java
Patch:
@@ -133,10 +133,10 @@ public boolean onCreateOptionsMenu(Menu menu) {
                 }
                 break;
             case R.id.action_copy:
-                SystemUtil.copyToClipBoard(mContext, VtexApis.REPLIES_URL + id);
+                SystemUtil.copyToClipBoard(mContext, VtexApis.REPLIES_URL + topicId);
                 return true;
             case R.id.action_share:
-                ShareUtil.shareText(mContext, VtexApis.REPLIES_URL + id, "分享一篇文章");
+                ShareUtil.shareText(mContext, VtexApis.REPLIES_URL + topicId, "分享一篇文章");
         }
         return super.onOptionsItemSelected(item);
     }

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/GirlDetailActivity.java
Patch:
@@ -91,6 +91,7 @@ public boolean onOptionsItemSelected(MenuItem item) {
                 if(isLiked) {
                     item.setIcon(R.mipmap.ic_toolbar_like_n);
                     mRealmHelper.deleteLikeBean(this.id);
+                    isLiked = false;
                 } else {
                     item.setIcon(R.mipmap.ic_toolbar_like_p);
                     RealmLikeBean bean = new RealmLikeBean();
@@ -99,6 +100,7 @@ public boolean onOptionsItemSelected(MenuItem item) {
                     bean.setType(Constants.TYPE_GIRL);
                     bean.setTime(System.currentTimeMillis());
                     mRealmHelper.insertLikeBean(bean);
+                    isLiked = true;
                 }
                 break;
             case R.id.action_save:

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/GirlDetailActivity.java
Patch:
@@ -91,6 +91,7 @@ public boolean onOptionsItemSelected(MenuItem item) {
                 if(isLiked) {
                     item.setIcon(R.mipmap.ic_toolbar_like_n);
                     mRealmHelper.deleteLikeBean(this.id);
+                    isLiked = false;
                 } else {
                     item.setIcon(R.mipmap.ic_toolbar_like_p);
                     RealmLikeBean bean = new RealmLikeBean();
@@ -99,6 +100,7 @@ public boolean onOptionsItemSelected(MenuItem item) {
                     bean.setType(Constants.TYPE_GIRL);
                     bean.setTime(System.currentTimeMillis());
                     mRealmHelper.insertLikeBean(bean);
+                    isLiked = true;
                 }
                 break;
             case R.id.action_save:

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/activity/CalendarActivity.java
Patch:
@@ -53,7 +53,9 @@ public void onDateSelected(@NonNull MaterialCalendarView widget, @NonNull Calend
 
     @OnClick(R.id.tv_calender_enter)
     void chooseDate() {
-        RxBus.getDefault().post(mDate);
+        if (mDate != null) {
+            RxBus.getDefault().post(mDate);
+        }
         finish();
     }
 }

File: app/src/main/java/com/codeest/geeknews/util/RxUtil.java
Patch:
@@ -73,7 +73,7 @@ public Flowable<T> apply(WXHttpResponse<T> tWXHttpResponse) {
                         if(tWXHttpResponse.getCode() == 200) {
                             return createData(tWXHttpResponse.getNewslist());
                         } else {
-                            return Flowable.error(new ApiException("服务器返回error"));
+                            return Flowable.error(new ApiException(tWXHttpResponse.getMsg(), tWXHttpResponse.getCode()));
                         }
                     }
                 });
@@ -96,7 +96,7 @@ public Flowable<T> apply(MyHttpResponse<T> tMyHttpResponse) {
                         if(tMyHttpResponse.getCode() == 200) {
                             return createData(tMyHttpResponse.getData());
                         } else {
-                            return Flowable.error(new ApiException("服务器返回error"));
+                            return Flowable.error(new ApiException(tMyHttpResponse.getMessage(), tMyHttpResponse.getCode()));
                         }
                     }
                 });

File: app/src/main/java/com/codeest/geeknews/util/SystemUtil.java
Patch:
@@ -73,9 +73,9 @@ public static void copyToClipBoard(Context context, String text) {
      */
     public static Uri saveBitmapToFile(Context context, String url, Bitmap bitmap,View container, boolean isShare){
         String fileName = url.substring(url.lastIndexOf("/"),url.lastIndexOf(".")) + ".png";
-        File fileDir = new File(Constants.PATH_DATA);
+        File fileDir = new File(Constants.PATH_SDCARD);
         if (!fileDir.exists()){
-            fileDir.mkdir();
+            fileDir.mkdirs();
         }
         File imageFile = new File(fileDir,fileName);
         Uri uri = Uri.fromFile(imageFile);

File: app/src/main/java/com/codeest/geeknews/base/RxPresenter.java
Patch:
@@ -17,7 +17,7 @@ public class RxPresenter<T extends BaseView> implements BasePresenter<T> {
 
     protected void unSubscribe() {
         if (mCompositeDisposable != null) {
-            mCompositeDisposable.dispose();
+            mCompositeDisposable.clear();
         }
     }
 

File: app/src/main/java/com/codeest/geeknews/base/SimpleFragment.java
Patch:
@@ -23,7 +23,7 @@ public abstract class SimpleFragment extends SupportFragment {
     protected Activity mActivity;
     protected Context mContext;
     private Unbinder mUnBinder;
-    private boolean isInited = false;
+    protected boolean isInited = false;
 
     @Override
     public void onAttach(Context context) {

File: app/src/main/java/com/codeest/geeknews/base/contract/gank/GirlContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.gank;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/gank/TechContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.gank;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/gold/GoldContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.gold;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/gold/GoldMainContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.gold;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/main/WelcomeContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.main;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/vtex/NodeContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.vtex;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/vtex/RepliesContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.vtex;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/vtex/VtexContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.vtex;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/wechat/WechatContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.wechat;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/CommentContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/DailyContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/HotContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/SectionChildContract.java
Patch:
@@ -1,9 +1,8 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;
 import com.codeest.geeknews.model.bean.SectionChildListBean;
-import com.codeest.geeknews.model.bean.ThemeChildListBean;
 
 /**
  * Created by codeest on 16/8/28.

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/SectionContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/ThemeChildContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/base/contract/zhihu/ThemeContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.presenter.contract;
+package com.codeest.geeknews.base.contract.zhihu;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/component/ImageLoader.java
Patch:
@@ -6,15 +6,15 @@
 
 import com.bumptech.glide.Glide;
 import com.bumptech.glide.load.engine.DiskCacheStrategy;
-import com.codeest.geeknews.util.SharedPreferenceUtil;
+import com.codeest.geeknews.app.App;
 
 /**
  * Created by codeest on 2016/8/2.
  */
 public class ImageLoader {
 
     public static void load(Context context, String url, ImageView iv) {    //使用Glide加载圆形ImageView(如头像)时，不要使用占位图
-        if (!SharedPreferenceUtil.getNoImageState()) {
+        if (!App.getAppComponent().preferencesHelper().getNoImageState()) {
             Glide.with(context).load(url).crossFade().diskCacheStrategy(DiskCacheStrategy.SOURCE).into(iv);
         }
     }

File: app/src/main/java/com/codeest/geeknews/presenter/vtex/VtexPresenter.java
Patch:
@@ -1,9 +1,9 @@
-package com.codeest.geeknews.presenter;
+package com.codeest.geeknews.presenter.vtex;
 
 import com.codeest.geeknews.base.RxPresenter;
 import com.codeest.geeknews.model.bean.TopicListBean;
 import com.codeest.geeknews.model.http.api.VtexApis;
-import com.codeest.geeknews.presenter.contract.VtexContract;
+import com.codeest.geeknews.base.contract.vtex.VtexContract;
 import com.codeest.geeknews.util.LogUtil;
 import com.codeest.geeknews.widget.CommonSubscriber;
 

File: app/src/main/java/com/codeest/geeknews/ui/main/adapter/LikeAdapter.java
Patch:
@@ -13,7 +13,7 @@
 import com.codeest.geeknews.app.Constants;
 import com.codeest.geeknews.component.ImageLoader;
 import com.codeest.geeknews.model.bean.RealmLikeBean;
-import com.codeest.geeknews.presenter.VtexPresenter;
+import com.codeest.geeknews.presenter.vtex.VtexPresenter;
 import com.codeest.geeknews.ui.gank.activity.GirlDetailActivity;
 import com.codeest.geeknews.ui.gank.activity.TechDetailActivity;
 import com.codeest.geeknews.ui.vtex.activity.RepliesActivity;

File: app/src/main/java/com/codeest/geeknews/ui/vtex/adapter/NodeListAdapter.java
Patch:
@@ -13,7 +13,7 @@
 import com.codeest.geeknews.component.ImageLoader;
 import com.codeest.geeknews.model.bean.NodeBean;
 import com.codeest.geeknews.model.bean.NodeListBean;
-import com.codeest.geeknews.presenter.VtexPresenter;
+import com.codeest.geeknews.presenter.vtex.VtexPresenter;
 import com.codeest.geeknews.ui.vtex.activity.RepliesActivity;
 import com.codeest.geeknews.util.DateUtil;
 import com.codeest.geeknews.widget.CircleImageView;

File: app/src/main/java/com/codeest/geeknews/ui/vtex/adapter/RepliesAdapter.java
Patch:
@@ -11,7 +11,7 @@
 import com.codeest.geeknews.component.ImageLoader;
 import com.codeest.geeknews.model.bean.NodeListBean;
 import com.codeest.geeknews.model.bean.RepliesListBean;
-import com.codeest.geeknews.presenter.VtexPresenter;
+import com.codeest.geeknews.presenter.vtex.VtexPresenter;
 import com.codeest.geeknews.util.DateUtil;
 import com.codeest.geeknews.widget.SquareImageView;
 

File: app/src/main/java/com/codeest/geeknews/widget/ProgressImageView.java
Patch:
@@ -2,15 +2,15 @@
 
 import android.content.Context;
 import android.graphics.drawable.Animatable;
+import android.support.v7.widget.AppCompatImageView;
 import android.util.AttributeSet;
 import android.view.View;
-import android.widget.ImageView;
 
 /**
  * Created by codeest on 16/9/27.
  */
 
-public class ProgressImageView extends ImageView{
+public class ProgressImageView extends AppCompatImageView{
 
 
     public ProgressImageView(Context context) {

File: app/src/main/java/com/codeest/geeknews/di/module/AppModule.java
Patch:
@@ -44,6 +44,6 @@ RetrofitHelper provideRetrofitHelper(ZhihuApis zhihuApiService, GankApis gankApi
     @Provides
     @Singleton
     RealmHelper provideRealmHelper() {
-        return new RealmHelper(application);
+        return new RealmHelper();
     }
 }

File: app/src/main/java/com/codeest/geeknews/ui/gold/fragment/GoldMainFragment.java
Patch:
@@ -47,7 +47,7 @@ protected void initInject() {
 
     @Override
     protected int getLayoutId() {
-        return R.layout.frgament_gold_main;
+        return R.layout.fragment_gold_main;
     }
 
     @Override

File: app/src/main/java/com/codeest/geeknews/ui/gold/fragment/GoldPagerFragment.java
Patch:
@@ -14,6 +14,7 @@
 import com.codeest.geeknews.util.SnackbarUtil;
 import com.codeest.geeknews.widget.GoldItemDecoration;
 import com.codeest.geeknews.widget.ProgressImageView;
+import com.codeest.geeknews.widget.TouchSwipeRefreshLayout;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -31,7 +32,7 @@ public class GoldPagerFragment extends BaseFragment<GoldPresenter> implements Go
     @BindView(R.id.iv_progress)
     ProgressImageView ivProgress;
     @BindView(R.id.swipe_refresh)
-    SwipeRefreshLayout swipeRefresh;
+    TouchSwipeRefreshLayout swipeRefresh;
 
     private GoldListAdapter mAdapter;
     private GoldItemDecoration mDecoration;
@@ -46,7 +47,7 @@ protected void initInject() {
 
     @Override
     protected int getLayoutId() {
-        return R.layout.view_common_list;
+        return R.layout.fragment_gold_page;
     }
 
     @Override

File: app/src/main/java/com/codeest/geeknews/app/App.java
Patch:
@@ -14,7 +14,6 @@
 import com.codeest.geeknews.di.component.DaggerAppComponent;
 import com.codeest.geeknews.di.module.AppModule;
 import com.codeest.geeknews.di.module.HttpModule;
-import com.codeest.geeknews.di.module.PageModule;
 
 import java.util.HashSet;
 import java.util.Set;
@@ -105,7 +104,6 @@ public static AppComponent getAppComponent(){
             appComponent = DaggerAppComponent.builder()
                     .appModule(new AppModule(instance))
                     .httpModule(new HttpModule())
-                    .pageModule(new PageModule())
                     .build();
         }
         return appComponent;

File: app/src/main/java/com/codeest/geeknews/ui/gank/fragment/GirlFragment.java
Patch:
@@ -59,6 +59,8 @@ protected void initEventAndData() {
         mAdapter = new GirlAdapter(mContext, mList);
         mStaggeredGridLayoutManager = new StaggeredGridLayoutManager(SPAN_COUNT,StaggeredGridLayoutManager.VERTICAL);
         mStaggeredGridLayoutManager.setGapStrategy(StaggeredGridLayoutManager.GAP_HANDLING_NONE);
+        //fix issue #52 https://github.com/codeestX/GeekNews/issues/52
+        mStaggeredGridLayoutManager.setItemPrefetchEnabled(false);
         rvGirlContent.setLayoutManager(mStaggeredGridLayoutManager);
         rvGirlContent.setAdapter(mAdapter);
         swipeRefresh.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {

File: app/src/main/java/com/codeest/geeknews/presenter/DailyPresenter.java
Patch:
@@ -50,11 +50,9 @@ public DailyPresenter(RetrofitHelper mRetrofitHelper,RealmHelper mRealHelper) {
     private void registerEvent() {
         Subscription rxSubscription = RxBus.getDefault().toObservable(CalendarDay.class)
                 .subscribeOn(Schedulers.io())
-                .observeOn(AndroidSchedulers.mainThread())  //为了显示progress切到主线程
                 .map(new Func1<CalendarDay, String>() {
                     @Override
                     public String call(CalendarDay calendarDay) {
-                        mView.showProgress();
                         StringBuilder date = new StringBuilder();
                         String year = String.valueOf(calendarDay.getYear());
                         String month = String.valueOf(calendarDay.getMonth() + 1);

File: app/src/main/java/com/codeest/geeknews/presenter/contract/DailyContract.java
Patch:
@@ -17,8 +17,6 @@ interface View extends BaseView {
 
         void showMoreContent(String date,DailyBeforeListBean info);
 
-        void showProgress();
-
         void doInterval(int currentCount);
     }
 

File: app/src/main/java/com/codeest/geeknews/model/db/RealmHelper.java
Patch:
@@ -74,7 +74,9 @@ public void insertLikeBean(RealmLikeBean bean) {
     public void deleteLikeBean(String id) {
         RealmLikeBean data = mRealm.where(RealmLikeBean.class).equalTo("id",id).findFirst();
         mRealm.beginTransaction();
-        data.deleteFromRealm();
+        if (data != null) {
+            data.deleteFromRealm();
+        }
         mRealm.commitTransaction();
     }
 

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/TechDetailActivity.java
Patch:
@@ -134,6 +134,7 @@ public boolean onCreateOptionsMenu(Menu menu) {
                 if(isLiked) {
                     item.setIcon(R.mipmap.ic_toolbar_like_n);
                     mRealmHelper.deleteLikeBean(this.id);
+                    isLiked = false;
                 } else {
                     item.setIcon(R.mipmap.ic_toolbar_like_p);
                     RealmLikeBean bean = new RealmLikeBean();
@@ -144,6 +145,7 @@ public boolean onCreateOptionsMenu(Menu menu) {
                     bean.setType(type);
                     bean.setTime(System.currentTimeMillis());
                     mRealmHelper.insertLikeBean(bean);
+                    isLiked = true;
                 }
                 break;
             case R.id.action_copy:

File: app/src/main/java/com/codeest/geeknews/ui/gold/fragment/GoldPagerFragment.java
Patch:
@@ -74,7 +74,9 @@ public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
         swipeRefresh.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
             @Override
             public void onRefresh() {
-                rvGoldList.addItemDecoration(mDecoration);
+                if (!mAdapter.getHotFlag()) {
+                    rvGoldList.addItemDecoration(mDecoration);
+                }
                 mAdapter.setHotFlag(true);
                 mPresenter.getGoldData(mType);
             }

File: app/src/main/java/com/codeest/geeknews/base/BaseFragment.java
Patch:
@@ -32,7 +32,7 @@ public abstract class BaseFragment<T extends BasePresenter> extends SupportFragm
     protected Activity mActivity;
     protected Context mContext;
     private Unbinder mUnBinder;
-    private boolean isInited = false;
+    protected boolean isInited = false;
 
     @Override
     public void onAttach(Context context) {

File: app/src/main/java/com/codeest/geeknews/presenter/ZhihuDetailPresenter.java
Patch:
@@ -44,7 +44,7 @@ public void call(ZhihuDetailBean zhihuDetailBean) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("加载数据失败");
+                        mView.showError("加载数据失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);
@@ -62,7 +62,7 @@ public void call(DetailExtraBean detailExtraBean) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("加载额外信息失败");
+                        mView.showError("加载额外信息失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);

File: app/src/main/java/com/codeest/geeknews/ui/main/adapter/LikeAdapter.java
Patch:
@@ -168,6 +168,7 @@ public void gotoDailyDetail(int id) {
         Intent intent = new Intent();
         intent.setClass(mContext, ZhihuDetailActivity.class);
         intent.putExtra("id",id);
+        intent.putExtra("isNotTransition",true);
         mContext.startActivity(intent);
     }
 

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/adapter/TopPagerAdapter.java
Patch:
@@ -13,7 +13,6 @@
 import com.codeest.geeknews.component.ImageLoader;
 import com.codeest.geeknews.model.bean.DailyListBean;
 import com.codeest.geeknews.ui.zhihu.activity.ZhihuDetailActivity;
-import com.codeest.geeknews.util.LogUtil;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -58,6 +57,7 @@ public void onClick(View v) {
                 Intent intent = new Intent();
                 intent.setClass(mContext, ZhihuDetailActivity.class);
                 intent.putExtra("id",id);
+                intent.putExtra("isNotTransition",true);
                 mContext.startActivity(intent);
             }
         });

File: app/src/main/java/com/codeest/geeknews/presenter/WechatPresenter.java
Patch:
@@ -81,7 +81,7 @@ public void call(List<WXItemBean> wxItemBeen) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("数据加载失败ヽ(≧Д≦)ノ");
+                        mView.showError("没有更多了ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);
@@ -131,7 +131,7 @@ public void call(String s) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("搜索失败");
+                        mView.showError("搜索失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/GirlDetailActivity.java
Patch:
@@ -16,6 +16,7 @@
 import com.codeest.geeknews.base.SimpleActivity;
 import com.codeest.geeknews.model.bean.RealmLikeBean;
 import com.codeest.geeknews.model.db.RealmHelper;
+import com.codeest.geeknews.util.LogUtil;
 import com.codeest.geeknews.util.ShareUtil;
 import com.codeest.geeknews.util.SystemUtil;
 
@@ -94,7 +95,9 @@ public boolean onOptionsItemSelected(MenuItem item) {
                 }
                 break;
             case R.id.action_save:
+                LogUtil.d("start");
                 SystemUtil.saveBitmapToFile(mContext,url,bitmap,ivGirlDetail,false);
+                LogUtil.d("stop");
                 break;
             case R.id.action_share:
                 ShareUtil.shareImage(mContext,SystemUtil.saveBitmapToFile(mContext,url,bitmap,ivGirlDetail,true),"分享一只妹纸");

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/TechDetailActivity.java
Patch:
@@ -140,7 +140,7 @@ public boolean onCreateOptionsMenu(Menu menu) {
                 SystemUtil.copyToClipBoard(mContext,url);
                 return true;
             case R.id.action_share:
-                ShareUtil.shareText(mContext,title + " " + url,"分享一篇文章");
+                ShareUtil.shareText(mContext,url,"分享一篇文章");
         }
         return super.onOptionsItemSelected(item);
     }

File: app/src/main/java/com/codeest/geeknews/ui/gank/fragment/GankMainFragment.java
Patch:
@@ -12,7 +12,6 @@
 import com.codeest.geeknews.model.bean.SearchEvent;
 import com.codeest.geeknews.presenter.TechPresenter;
 import com.codeest.geeknews.ui.gank.adapter.GankMainAdapter;
-import com.codeest.geeknews.util.LogUtil;
 
 import java.util.ArrayList;
 import java.util.List;

File: app/src/main/java/com/codeest/geeknews/ui/gank/fragment/TechFragment.java
Patch:
@@ -15,8 +15,8 @@
 import com.codeest.geeknews.ui.gank.activity.TechDetailActivity;
 import com.codeest.geeknews.ui.gank.adapter.TechAdapter;
 import com.codeest.geeknews.util.DateUtil;
+import com.codeest.geeknews.util.LogUtil;
 import com.codeest.geeknews.util.SnackbarUtil;
-import com.codeest.geeknews.util.ToastUtil;
 import com.victor.loading.rotate.RotateLoading;
 
 import java.util.ArrayList;

File: app/src/main/java/com/codeest/geeknews/ui/wechat/fragment/WechatMainFragment.java
Patch:
@@ -11,7 +11,6 @@
 import com.codeest.geeknews.presenter.contract.WechatContract;
 import com.codeest.geeknews.ui.wechat.adapter.WechatAdapter;
 import com.codeest.geeknews.util.SnackbarUtil;
-import com.codeest.geeknews.util.ToastUtil;
 import com.victor.loading.rotate.RotateLoading;
 
 import java.util.ArrayList;

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/activity/ZhihuDetailActivity.java
Patch:
@@ -62,7 +62,6 @@ public class ZhihuDetailActivity extends BaseActivity<ZhihuDetailPresenter> impl
     @BindView(R.id.fab_like)
     FloatingActionButton fabLike;
 
-
     int id = 0;
     int allNum = 0;
     int shortNum = 0;
@@ -181,7 +180,7 @@ void gotoComment() {
 
     @OnClick(R.id.tv_detail_bottom_share)
     void shareUrl() {
-        ShareUtil.shareText(mContext,clpToolbar.getTitle() + " " +shareUrl,"分享一篇文章");
+        ShareUtil.shareText(mContext,shareUrl,"分享一篇文章");
     }
 
     @OnClick(R.id.fab_like)

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/fragment/ZhihuMainFragment.java
Patch:
@@ -5,7 +5,6 @@
 import android.support.v4.view.ViewPager;
 
 import com.codeest.geeknews.R;
-import com.codeest.geeknews.base.BaseFragment;
 import com.codeest.geeknews.base.SimpleFragment;
 import com.codeest.geeknews.ui.zhihu.adapter.ZhihuMainAdapter;
 
@@ -37,7 +36,6 @@ protected int getLayoutId() {
 
     @Override
     protected void initEventAndData() {
-
         fragments.add(new DailyFragment());
         fragments.add(new ThemeFragment());
         fragments.add(new SectionFragment());

File: app/src/main/java/com/codeest/geeknews/util/ShareUtil.java
Patch:
@@ -28,6 +28,6 @@ public static void shareImage(Context context, Uri uri, String title){
     public static void sendEmail(Context context, String title) {
         Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
                 "mailto", EMAIL_ADDRESS, null));
-        context.startActivity(Intent.createChooser(intent, "选择邮件客户端:"));
+        context.startActivity(Intent.createChooser(intent, title));
     }
 }

File: app/src/main/java/com/codeest/geeknews/presenter/GirlPresenter.java
Patch:
@@ -45,7 +45,7 @@ public void call(List<GankItemBean> gankItemBeen) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("加载数据失败");
+                        mView.showError("数据加载失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);
@@ -64,7 +64,7 @@ public void call(List<GankItemBean> gankItemBeen) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("加载更多数据失败");
+                        mView.showError("加载更多数据失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);

File: app/src/main/java/com/codeest/geeknews/presenter/TechPresenter.java
Patch:
@@ -124,7 +124,7 @@ public void call(List<GankItemBean> gankItemBeen) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("加载数据失败");
+                        mView.showError("数据加载失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);
@@ -147,7 +147,7 @@ public void call(List<GankItemBean> gankItemBeen) {
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        mView.showError("加载更多数据失败");
+                        mView.showError("加载更多数据失败ヽ(≧Д≦)ノ");
                     }
                 });
         addSubscrebe(rxSubscription);

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/GirlDetailActivity.java
Patch:
@@ -93,10 +93,10 @@ public boolean onOptionsItemSelected(MenuItem item) {
                 }
                 break;
             case R.id.action_save:
-                SystemUtil.saveBitmapToFile(mContext,url,bitmap);
+                SystemUtil.saveBitmapToFile(mContext,url,bitmap,ivGirlDetail,false);
                 break;
             case R.id.action_share:
-                ShareUtil.shareImage(mContext,SystemUtil.saveBitmapToFile(mContext,url,bitmap),"分享一只妹纸");
+                ShareUtil.shareImage(mContext,SystemUtil.saveBitmapToFile(mContext,url,bitmap,ivGirlDetail,true),"分享一只妹纸");
                 break;
         }
         return super.onOptionsItemSelected(item);

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/TechDetailActivity.java
Patch:
@@ -139,7 +139,7 @@ public boolean onCreateOptionsMenu(Menu menu) {
                 SystemUtil.copyToClipBoard(mContext,url);
                 return true;
             case R.id.action_share:
-                ShareUtil.shareText(mContext,url,"分享一篇文章");
+                ShareUtil.shareText(mContext,title + " " + url,"分享一篇文章");
         }
         return super.onOptionsItemSelected(item);
     }

File: app/src/main/java/com/codeest/geeknews/ui/main/activity/WelcomeActivity.java
Patch:
@@ -64,6 +64,6 @@ protected void onDestroy() {
 
     @Override
     public void showError(String msg) {
-        //使用默认图片
+
     }
 }

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/activity/SectionActivity.java
Patch:
@@ -15,7 +15,6 @@
 import com.codeest.geeknews.presenter.contract.SectionChildContract;
 import com.codeest.geeknews.ui.zhihu.adapter.SectionChildAdapter;
 import com.codeest.geeknews.util.SnackbarUtil;
-import com.codeest.geeknews.util.ToastUtil;
 import com.victor.loading.rotate.RotateLoading;
 
 import java.util.ArrayList;
@@ -68,7 +67,6 @@ protected void initEventAndData() {
             @Override
             public void onRefresh() {
                 mPresenter.getThemeChildData(id);
-                viewLoading.start();
             }
         });
         mAdapter.setOnItemClickListener(new SectionChildAdapter.OnItemClickListener() {

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/activity/ZhihuDetailActivity.java
Patch:
@@ -22,8 +22,8 @@
 import com.codeest.geeknews.util.HtmlUtil;
 import com.codeest.geeknews.util.ShareUtil;
 import com.codeest.geeknews.util.SharedPreferenceUtil;
+import com.codeest.geeknews.util.SnackbarUtil;
 import com.codeest.geeknews.util.SystemUtil;
-import com.codeest.geeknews.util.ToastUtil;
 import com.victor.loading.rotate.RotateLoading;
 
 import net.opacapp.multilinecollapsingtoolbar.CollapsingToolbarLayout;
@@ -165,7 +165,7 @@ public boolean onKeyDown(int keyCode, KeyEvent event) {
     @Override
     public void showError(String msg) {
         viewLoading.stop();
-        ToastUtil.shortShow("获取信息失败");
+        SnackbarUtil.showShort(getWindow().getDecorView(),msg);
     }
 
     @OnClick(R.id.tv_detail_bottom_comment)
@@ -181,7 +181,7 @@ void gotoComment() {
 
     @OnClick(R.id.tv_detail_bottom_share)
     void shareUrl() {
-        ShareUtil.shareText(mContext,shareUrl,"分享一篇文章");
+        ShareUtil.shareText(mContext,clpToolbar.getTitle() + " " +shareUrl,"分享一篇文章");
     }
 
     @OnClick(R.id.fab_like)

File: app/src/main/java/com/codeest/geeknews/app/Constants.java
Patch:
@@ -46,4 +46,6 @@ public class Constants {
     public static final String SP_NO_IMAGE = "no_image";
 
     public static final String SP_AUTO_CACHE = "auto_cache";
+
+    public static final String SP_IS_CHANGE_MODE = "is_change_mode";
 }

File: app/src/main/java/com/codeest/geeknews/ui/gank/adapter/GirlAdapter.java
Patch:
@@ -84,8 +84,8 @@ public void onResourceReady(Bitmap resource, GlideAnimation<? super Bitmap> glid
             @Override
             public void onClick(View view) {
                 if(onItemClickListener != null) {
-                    ImageView iv = (ImageView) view.findViewById(R.id.iv_girl);
-                    onItemClickListener.onItemClickListener(holder.getAdapterPosition(),iv);
+                    View shareView = view.findViewById(R.id.iv_girl);
+                    onItemClickListener.onItemClickListener(holder.getAdapterPosition(),shareView);
                 }
             }
         });

File: app/src/main/java/com/codeest/geeknews/ui/main/fragment/SettingFragment.java
Patch:
@@ -84,7 +84,7 @@ void doClear() {
 
     @OnClick(R.id.ll_setting_update)
     void doUpdate() {
-        SnackbarUtil.showShort(getActivity().getWindow().getDecorView(),"这个功能还没有实现哦~(>_<)~");
+        SnackbarUtil.showShort(llSettingUpdate,"这个功能还没有实现哦~(>_<)~");
     }
 
     @Override
@@ -93,6 +93,7 @@ public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
             case R.id.cb_setting_night:
                 if (isNull) {   //防止夜间模式MainActivity执行reCreate后重复调用
                     SharedPreferenceUtil.setNightModeState(b);
+                    SharedPreferenceUtil.setIsChanngeMode(true);
                     NightModeEvent event = new NightModeEvent();
                     event.setNightMode(b);
                     RxBus.getDefault().post(event);

File: app/src/main/java/com/codeest/geeknews/component/ImageLoader.java
Patch:
@@ -14,7 +14,7 @@
 public class ImageLoader {
 
     public static void load(Context context, String url, ImageView iv) {    //使用Glide加载圆形ImageView(如头像)时，不要使用占位图
-        if (!SharedPreferenceUtil.getNoImageState(context)) {
+        if (!SharedPreferenceUtil.getNoImageState()) {
             Glide.with(context).load(url).crossFade().diskCacheStrategy(DiskCacheStrategy.SOURCE).into(iv);
         }
     }

File: app/src/main/java/com/codeest/geeknews/component/RxBus.java
Patch:
@@ -29,7 +29,6 @@ private static class RxBusHolder {
 
     // 提供了一个新的事件
     public void post(Object o) {
-        LogUtil.d(o.toString());
         bus.onNext(o);
     }
 

File: app/src/main/java/com/codeest/geeknews/presenter/WelcomePresenter.java
Patch:
@@ -39,14 +39,12 @@ public void getWelcomeData() {
                 .subscribe(new Action1<WelcomeBean>() {
                     @Override
                     public void call(WelcomeBean welcomeBean) {
-                        LogUtil.d("SUCCESS");
                         mView.showContent(welcomeBean);
                         startCountDown();
                     }
                 }, new Action1<Throwable>() {
                     @Override
                     public void call(Throwable throwable) {
-                        LogUtil.d("FAILE");
                         mView.showError("");
                         mView.jumpToMain();
                     }

File: app/src/main/java/com/codeest/geeknews/ui/gank/adapter/GirlAdapter.java
Patch:
@@ -63,7 +63,7 @@ public void onBindViewHolder(final ViewHolder holder, int position) {
             layoutParams.height = mList.get(holder.getAdapterPosition()).getHeight();
         }
 
-        Glide.with(mContext).load(mList.get(position).getUrl()).asBitmap().placeholder(R.mipmap.bg_drawable).diskCacheStrategy(DiskCacheStrategy.ALL)
+        Glide.with(mContext).load(mList.get(position).getUrl()).asBitmap().diskCacheStrategy(DiskCacheStrategy.ALL)
                 .into(new SimpleTarget<Bitmap>(App.SCREEN_WIDTH / 2, App.SCREEN_WIDTH / 2) {
                     @Override
                     public void onResourceReady(Bitmap resource, GlideAnimation<? super Bitmap> glideAnimation) {

File: app/src/main/java/com/codeest/geeknews/ui/main/fragment/LikeFragment.java
Patch:
@@ -10,6 +10,7 @@
 import com.codeest.geeknews.presenter.LikePresenter;
 import com.codeest.geeknews.presenter.contract.LikeContract;
 import com.codeest.geeknews.ui.main.adapter.LikeAdapter;
+import com.codeest.geeknews.util.LogUtil;
 import com.codeest.geeknews.util.ToastUtil;
 import com.codeest.geeknews.widget.DefaultItemTouchHelpCallback;
 

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/fragment/DailyFragment.java
Patch:
@@ -137,7 +137,7 @@ public void doInterval(int currentCount) {
     void startCalender() {
         Intent it = new Intent();
         it.setClass(mContext,CalendarActivity.class);
-        CircularAnimUtil.startActivity(mActivity,it,fabCalender,R.color.colorAccent);
+        CircularAnimUtil.startActivity(mActivity,it,fabCalender,R.color.fab_bg);
     }
 
     @Override

File: app/src/main/java/com/codeest/geeknews/base/BaseView.java
Patch:
@@ -8,4 +8,6 @@ public interface BaseView {
 
     void showError(String msg);
 
+    void useNightMode(boolean isNight);
+
 }

File: app/src/main/java/com/codeest/geeknews/base/BaseActivity.java
Patch:
@@ -4,7 +4,6 @@
 import android.content.res.Configuration;
 import android.os.Bundle;
 import android.support.annotation.Nullable;
-import android.support.v7.app.AppCompatActivity;
 import android.support.v7.app.AppCompatDelegate;
 import android.support.v7.widget.Toolbar;
 import android.view.View;

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/fragment/ThemeFragment.java
Patch:
@@ -68,6 +68,7 @@ public void showContent(ThemeListBean themeListBean) {
         rvThemeList.setVisibility(View.VISIBLE);
         mList.clear();
         mList.addAll(themeListBean.getOthers());
+        mAdapter.notifyDataSetChanged();
     }
 
     @Override

File: app/src/main/java/com/codeest/geeknews/component/ImageLoader.java
Patch:
@@ -13,12 +13,12 @@
 public class ImageLoader {
 
     public static void load(Context context, String url, ImageView iv) {    //使用Glide加载圆形ImageView(如头像)时，不要使用占位图
-        Glide.with(context).load(url).crossFade().into(iv);
+        Glide.with(context).load(url).crossFade().diskCacheStrategy(DiskCacheStrategy.SOURCE).into(iv);
     }
 
     public static void load(Activity activity, String url, ImageView iv) {    //使用Glide加载圆形ImageView(如头像)时，不要使用占位图
         if(!activity.isDestroyed()) {
-            Glide.with(activity).load(url).crossFade().into(iv);
+            Glide.with(activity).load(url).crossFade().diskCacheStrategy(DiskCacheStrategy.SOURCE).into(iv);
         }
     }
 

File: app/src/main/java/com/codeest/geeknews/presenter/GirlPresenter.java
Patch:
@@ -22,7 +22,7 @@ public class GirlPresenter extends RxPresenter<GirlContract.View> implements Gir
 
     private RetrofitHelper mRetrofitHelper;
 
-    private static final int NUM_OF_PAGE = 20;
+    public static final int NUM_OF_PAGE = 20;
 
     private int currentPage = 1;
 
@@ -59,7 +59,7 @@ public void getMoreGirlData() {
                 .subscribe(new Action1<List<GankItemBean>>() {
                     @Override
                     public void call(List<GankItemBean> gankItemBeen) {
-                        mView.showMoreContent(gankItemBeen,currentPage);
+                        mView.showMoreContent(gankItemBeen);
                     }
                 }, new Action1<Throwable>() {
                     @Override

File: app/src/main/java/com/codeest/geeknews/presenter/contract/DailyContract.java
Patch:
@@ -31,5 +31,7 @@ interface  Presenter extends BasePresenter<View> {
         void startInterval();
 
         void stopInterval();
+
+        void insertReadToDB(int id);
     }
 }

File: app/src/main/java/com/codeest/geeknews/presenter/contract/GirlContract.java
Patch:
@@ -16,7 +16,7 @@ interface View extends BaseView {
 
         void showContent(List<GankItemBean> list);
 
-        void showMoreContent(List<GankItemBean> list,int currentPage);
+        void showMoreContent(List<GankItemBean> list);
     }
 
     interface Presenter extends BasePresenter<View> {

File: app/src/main/java/com/codeest/geeknews/presenter/contract/HotContract.java
Patch:
@@ -19,5 +19,7 @@ interface Presenter extends BasePresenter<View> {
 
         void getHotData();
 
+        void insertReadToDB(int id);
+
     }
 }

File: app/src/main/java/com/codeest/geeknews/ui/gank/activity/TechDetailActivity.java
Patch:
@@ -1,8 +1,6 @@
 package com.codeest.geeknews.ui.gank.activity;
 
 import android.content.Intent;
-import android.net.Uri;
-import android.os.Bundle;
 import android.support.v7.widget.Toolbar;
 import android.view.KeyEvent;
 import android.view.Menu;
@@ -14,11 +12,11 @@
 
 import com.codeest.geeknews.R;
 import com.codeest.geeknews.base.SimpleActivity;
+import com.codeest.geeknews.util.ShareUtil;
 import com.codeest.geeknews.util.SystemUtil;
 import com.victor.loading.rotate.RotateLoading;
 
 import butterknife.BindView;
-import butterknife.ButterKnife;
 
 /**
  * Created by codeest on 16/8/20.
@@ -102,6 +100,8 @@ public boolean onCreateOptionsMenu(Menu menu) {
             case R.id.action_copy:
                 SystemUtil.copyToClipBoard(mContext,url);
                 return true;
+            case R.id.action_share:
+                ShareUtil.shareText(mContext,url,"分享一篇文章");
         }
         return super.onOptionsItemSelected(item);
     }

File: app/src/main/java/com/codeest/geeknews/ui/gank/adapter/GirlAdapter.java
Patch:
@@ -10,7 +10,6 @@
 import com.codeest.geeknews.R;
 import com.codeest.geeknews.component.ImageLoader;
 import com.codeest.geeknews.model.bean.GankItemBean;
-import com.codeest.geeknews.presenter.contract.MainContract;
 
 import java.util.ArrayList;
 import java.util.List;

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/adapter/HotAdapter.java
Patch:
@@ -38,7 +38,7 @@ public HotAdapter(Context mContext, List<HotListBean.RecentBean> mList) {
 
     @Override
     public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
-        return new ViewHolder(inflater.inflate(R.layout.fragment_hot, parent, false));
+        return new ViewHolder(inflater.inflate(R.layout.item_daily, parent, false));
     }
 
     @Override

File: app/src/main/java/com/codeest/geeknews/util/SystemUtil.java
Patch:
@@ -78,7 +78,7 @@ public static void copyToClipBoard(Context context, String text) {
      * @param url
      * @param bitmap
      */
-    public static void saveBitmapToFile(Context context, String url, Bitmap bitmap){
+    public static Uri saveBitmapToFile(Context context, String url, Bitmap bitmap){
         String fileName = url.substring(url.lastIndexOf("/"),url.lastIndexOf(".")) + ".png";
         File fileDir = new File(Constants.DATA_PATH);
         if (!fileDir.exists()){
@@ -102,5 +102,6 @@ public static void saveBitmapToFile(Context context, String url, Bitmap bitmap){
         }
         Uri uri = Uri.fromFile(imageFile);
         context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,uri));
+        return uri;
     }
 }

File: app/src/main/java/com/codeest/geeknews/ui/zhihu/adapter/CommentAdapter.java
Patch:
@@ -52,8 +52,8 @@ public void onBindViewHolder(final ViewHolder holder, int position) {
         holder.tvName.setText(info.getAuthor());
         holder.tvContent.setText(info.getContent());
         holder.tvTime.setText(DateUtil.formatTime2String(info.getTime()));
-        holder.tvLike.setText(info.getLikes());
-        if (info.getReply_to() != null) {
+        holder.tvLike.setText(String.valueOf(info.getLikes()));
+        if (info.getReply_to() != null && info.getReply_to().getId() != 0) {
             holder.tvReply.setVisibility(View.VISIBLE);
             holder.tvReply.setText(String.format("@%s: %s",info.getReply_to().getAuthor(),info.getReply_to().getContent()));
             if (info.getReply_to().getExpandState() == STATE_NULL) {    //未知
@@ -105,7 +105,7 @@ public int getItemCount() {
         return mList.size();
     }
 
-    public class ViewHolder extends RecyclerView.ViewHolder{
+    public static class ViewHolder extends RecyclerView.ViewHolder{
 
         @BindView(R.id.civ_comment_face)
         CircleImageView civFace;

File: app/src/main/java/com/codeest/geeknews/presenter/MainPresenter.java
Patch:
@@ -1,7 +1,8 @@
-package com.codeest.geeknews.ui.main;
+package com.codeest.geeknews.presenter;
 
 import com.codeest.geeknews.base.RxPresenter;
 import com.codeest.geeknews.model.http.RetrofitHelper;
+import com.codeest.geeknews.presenter.contract.MainContract;
 
 import javax.inject.Inject;
 

File: app/src/main/java/com/codeest/geeknews/presenter/contract/MainContract.java
Patch:
@@ -1,4 +1,4 @@
-package com.codeest.geeknews.ui.main;
+package com.codeest.geeknews.presenter.contract;
 
 import com.codeest.geeknews.base.BasePresenter;
 import com.codeest.geeknews.base.BaseView;

File: app/src/main/java/com/codeest/geeknews/ui/main/MainActivity.java
Patch:
@@ -8,6 +8,8 @@
 
 import com.codeest.geeknews.R;
 import com.codeest.geeknews.base.BaseActivity;
+import com.codeest.geeknews.presenter.MainPresenter;
+import com.codeest.geeknews.presenter.contract.MainContract;
 import com.codeest.geeknews.util.LogUtil;
 
 import butterknife.BindView;

