File: material/src/main/java/com/rey/material/widget/Spinner.java
Patch:
@@ -951,7 +951,7 @@ private int measureContentWidth(SpinnerAdapter adapter, Drawable background) {
                 itemType = positionType;
                 itemView = null;
             }
-            itemView = adapter.getView(i, itemView, null);
+            itemView = adapter.getView(i, itemView, this);
             if (itemView.getLayoutParams() == null)
                 itemView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
             

File: lib/src/main/java/com/rey/material/widget/CompoundButton.java
Patch:
@@ -241,13 +241,14 @@ public boolean onTouchEvent(@NonNull MotionEvent event) {
 	
 	@Override
 	public void setButtonDrawable(Drawable d) {
+        super.setButtonDrawable(null);
         getPaddingDrawable().setWrappedDrawable(d);
 		super.setButtonDrawable(getPaddingDrawable());
 	}
 
     @Override
     public Drawable getButtonDrawable(){
-        return mPaddingDrawable.getWrappedDrawable();
+        return getPaddingDrawable().getWrappedDrawable();
     }
 
     @Override

File: lib/src/main/java/com/rey/material/app/BottomSheetDialog.java
Patch:
@@ -373,7 +373,7 @@ public void onAnimationEnd(Animation animation) {
     }
 
     protected int getContainerHeight(){
-        return mContainer.getHeight();
+        return mContainer == null ? 0 : mContainer.getHeight();
     }
 
     private class ContainerFrameLayout extends FrameLayout {

File: lib/src/main/java/com/rey/material/app/BottomSheetDialog.java
Patch:
@@ -469,7 +469,7 @@ private boolean isOutsideDialog(float x, float y){
 
         @Override
         public boolean dispatchTouchEvent(MotionEvent ev) {
-            if(!super.dispatchTouchEvent(ev))
+            if(!super.dispatchTouchEvent(ev) && mGestureDetector != null)
                 mGestureDetector.onTouchEvent(ev);
             return true;
         }

File: lib/src/main/java/com/rey/material/app/SimpleDialog.java
Patch:
@@ -556,7 +556,7 @@ public View getView(int position, View convertView, ViewGroup parent) {
                 if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1)
                     v.setTextDirection(((InternalListView)parent).isLayoutRtl() ? View.TEXT_DIRECTION_RTL : View.TEXT_DIRECTION_LTR);
                 v.setTextAppearance(v.getContext(), mItemTextAppearance);
-                ViewCompat.setPaddingRelative(v, mContentPadding, 0, 0, 0);
+                v.setCompoundDrawablePadding(mContentPadding);
             }
 
             v.setTag(position);

File: lib/src/main/java/com/rey/material/widget/Spinner.java
Patch:
@@ -387,7 +387,7 @@ public View getSelectedView() {
      */
 	public void setSelection(int position) {
 		if(mAdapter != null)
-			position = Math.min(position, mAdapter.getCount() - 1);
+			position = Math.max(0, Math.min(position, mAdapter.getCount() - 1));
 		
 		if(mSelectedPosition != position){
 			mSelectedPosition = position;

File: lib/src/main/java/com/rey/material/drawable/ContactChipDrawable.java
Patch:
@@ -89,7 +89,7 @@ private void updateLayout(){
             return;
 
         int outerWidth = Math.max(0, bounds.width() - bounds.height() - mPaddingLeft - mPaddingRight);
-        mMetrics.width = (int) FloatMath.ceil(mTextPaint.measureText(mContactName, 0, mContactName.length()));
+        mMetrics.width = Math.round(mTextPaint.measureText(mContactName, 0, mContactName.length()) + 0.5f);
 
         if(mBoringLayout == null)
             mBoringLayout = BoringLayout.make(mContactName, mTextPaint, outerWidth, Layout.Alignment.ALIGN_NORMAL, 1f, 1f, mMetrics, true, TextUtils.TruncateAt.END, outerWidth);

File: lib/src/main/java/com/rey/material/text/style/ContactChipSpan.java
Patch:
@@ -61,7 +61,7 @@ public ContactChipSpan(CharSequence name, int height, int maxWidth, int paddingL
         int outerWidth = Math.max(0, mWidth - mPaddingLeft - mPaddingRight - mHeight);
         Paint.FontMetricsInt temp = mTextPaint.getFontMetricsInt();
         BoringLayout.Metrics mMetrics = new BoringLayout.Metrics();
-        mMetrics.width = (int)FloatMath.ceil(mTextPaint.measureText(mContactName, 0, mContactName.length()));
+        mMetrics.width = Math.round(mTextPaint.measureText(mContactName, 0, mContactName.length()) + 0.5f);
         mMetrics.ascent = temp.ascent;
         mMetrics.bottom = temp.bottom;
         mMetrics.descent = temp.descent;

File: lib/src/main/java/com/rey/material/widget/CompoundButton.java
Patch:
@@ -54,7 +54,7 @@ public CompoundButton(Context context, AttributeSet attrs, int defStyleAttr, int
     }
 
 	protected void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes){
-        if(Build.VERSION.SDK_INT >- Build.VERSION_CODES.JELLY_BEAN_MR1)
+        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1)
             applyPadding(context, attrs, defStyleAttr, defStyleRes);
 
 		setClickable(true);

File: lib/src/main/java/com/rey/material/app/Dialog.java
Patch:
@@ -1020,6 +1020,7 @@ public void addContentView(View view, ViewGroup.LayoutParams params) {
     @Override
     protected void onStart() {
         super.onStart();
+        mCardView.setVisibility(View.VISIBLE);
         if(mInAnimationId != 0)
             mCardView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                 @Override
@@ -1058,6 +1059,7 @@ public void onAnimationRepeat(Animation animation) {}
 
                 @Override
                 public void onAnimationEnd(Animation animation) {
+                    mCardView.setVisibility(View.GONE);
                     mHandler.post(mDismissAction);
                 }
             });

File: app/src/main/java/com/rey/material/app/ContactView.java
Patch:
@@ -159,7 +159,7 @@ public void setOnClickListener(OnClickListener l) {
     @Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
         boolean result = super.onTouchEvent(event);
-        return  mRippleManager.onTouchEvent(event) || result;
+        return  mRippleManager.onTouchEvent(this, event) || result;
     }
 
     public void setAvatarBitmap(Bitmap bm){

File: lib/src/main/java/com/rey/material/widget/Button.java
Patch:
@@ -120,7 +120,7 @@ public void setOnClickListener(OnClickListener l) {
 	@Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
 		boolean result = super.onTouchEvent(event);
-		return  getRippleManager().onTouchEvent(event) || result;
+		return  getRippleManager().onTouchEvent(this, event) || result;
 	}
 
 }

File: lib/src/main/java/com/rey/material/widget/CheckedTextView.java
Patch:
@@ -118,6 +118,6 @@ public void setOnClickListener(OnClickListener l) {
     @Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
         boolean result = super.onTouchEvent(event);
-        return  getRippleManager().onTouchEvent(event) || result;
+        return  getRippleManager().onTouchEvent(this, event) || result;
     }
 }

File: lib/src/main/java/com/rey/material/widget/CompoundButton.java
Patch:
@@ -134,7 +134,7 @@ public void setOnClickListener(OnClickListener l) {
 	@Override
 	public boolean onTouchEvent(@NonNull MotionEvent event) {
 		boolean result = super.onTouchEvent(event);
-		return  getRippleManager().onTouchEvent(event) || result;
+		return  getRippleManager().onTouchEvent(this, event) || result;
 	}
 	
 	@Override

File: lib/src/main/java/com/rey/material/widget/FloatingActionButton.java
Patch:
@@ -513,7 +513,7 @@ public boolean onTouchEvent(@NonNull MotionEvent event) {
 			return false;
 		
 		boolean result = super.onTouchEvent(event);		
-		return  getRippleManager().onTouchEvent(event) || result;
+		return  getRippleManager().onTouchEvent(this, event) || result;
 	}
 
     @Override

File: lib/src/main/java/com/rey/material/widget/FrameLayout.java
Patch:
@@ -118,7 +118,7 @@ public void setOnClickListener(OnClickListener l) {
 	@Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
 		boolean result = super.onTouchEvent(event);
-		return  getRippleManager().onTouchEvent(event) || result;
+		return  getRippleManager().onTouchEvent(this, event) || result;
 	}
 
 }

File: lib/src/main/java/com/rey/material/widget/ImageButton.java
Patch:
@@ -118,7 +118,7 @@ public void setOnClickListener(OnClickListener l) {
     @Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
         boolean result = super.onTouchEvent(event);
-        return  getRippleManager().onTouchEvent(event) || result;
+        return  getRippleManager().onTouchEvent(this, event) || result;
     }
 
 }

File: lib/src/main/java/com/rey/material/widget/LinearLayout.java
Patch:
@@ -119,7 +119,7 @@ public void setOnClickListener(OnClickListener l) {
 	@Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
 		boolean result = super.onTouchEvent(event);
-		return  getRippleManager().onTouchEvent(event) || result;
+		return  getRippleManager().onTouchEvent(this, event) || result;
 	}
 
 }

File: lib/src/main/java/com/rey/material/widget/RelativeLayout.java
Patch:
@@ -118,7 +118,7 @@ public void setOnClickListener(OnClickListener l) {
 	@Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
 		boolean result = super.onTouchEvent(event);
-		return  getRippleManager().onTouchEvent(event) || result;
+		return  getRippleManager().onTouchEvent(this, event) || result;
 	}
 
 }

File: lib/src/main/java/com/rey/material/widget/Slider.java
Patch:
@@ -633,7 +633,7 @@ private float correctPosition(float position){
     @Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
         super.onTouchEvent(event);
-        getRippleManager().onTouchEvent(event);
+        getRippleManager().onTouchEvent(this, event);
 
         if(!isEnabled())
             return false;

File: lib/src/main/java/com/rey/material/widget/Switch.java
Patch:
@@ -343,7 +343,7 @@ public void onRtlPropertiesChanged(int layoutDirection) {
 	@Override
 	public boolean onTouchEvent(@NonNull MotionEvent event) {
 		super.onTouchEvent(event);
-		getRippleManager().onTouchEvent(event);
+		getRippleManager().onTouchEvent(this, event);
 
         float x = event.getX();
         if(mIsRtl)

File: lib/src/main/java/com/rey/material/widget/TextView.java
Patch:
@@ -125,7 +125,7 @@ public void setOnClickListener(OnClickListener l) {
     @Override
     public boolean onTouchEvent(@NonNull MotionEvent event) {
         boolean result = super.onTouchEvent(event);
-        return  getRippleManager().onTouchEvent(event) || result;
+        return  getRippleManager().onTouchEvent(this, event) || result;
     }
 
     public void setOnSelectionChangedListener(OnSelectionChangedListener listener){

File: lib/src/main/java/com/rey/material/widget/EditText.java
Patch:
@@ -137,6 +137,9 @@ public EditText(Context context, AttributeSet attrs, int defStyleAttr, int defSt
 	protected void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes){
 		applyStyle(context, attrs, defStyleAttr, defStyleRes);
         mStyleId = ThemeManager.getStyleId(context, attrs, defStyleAttr, defStyleRes);
+
+        if(isInEditMode())
+            applyStyle(R.style.Material_Widget_EditText);
 	}
 
     public void applyStyle(int resId){

File: lib/src/main/java/com/rey/material/widget/Button.java
Patch:
@@ -78,6 +78,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/CheckedTextView.java
Patch:
@@ -76,6 +76,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/CompoundButton.java
Patch:
@@ -94,6 +94,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/FloatingActionButton.java
Patch:
@@ -201,6 +201,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/ImageButton.java
Patch:
@@ -76,6 +76,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/Slider.java
Patch:
@@ -302,6 +302,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/Spinner.java
Patch:
@@ -624,6 +624,7 @@ public int getBaseline() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
 
         if (mPopup != null && mPopup.isShowing())
             mPopup.dismiss();

File: lib/src/main/java/com/rey/material/widget/Switch.java
Patch:
@@ -245,6 +245,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/TextView.java
Patch:
@@ -83,6 +83,7 @@ protected void onAttachedToWindow() {
     @Override
     protected void onDetachedFromWindow() {
         super.onDetachedFromWindow();
+        mRippleManager.cancelRipple(this);
         if(mStyleId != 0)
             ThemeManager.getInstance().unregisterOnThemeChangedListener(this);
     }

File: lib/src/main/java/com/rey/material/widget/TabPageIndicator.java
Patch:
@@ -326,7 +326,7 @@ public void setViewPager(ViewPager view) {
             return;
         
         if (mViewPager != null){
-            mViewPager.setOnPageChangeListener(null);
+            mViewPager.removeOnPageChangeListener(this);
             PagerAdapter adapter = view.getAdapter();
             if(adapter != null)
             	adapter.unregisterDataSetObserver(mObserver);
@@ -339,9 +339,10 @@ public void setViewPager(ViewPager view) {
         adapter.registerDataSetObserver(mObserver);
         
         mViewPager = view;        
-        view.setOnPageChangeListener(this);
+        view.addOnPageChangeListener(this);
         
         notifyDataSetChanged();
+        onPageSelected(mViewPager.getCurrentItem());
     }
 
     /**

File: app/src/main/java/com/rey/material/demo/MainActivity.java
Patch:
@@ -5,6 +5,7 @@
 import android.support.v4.app.Fragment;
 import android.support.v4.app.FragmentManager;
 import android.support.v4.app.FragmentStatePagerAdapter;
+import android.support.v4.view.GravityCompat;
 import android.support.v4.view.ViewPager;
 import android.support.v4.widget.DrawerLayout;
 import android.support.v7.app.ActionBarActivity;
@@ -71,7 +72,7 @@ public void onNavigationClick() {
                 if(mToolbarManager.getCurrentGroup() != R.id.tb_group_main)
                     mToolbarManager.setCurrentGroup(R.id.tb_group_main);
                 else
-                    dl_navigator.openDrawer(Gravity.START);
+                    dl_navigator.openDrawer(GravityCompat.START);
             }
 
             @Override

File: lib/src/main/java/com/rey/material/app/ToolbarManager.java
Patch:
@@ -179,7 +179,7 @@ public void onPrepareMenu(){
             Menu menu = mToolbar.getMenu();
             for(int i = 0, count = menu.size(); i < count; i++){
                 MenuItem item = menu.getItem(i);
-                item.setVisible(item.getGroupId() == mCurrentGroup);
+                item.setVisible(item.getGroupId() == mCurrentGroup || item.getGroupId() == 0);
             }
 
             mMenuDataChanged = false;

File: lib/src/main/java/com/rey/material/drawable/NavigationDrawerDrawable.java
Patch:
@@ -120,9 +120,6 @@ public Builder(Context context, AttributeSet attrs, int defStyleAttr, int defSty
 				
 				if(lineId > 0){
 					LineMorphingDrawable.Builder builder = new LineMorphingDrawable.Builder(context, lineId);
-					
-					builder.states(new LineMorphingDrawable.State(new float[]{0f, 0.1f, 1f, 0.1f, 0f, 0.5f, 1f, 0.5f, 0f, 0.9f, 1f, 0.9f}, null), new LineMorphingDrawable.State(new float[]{0.5f, 0f, 1f, 0.5f, 0f, 0.5f, 1f, 0.5f, 0.5f, 1f, 1f, 0.5f}, new int[]{0, 2}));
-					
 					line(builder.build());
 				}
 						

File: lib/src/main/java/com/rey/material/drawable/DividerDrawable.java
Patch:
@@ -65,6 +65,7 @@ public DividerDrawable(int height, int paddingLeft, int paddingRight, ColorState
     public void setDividerHeight(int height){
         if(mHeight != height){
             mHeight = height;
+            mPaint.setStrokeWidth(mHeight);
             invalidateSelf();
         }
     }
@@ -120,7 +121,7 @@ public void draw(Canvas canvas) {
 
 		Rect bounds = getBounds();
 		float y = bounds.bottom - mHeight / 2;
-		
+
 		if(!isRunning()){
 			mPath.reset();
 			mPath.moveTo(bounds.left + mPaddingLeft, y);

File: app/src/main/java/com/rey/material/demo/SnackbarFragment.java
Patch:
@@ -35,7 +35,7 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sa
 			
 			@Override
 			public void onClick(View v) {
-				if(mSnackBar.getState() == SnackBar.STATE_SHOWED)
+				if(mSnackBar.getState() == SnackBar.STATE_SHOWN)
 					mSnackBar.dismiss();
 				else{
 					switch (v.getId()) {

File: app/src/main/java/com/rey/material/demo/SpinnersFragment.java
Patch:
@@ -34,7 +34,7 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sa
         Spinner spn_no_arrow = (Spinner)v.findViewById(R.id.spinner_no_arrow);
 		String[] items = new String[20];
 		for(int i = 0; i < items.length; i++)
-			items[i] = String.valueOf(i + 1);
+			items[i] = "Item " + String.valueOf(i + 1);
         ArrayAdapter<String> adapter = new ArrayAdapter<>(getActivity(), R.layout.row_spn, items);
         adapter.setDropDownViewResource(R.layout.row_spn_dropdown);
         spn_label.setAdapter(adapter);

File: lib/src/main/java/com/rey/material/app/DialogFragment.java
Patch:
@@ -11,6 +11,9 @@
  */
 public class DialogFragment extends android.support.v4.app.DialogFragment{
 
+    /**
+     * Interface definition for passing style data.
+     */
     public interface Builder{
         /**
          * Get a Dialog instance used for this fragment.

File: lib/src/main/java/com/rey/material/widget/SnackBar.java
Patch:
@@ -135,7 +135,6 @@ public SnackBar(Context context, AttributeSet attrs, int defStyleAttr, int defSt
         init(context, attrs, defStyleAttr, defStyleRes);
     }
 
-    @SuppressWarnings("deprecation")
     @TargetApi(Build.VERSION_CODES.JELLY_BEAN)
     private void init(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes){
         mText = new TextView(context);
@@ -252,7 +251,6 @@ protected void onLayout(boolean changed, int l, int t, int r, int b) {
         mText.layout(childLeft, childTop, childRight, childBottom);
 	}		
 
-	@SuppressWarnings("deprecation")
 	@TargetApi(Build.VERSION_CODES.JELLY_BEAN)
 	private void applyStyle(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes){
 		TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.SnackBar, defStyleAttr, defStyleRes);

File: lib/src/main/java/com/rey/material/app/DatePickerDialog.java
Patch:
@@ -177,7 +177,8 @@ private class DatePickerLayout extends FrameLayout implements DatePicker.OnDateC
         private float mSecondWidth;
 
         private static final String BASE_TEXT = "0";
-        private static final String DAY_FORMAT = "%02d";
+        private static final String DAY_FORMAT = "%2d";
+        private static final String YEAR_FORMAT = "%4d";
 
         public DatePickerLayout(Context context) {
             super(context);
@@ -367,7 +368,7 @@ public void onDateChanged(int oldDay, int oldMonth, int oldYear, int newDay, int
                 mWeekDay = cal.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG, Locale.getDefault());
                 mMonth = cal.getDisplayName(Calendar.MONTH, Calendar.SHORT, Locale.getDefault());
                 mDay = String.format(DAY_FORMAT, newDay);
-                mYear = String.valueOf(newYear);
+                mYear = String.format(YEAR_FORMAT, newYear);
 
                 if(oldMonth != newMonth || oldYear != newYear)
                     mDatePicker.goTo(newMonth, newYear);

File: lib/src/main/java/com/rey/material/widget/Spinner.java
Patch:
@@ -698,7 +698,7 @@ private void showPopup(){
                 if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
             	    lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
             	lv.setSelection(getSelectedItemPosition());
-                if(mArrowAnimSwitchMode)
+                if(mArrowDrawable != null && mArrowAnimSwitchMode)
                     lv.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                         @Override
                         public boolean onPreDraw() {
@@ -713,7 +713,8 @@ public boolean onPreDraw() {
 	}
 	
 	private void onPopupDismissed(){
-		mArrowDrawable.setMode(ArrowDrawable.MODE_DOWN, true);
+        if(mArrowDrawable != null)
+		    mArrowDrawable.setMode(ArrowDrawable.MODE_DOWN, true);
 	}
 		
 	private int measureContentWidth(SpinnerAdapter adapter, Drawable background) {

File: lib/src/main/java/com/rey/material/widget/YearPicker.java
Patch:
@@ -6,6 +6,7 @@
 import android.graphics.Color;
 import android.graphics.Paint;
 import android.graphics.Typeface;
+import android.os.Build;
 import android.os.Parcel;
 import android.os.Parcelable;
 import android.support.annotation.NonNull;
@@ -306,6 +307,8 @@ public View getView(int position, View convertView, ViewGroup parent) {
             if(v == null){
                 v = new CircleCheckedTextView(getContext());
                 v.setGravity(Gravity.CENTER);
+                if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1)
+                    v.setTextAlignment(TEXT_ALIGNMENT_CENTER);
                 v.setMinHeight(mItemRealHeight);
                 v.setMaxHeight(mItemRealHeight);
                 v.setAnimDuration(mAnimDuration);

File: lib/src/main/java/com/rey/material/widget/ListPopupWindow.java
Patch:
@@ -1810,6 +1810,8 @@ private void setPopupClipToScreenEnabled(boolean clip) {
             } catch (Exception e) {
                 Log.i(TAG, "Could not call setClipToScreenEnabled() on PopupWindow. Oh well.");
             }
+        } else if(clip && Build.VERSION.SDK_INT >= Build.VERSION_CODES.CUPCAKE) {
+            mPopup.setClippingEnabled(false);
         }
     }
 

File: lib/src/main/java/com/rey/material/widget/Spinner.java
Patch:
@@ -698,7 +698,7 @@ private void showPopup(){
                 if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
             	    lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
             	lv.setSelection(getSelectedItemPosition());
-                if(mArrowAnimSwitchMode)
+                if(mArrowDrawable != null && mArrowAnimSwitchMode)
                     lv.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                         @Override
                         public boolean onPreDraw() {
@@ -713,7 +713,8 @@ public boolean onPreDraw() {
 	}
 	
 	private void onPopupDismissed(){
-		mArrowDrawable.setMode(ArrowDrawable.MODE_DOWN, true);
+        if(mArrowDrawable != null)
+		    mArrowDrawable.setMode(ArrowDrawable.MODE_DOWN, true);
 	}
 		
 	private int measureContentWidth(SpinnerAdapter adapter, Drawable background) {

File: lib/src/main/java/com/rey/material/widget/ListPopupWindow.java
Patch:
@@ -75,7 +75,7 @@ public class ListPopupWindow {
 
     static {
         try {
-            sClipToWindowEnabledMethod = PopupWindow.class.getDeclaredMethod(
+            sClipToWindowEnabledMethod = android.widget.PopupWindow.class.getDeclaredMethod(
                     "setClipToScreenEnabled", boolean.class);
         } catch (NoSuchMethodException e) {
             Log.i(TAG, "Could not find method setClipToScreenEnabled() on PopupWindow. Oh well.");
@@ -681,7 +681,7 @@ public boolean onPreDraw() {
 					}
 					
 				});
-        }        
+        }
     }
 
     /**

File: lib/src/main/java/com/rey/material/app/ToolbarManager.java
Patch:
@@ -313,12 +313,12 @@ public SimpleAnimator(int animIn, int animOut){
 
         @Override
         public Animation getOutAnimation(View v, int position) {
-            return AnimationUtils.loadAnimation(v.getContext(), mAnimationOut);
+            return mAnimationOut == 0 ? null : AnimationUtils.loadAnimation(v.getContext(), mAnimationOut);
         }
 
         @Override
         public Animation getInAnimation(View v, int position) {
-            return AnimationUtils.loadAnimation(v.getContext(), mAnimationIn);
+            return mAnimationIn == 0 ?  null : AnimationUtils.loadAnimation(v.getContext(), mAnimationIn);
         }
     }
 

File: lib/src/main/java/com/rey/material/util/TypefaceUtil.java
Patch:
@@ -25,7 +25,7 @@ public static Typeface load(Context context, String familyName, int style) {
             synchronized (sCachedFonts) {
                 try {
                     if (!sCachedFonts.containsKey(familyName)) {
-                        final Typeface typeface = Typeface.createFromAsset(context.getAssets(), familyName);
+                        final Typeface typeface = Typeface.createFromAsset(context.getAssets(), familyName.substring(PREFIX_ASSET.length()));
                         sCachedFonts.put(familyName, typeface);
                         return typeface;
                     }

File: lib/src/main/java/com/rey/material/app/Dialog.java
Patch:
@@ -79,6 +79,7 @@ public void run() {
     private boolean mCancelable = true;
     private boolean mCanceledOnTouchOutside = true;
 
+    public static final int TITLE = ViewUtil.generateViewId();
     public static final int ACTION_POSITIVE = ViewUtil.generateViewId();
     public static final int ACTION_NEGATIVE = ViewUtil.generateViewId();
     public static final int ACTION_NEUTRAL = ViewUtil.generateViewId();
@@ -120,6 +121,7 @@ private void init(Context context, int style){
         mCardView.setPreventCornerOverlap(false);
         mCardView.setUseCompatPadding(true);
 
+        mTitle.setId(TITLE);
         mTitle.setPadding(mContentPadding, mContentPadding, mContentPadding, mContentPadding - mActionPadding);
         mPositiveAction.setId(ACTION_POSITIVE);
         mPositiveAction.setPadding(mActionPadding, 0, mActionPadding, 0);

File: lib/src/main/java/com/rey/material/app/DialogFragment.java
Patch:
@@ -61,7 +61,7 @@ public Dialog onCreateDialog(Bundle savedInstanceState) {
         com.rey.material.app.Dialog dialog = mBuilder == null ? new Dialog(getActivity()) : mBuilder.build(getActivity());
         dialog.positiveActionClickListener(mActionListener)
                 .negativeActionClickListener(mActionListener)
-                .negativeActionClickListener(mActionListener);
+                .neutralActionClickListener(mActionListener);
         return dialog;
     }
 

File: app/src/main/java/com/rey/material/demo/DialogsFragment.java
Patch:
@@ -16,6 +16,7 @@
 import com.rey.material.app.SimpleDialog;
 import com.rey.material.app.TimePickerDialog;
 import com.rey.material.widget.Button;
+import com.rey.material.widget.EditText;
 
 import java.text.SimpleDateFormat;
 
@@ -142,7 +143,8 @@ protected Dialog onBuild(Context context, int styleId) {
 
                     @Override
                     public void onPositiveActionClicked(DialogFragment fragment) {
-                        Toast.makeText(fragment.getDialog().getContext(), "Connected", Toast.LENGTH_SHORT).show();
+                        EditText et_pass = (EditText)fragment.getDialog().findViewById(R.id.custom_et_password);
+                        Toast.makeText(fragment.getDialog().getContext(), "Connected. pass=" + et_pass.getText().toString(), Toast.LENGTH_SHORT).show();
                         super.onPositiveActionClicked(fragment);
                     }
 

File: app/src/main/java/com/rey/material/demo/ButtonFragment.java
Patch:
@@ -1,6 +1,8 @@
 package com.rey.material.demo;
 
 import android.annotation.TargetApi;
+import android.app.AlertDialog;
+import android.content.DialogInterface;
 import android.os.Build;
 import android.os.Bundle;
 import android.support.v4.app.Fragment;

File: lib/src/main/java/com/rey/material/widget/EditText.java
Patch:
@@ -148,6 +148,7 @@ private void applyStyle(Context context, AttributeSet attrs, int defStyleAttr, i
 
         int inputId = a.getResourceId(R.styleable.EditText_et_inputId, 0);
         mInputView.setId(inputId != 0 ? inputId : ViewUtil.generateViewId());
+        mInputView.setVisibility(View.VISIBLE);
         mInputView.setFocusableInTouchMode(true);
         mDividerColors = a.getColorStateList(R.styleable.EditText_et_dividerColor);
         mDividerErrorColors = a.getColorStateList(R.styleable.EditText_et_dividerErrorColor);

File: lib/src/main/java/com/rey/material/app/Dialog.java
Patch:
@@ -83,6 +83,7 @@ public Dialog(Context context) {
         this(context, 0);
     }
 
+
     public Dialog(Context context, int style) {
         super(context, style);
 

File: lib/src/main/java/com/rey/material/widget/TimePicker.java
Patch:
@@ -110,6 +110,7 @@ private void init(Context context, AttributeSet attrs, int defStyleAttr, int def
         mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
         mRect = new Rect();
 
+        setWillNotDraw(false);
         applyStyle(context, attrs, defStyleAttr, defStyleRes);
     }
 
@@ -657,7 +658,8 @@ private void update(){
         if(mRunning) {
             if(getHandler() != null)
                 getHandler().postAtTime(mUpdater, SystemClock.uptimeMillis() + ViewUtil.FRAME_DURATION);
-            stopAnimation();
+            else
+                stopAnimation();
         }
 
         invalidate();

File: lib/src/main/java/com/rey/material/widget/RippleManager.java
Patch:
@@ -67,7 +67,7 @@ public void onClick(View v) {
 		else if(background instanceof ToolbarRippleDrawable)
 			delay = ((ToolbarRippleDrawable)background).getClickDelayTime(mDelayClick);
 			
-		if(delay > 0)		
+		if(delay > 0 && mView.getHandler() != null)
 			mView.getHandler().postDelayed(this, delay);
 		else
 			run();

File: lib/src/main/java/com/rey/material/widget/DatePicker.java
Patch:
@@ -10,7 +10,6 @@
 import android.os.Build;
 import android.os.Handler;
 import android.os.SystemClock;
-import android.support.v4.view.ViewCompat;
 import android.util.AttributeSet;
 import android.view.MotionEvent;
 import android.view.View;
@@ -501,7 +500,6 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
 
         @Override
         protected void onDraw(Canvas canvas) {
-
             //draw month text
             mPaint.setTextSize(mTextSize);
             mPaint.setTypeface(mTypeface);
@@ -543,7 +541,7 @@ protected void onDraw(Canvas canvas) {
             for(int i = 0; i < 7; i++){
                 x = (i + 0.5f) * mDayWidth + paddingLeft;
                 y = paddingTop;
-                int index = mIsMondayFirst ? (i == 6 ? 0 : i - 1) : i;
+                int index = mIsMondayFirst ? (i == 6 ? 0 : i + 1) : i;
                 canvas.drawText(mLabels[index], x, y, mPaint);
             }
 

File: app/src/main/java/com/rey/material/demo/MainActivity.java
Patch:
@@ -109,7 +109,7 @@ public void onPageScrollStateChanged(int state) {}
 			
 		});
 
-		vp.setCurrentItem(3);
+		vp.setCurrentItem(0);
 	}
 
 	@Override

File: lib/src/main/java/com/rey/material/widget/EditText.java
Patch:
@@ -160,7 +160,9 @@ private void init(Context context, AttributeSet attrs, int defStyleAttr, int def
         mDividerCompoundPadding = a.getBoolean(R.styleable.EditText_et_dividerCompoundPadding, true);
         mInputView.setPadding(0, 0, 0, dividerPadding + dividerHeight);
 
-		mDivider = new DividerDrawable(dividerHeight, mDividerCompoundPadding ? mInputView.getTotalPaddingLeft() : 0, mDividerCompoundPadding ? getTotalPaddingRight() : 0, mDividerColors, dividerAnimDuration);
+        System.out.println("a " + mInputView.getTotalPaddingLeft() + " " + mInputView.getTotalPaddingRight());
+
+		mDivider = new DividerDrawable(dividerHeight, mDividerCompoundPadding ? mInputView.getTotalPaddingLeft() : 0, mDividerCompoundPadding ? mInputView.getTotalPaddingRight() : 0, mDividerColors, dividerAnimDuration);
 		mDivider.setInEditMode(isInEditMode());
 		mDivider.setAnimEnable(false);
 		if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN)

File: lib/src/main/java/com/rey/material/text/style/ContactChipSpan.java
Patch:
@@ -94,7 +94,7 @@ public int getSize(Paint paint, CharSequence text, int start, int end, Paint.Fon
     public void draw(Canvas canvas, CharSequence text, int start, int end, float x, int top, int y, int bottom, Paint paint) {
         canvas.save();
 
-        canvas.translate(x, 0);
+        canvas.translate(x, top);
 
         float halfHeight = mHeight / 2f;
         mPaint.setShader(null);

File: app/src/main/java/com/rey/material/app/RecurringPickerDialog.java
Patch:
@@ -96,7 +96,7 @@ protected void onCreate() {
         mEndNumEditText = (EditText)v.findViewById(R.id.rd_et_end_num);
         mEndNumUnitTextView = (TextView)v.findViewById(R.id.rd_tv_end_num_unit);
         mEndDateButton = (Button)v.findViewById(R.id.rd_bt_end_date);
-        mWeekView = (WeekView)v.findViewById(R.id.rd_week_wv);
+        mWeekView = (WeekView)v.findViewById(R.id.rd_wv_week);
 
         mHeaderBackground = new HeaderDrawable(getContext());
 

File: app/src/main/java/com/rey/material/demo/SnackbarFragment.java
Patch:
@@ -11,12 +11,12 @@
 import com.rey.material.widget.Button;
 import com.rey.material.widget.SnackBar;
 
-public class SnackBarFragment extends Fragment{
+public class SnackbarFragment extends Fragment{
 	
 	SnackBar mSnackBar;
 		
-	public static SnackBarFragment newInstance(){
-		SnackBarFragment fragment = new SnackBarFragment();
+	public static SnackbarFragment newInstance(){
+		SnackbarFragment fragment = new SnackbarFragment();
 		
 		return fragment;
 	}

File: lib/src/main/java/com/rey/material/widget/Button.java
Patch:
@@ -2,9 +2,12 @@
 
 import android.content.Context;
 import android.support.annotation.NonNull;
+import android.support.v7.internal.widget.TintManager;
 import android.util.AttributeSet;
 import android.view.MotionEvent;
 
+import java.lang.reflect.Field;
+
 public class Button extends android.widget.Button {
 
 	private RippleManager mRippleManager = new RippleManager();

File: app/src/main/java/com/rey/material/demo/MainActivity.java
Patch:
@@ -106,7 +106,7 @@ public void onPageScrollStateChanged(int state) {}
 			
 		});
 		
-		vp.setCurrentItem(mItems.length - 1);
+		vp.setCurrentItem(1);
 	}
 
 	@Override

File: lib/src/main/java/com/rey/material/drawable/DividerDrawable.java
Patch:
@@ -75,6 +75,9 @@ private PathEffect getPathEffect(){
 	
 	@Override
 	public void draw(Canvas canvas) {
+        if(mHeight == 0)
+            return;
+
 		Rect bounds = getBounds();
 		float y = bounds.bottom - mHeight / 2;
 		

File: lib/src/main/java/com/rey/material/widget/EditText.java
Patch:
@@ -132,7 +132,7 @@ private void init(Context context, AttributeSet attrs, int defStyleAttr, int def
 		if(mDividerErrorColors == null)
 			mDividerErrorColors = ColorStateList.valueOf(ThemeUtil.colorAccent(context, 0xFFFF0000));
 		
-		int dividerHeight = a.getDimensionPixelSize(R.styleable.EditText_et_dividerHeight, 0);
+		int dividerHeight = a.getDimensionPixelOffset(R.styleable.EditText_et_dividerHeight, 0);
 		int dividerPadding = a.getDimensionPixelOffset(R.styleable.EditText_et_dividerPadding, 0);
 		int dividerAnimDuration = a.getInteger(R.styleable.EditText_et_dividerAnimDuration, context.getResources().getInteger(android.R.integer.config_shortAnimTime));
 		mDivider = new DividerDrawable(dividerHeight, mDividerColors, dividerAnimDuration);

File: lib/src/main/java/com/rey/material/drawable/DividerDrawable.java
Patch:
@@ -136,7 +136,7 @@ protected boolean onStateChange(int[] state) {
 		int color = mColorStateList.getColorForState(state, mCurColor);		
 				
 		if(mCurColor != color){
-			if(!mInEditMode && mAnimEnable){
+			if(!mInEditMode && mAnimEnable && mEnable){
 				mPrevColor = isRunning() ? mPrevColor : mCurColor;
 				mCurColor = color;	
 				start();				

File: app/src/main/java/com/rey/material/demo/ButtonFragment.java
Patch:
@@ -75,7 +75,7 @@ public void onClick(View v) {
         bt_flat.setOnClickListener(new View.OnClickListener(){
             @Override
             public void onClick(View v) {
-                TimePickerDialog.Builder builder = new TimePickerDialog.Builder(R.style.TimePickerDialog, 11, 30, false);
+                TimePickerDialog.Builder builder = new TimePickerDialog.Builder(R.style.Material_App_Dialog_TimePicker_Light, 11, 30, false);
                 builder.positiveAction("OK")
                         .negativeAction("CANCEL");
                 com.rey.material.app.DialogFragment fragment = DialogFragment.newInstance(builder);
@@ -86,7 +86,7 @@ public void onClick(View v) {
         bt_flat_color.setOnClickListener(new View.OnClickListener(){
             @Override
             public void onClick(View v) {
-                DatePickerDialog.Builder builder = new DatePickerDialog.Builder(R.style.DatePickerDialog, 1, Calendar.JANUARY, 2000, 31, Calendar.DECEMBER, 2014, 20, Calendar.JANUARY, 2010);
+                DatePickerDialog.Builder builder = new DatePickerDialog.Builder(R.style.Material_App_Dialog_DatePicker_Light, 1, Calendar.JANUARY, 2000, 31, Calendar.DECEMBER, 2014, 20, Calendar.JANUARY, 2010);
                 builder.positiveAction("OK")
                         .negativeAction("CANCEL");
                 com.rey.material.app.DialogFragment fragment = DialogFragment.newInstance(builder);

File: app/src/main/java/com/rey/material/demo/MainActivity.java
Patch:
@@ -272,7 +272,7 @@ else if(fragment instanceof SwitchesFragment)
     						setFragment(Tab.SWITCHES, fragment);
     					else if(fragment instanceof TextfieldFragment)
     						setFragment(Tab.TEXTFIELDS, fragment);
-    					else if(fragment instanceof SnackbarFragment)
+    					else if(fragment instanceof SnackBarFragment)
     						setFragment(Tab.SNACKBARS, fragment);
                         else if(fragment instanceof DialogFragment)
                             setFragment(Tab.DIALOGS, fragment);
@@ -307,7 +307,7 @@ public Fragment getItem(int position) {
 						mFragments[position] = TextfieldFragment.newInstance();
 						break;
 					case SNACKBARS:
-						mFragments[position] = SnackbarFragment.newInstance();
+						mFragments[position] = SnackBarFragment.newInstance();
 						break;
                     case DIALOGS:
                         mFragments[position] = DialogFragment.newInstance();

File: lib/src/main/java/com/rey/material/app/TimePickerDialog.java
Patch:
@@ -246,10 +246,10 @@ public void applyStyle(int resId){
             a.recycle();
 
             if(am == null)
-                am = DateUtils.getAMPMString(Calendar.AM);
+                am = DateUtils.getAMPMString(Calendar.AM).toUpperCase();
 
             if(pm == null)
-                pm = DateUtils.getAMPMString(Calendar.PM);
+                pm = DateUtils.getAMPMString(Calendar.PM).toUpperCase();
 
             int[][] states = new int[][]{
                     new int[]{-android.R.attr.state_checked},

File: lib/src/main/java/com/rey/material/drawable/LineMorphingDrawable.java
Patch:
@@ -312,9 +312,6 @@ private void resetAnimation(){
 	
 	@Override
 	public void start() {
-		if(isRunning()) 
-			return;
-						
 		resetAnimation();
 		
 		scheduleSelf(mUpdater, SystemClock.uptimeMillis() + ViewUtil.FRAME_DURATION);

File: lib/src/main/java/com/rey/material/drawable/NavigationDrawerDrawable.java
Patch:
@@ -26,8 +26,8 @@ public NavigationDrawerDrawable(ToolbarRippleDrawable rippleDrawable, LineMorphi
 		mLineDrawable.setCallback(this);
 	}
 	
-	public void switchIconState(boolean animation){
-		mLineDrawable.switchLineState((getIconState() + 1) % 2, animation);
+	public void switchIconState(int state, boolean animation){
+		mLineDrawable.switchLineState(state, animation);
 	}
 	
 	public int getIconState(){

File: app/src/main/java/com/rey/material/demo/DialogFragment.java
Patch:
@@ -26,8 +26,8 @@ public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle sa
 		View v = inflater.inflate(R.layout.fragment_dialog, container, false);
 
         DatePicker dp = (DatePicker)v.findViewById(R.id.dialog_v);
-        dp.setDayRange(1, Calendar.JANUARY, 2014, 31, Calendar.DECEMBER, 2014);
-        dp.setDay(20, Calendar.DECEMBER, 2014);
+        dp.setDateRange(1, Calendar.JANUARY, 2014, 31, Calendar.DECEMBER, 2014);
+        dp.setDate(20, Calendar.DECEMBER, 2014);
 
 		return v;
 	}

File: lib/src/main/java/com/rey/material/widget/DatePicker.java
Patch:
@@ -338,7 +338,7 @@ private String getDayText(int day){
         return mDayTexts[day - 1];
     }
 
-    public void setDayRange(int minDay, int minMonth, int minYear, int maxDay, int maxMonth, int maxYear){
+    public void setDateRange(int minDay, int minMonth, int minYear, int maxDay, int maxMonth, int maxYear){
         mAdapter.setDayRange(minDay, minMonth, minYear, maxDay, maxMonth, maxYear);
     }
 
@@ -348,7 +348,7 @@ public void goTo(int month, int year){
         mPositionScroller.start(position);
     }
 
-    public void setDay(int day, int month, int year){
+    public void setDate(int day, int month, int year){
         mAdapter.setDay(day, month, year, false);
         goTo(month, year);
     }
@@ -701,7 +701,7 @@ protected void onDraw(Canvas canvas) {
                 canvas.drawText(mLabels[index], x, y, mPaint);
             }
 
-            //draw day text
+            //draw date text
             int col = mFirstDayCol;
             int row = 1;
             int maxDay = mMaxAvailDay > 0 ? Math.min(mMaxAvailDay, mMaxDay) : mMaxDay;

File: lib/src/main/java/com/rey/material/widget/DatePicker.java
Patch:
@@ -342,7 +342,6 @@ public void setDayRange(int minDay, int minMonth, int minYear, int maxDay, int m
         mAdapter.setDayRange(minDay, minMonth, minYear, maxDay, maxMonth, maxYear);
     }
 
-    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
     public void goTo(int month, int year){
         int position = mAdapter.positionOfMonth(month, year);
         setSelectionFromTop(position, 0);

File: lib/src/main/java/com/rey/material/app/DatePickerDialog.java
Patch:
@@ -106,7 +106,7 @@ public DatePickerLayout(Context context) {
             mYearPicker = new YearPicker(context);
             mDatePicker = new DatePicker(context);
             mYearPicker.setPadding(mPadding, mPadding, mPadding, mPadding);
-//            mDatePicker.setPadding(mPadding, mPadding, mPadding, mPadding);
+            mDatePicker.setContentPadding(mPadding, mPadding, mPadding, mPadding);
 
             addView(mYearPicker);
             addView(mDatePicker);

File: lib/src/main/java/com/rey/material/widget/TimePicker.java
Patch:
@@ -129,8 +129,8 @@ private void applyStyle(Context context, AttributeSet attrs, int defStyleAttr, i
         setHour(a.getInteger(R.styleable.TimePicker_tp_hour, 0));
         setMinute(a.getInteger(R.styleable.TimePicker_tp_minute, 0));
 
-        String familyName = a.getString(R.styleable.TimePicker_android_fontFamily);
-        int style = a.getInteger(R.styleable.TimePicker_android_textStyle, Typeface.NORMAL);
+        String familyName = a.getString(R.styleable.TimePicker_tp_fontFamily);
+        int style = a.getInteger(R.styleable.TimePicker_tp_textStyle, Typeface.NORMAL);
 
         mTypeface = TypefaceUtil.load(context, familyName, style);
 

File: lib/src/main/java/com/rey/material/widget/YearPicker.java
Patch:
@@ -131,8 +131,8 @@ private void applyStyle(Context context, AttributeSet attrs, int defStyleAttr, i
             mOutInterpolator = AnimationUtils.loadInterpolator(context, resId);
         else
             mOutInterpolator = new DecelerateInterpolator();
-        String familyName = a.getString(R.styleable.YearPicker_android_fontFamily);
-        int style = a.getInteger(R.styleable.YearPicker_android_textStyle, Typeface.NORMAL);
+        String familyName = a.getString(R.styleable.YearPicker_dp_fontFamily);
+        int style = a.getInteger(R.styleable.YearPicker_dp_textStyle, Typeface.NORMAL);
 
         mTypeface = TypefaceUtil.load(context, familyName, style);
 

File: app/src/main/java/com/rey/material/demo/ButtonFragment.java
Patch:
@@ -74,7 +74,8 @@ public void onClick(View v) {
             @Override
             public void onClick(View v) {
                 TimePickerDialog dialog = new TimePickerDialog(getActivity());
-                dialog.applyStyle(R.style.TimePickerDialog)
+                dialog.hour(11).minute(30).am(false)
+                        .applyStyle(R.style.TimePickerDialog)
                         .positiveAction("OK")
                         .negativeAction("CANCEL")
                         .show();

File: lib/src/main/java/com/rey/material/widget/EditText.java
Patch:
@@ -1814,7 +1814,7 @@ public final void setEditableFactory (Editable.Factory factory){
      *
      * @attr ref android.R.styleable#TextView_elegantTextHeight
      */
-	@TargetApi(Build.VERSION_CODES.L)
+	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
 	public void setElegantTextHeight (boolean elegant){
 		if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP)
 			mInputView.setElegantTextHeight(elegant);
@@ -1863,7 +1863,7 @@ public void setFilters (InputFilter[] filters){
      *
      * @attr ref android.R.styleable#TextView_fontFeatureSettings
      */
-	@TargetApi(Build.VERSION_CODES.L)
+	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
 	public void setFontFeatureSettings (String fontFeatureSettings){
 		if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP)
 			mInputView.setFontFeatureSettings(fontFeatureSettings);

File: lib/src/main/java/com/rey/material/widget/FloatingActionButton.java
Patch:
@@ -120,7 +120,7 @@ public void setRadius(int radius){
 			requestLayout();
 	}
 	
-	@TargetApi(Build.VERSION_CODES.L)
+	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
 	@Override
 	public float getElevation() {
 		if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP)
@@ -129,7 +129,7 @@ public float getElevation() {
 		return mBackground.getShadowSize();
 	}
 	
-	@TargetApi(Build.VERSION_CODES.L)
+	@TargetApi(Build.VERSION_CODES.LOLLIPOP)
 	@Override
 	public void setElevation(float elevation) {
 		if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP)

File: lib/src/main/java/com/rey/material/app/SimpleDialog.java
Patch:
@@ -231,7 +231,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
             int heightMode = MeasureSpec.getMode(heightMeasureSpec);
             if(heightMode == MeasureSpec.UNSPECIFIED){
                 if(mItemHeight != ViewGroup.LayoutParams.WRAP_CONTENT)
-                    heightMeasureSpec = MeasureSpec.makeMeasureSpec(mItemHeight * getAdapter().getCount(), MeasureSpec.EXACTLY);
+                    heightMeasureSpec = MeasureSpec.makeMeasureSpec(mItemHeight * getAdapter().getCount() + getPaddingTop() + getPaddingBottom(), MeasureSpec.EXACTLY);
             }
 
             super.onMeasure(widthMeasureSpec, heightMeasureSpec);

