File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerView.java
Patch:
@@ -15,7 +15,6 @@
 import java.util.ArrayList;
 import java.util.Collection;
 import java.util.List;
-import java.util.Locale;
 import org.threeten.bp.DayOfWeek;
 import org.threeten.bp.LocalDate;
 import org.threeten.bp.temporal.TemporalField;

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/DynamicSettersActivity.java
Patch:
@@ -22,7 +22,6 @@
 import com.prolificinteractive.materialcalendarview.CalendarDay;
 import com.prolificinteractive.materialcalendarview.CalendarMode;
 import com.prolificinteractive.materialcalendarview.MaterialCalendarView;
-import java.sql.Date;
 import java.util.Random;
 import butterknife.BindView;
 import butterknife.ButterKnife;

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/SelectionModesActivity.java
Patch:
@@ -4,6 +4,7 @@
 import android.os.Bundle;
 import android.support.annotation.NonNull;
 import android.support.v7.app.AppCompatActivity;
+import android.util.Log;
 import android.transition.TransitionManager;
 import android.view.ViewGroup;
 import android.widget.Toast;
@@ -16,6 +17,7 @@
 import java.text.DateFormat;
 import java.text.SimpleDateFormat;
 import java.util.List;
+import org.threeten.bp.format.DateTimeFormatter;
 
 /**
  * An activity that demonstrate the multiple selection mode that the calendar offers.
@@ -26,7 +28,7 @@
 public class SelectionModesActivity extends AppCompatActivity
     implements OnDateSelectedListener, OnRangeSelectedListener {
 
-  private static final DateFormat FORMATTER = SimpleDateFormat.getDateInstance();
+  private static final DateTimeFormatter FORMATTER = DateTimeFormatter.ofPattern("EEE, d MMM yyyy");
 
   @BindView(R.id.parent) ViewGroup parent;
   @BindView(R.id.calendar_view_single) MaterialCalendarView single;

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -62,7 +62,7 @@ public CalendarDay getItem(int position) {
                     position * DAYS_IN_WEEK,
                     TimeUnit.DAYS);
             long positionMillis = minMillis + millisOffset;
-            return CalendarDay.from(new Date(positionMillis));
+            return CalendarDay.from(positionMillis);
         }
 
         private int weekNumberDifference(@NonNull CalendarDay min, @NonNull CalendarDay max) {
@@ -77,6 +77,7 @@ private int weekNumberDifference(@NonNull CalendarDay min, @NonNull CalendarDay
 
         /*
          * Necessary because of how Calendar handles getting the first day of week internally.
+         * TODO: WTF IS THIS
          */
         private CalendarDay getFirstDayOfWeek(@NonNull CalendarDay min, int wantedFirstDayOfWeek) {
             Calendar calendar = Calendar.getInstance();

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/BasicActivityDecorated.java
Patch:
@@ -42,7 +42,7 @@ protected void onCreate(Bundle savedInstanceState) {
         widget.setShowOtherDates(MaterialCalendarView.SHOW_ALL);
 
         Calendar instance = Calendar.getInstance();
-        widget.setSelectedDate(instance.getTime());
+        widget.setSelectedDate(instance);
 
         Calendar instance1 = Calendar.getInstance();
         instance1.set(instance1.get(Calendar.YEAR), Calendar.JANUARY, 1);
@@ -51,8 +51,8 @@ protected void onCreate(Bundle savedInstanceState) {
         instance2.set(instance2.get(Calendar.YEAR), Calendar.DECEMBER, 31);
 
         widget.state().edit()
-                .setMinimumDate(instance1.getTime())
-                .setMaximumDate(instance2.getTime())
+                .setMinimumDate(instance1)
+                .setMaximumDate(instance2)
                 .commit();
 
         widget.addDecorators(

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/DisableDaysActivity.java
Patch:
@@ -34,7 +34,7 @@ protected void onCreate(Bundle savedInstanceState) {
         widget.addDecorator(new EnableOneToTenDecorator());
 
         Calendar calendar = Calendar.getInstance();
-        widget.setSelectedDate(calendar.getTime());
+        widget.setSelectedDate(calendar);
 
         Calendar instance1 = Calendar.getInstance();
         instance1.set(instance1.get(Calendar.YEAR), Calendar.JANUARY, 1);
@@ -43,8 +43,8 @@ protected void onCreate(Bundle savedInstanceState) {
         instance2.set(instance2.get(Calendar.YEAR) + 2, Calendar.OCTOBER, 31);
 
         widget.state().edit()
-                .setMinimumDate(instance1.getTime())
-                .setMaximumDate(instance2.getTime())
+                .setMinimumDate(instance1)
+                .setMaximumDate(instance2)
                 .commit();
     }
 

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/SwappableBasicActivityDecorated.java
Patch:
@@ -39,7 +39,7 @@ protected void onCreate(Bundle savedInstanceState) {
 
 
         Calendar instance = Calendar.getInstance();
-        widget.setSelectedDate(instance.getTime());
+        widget.setSelectedDate(instance);
 
         Calendar instance1 = Calendar.getInstance();
         instance1.set(instance1.get(Calendar.YEAR), Calendar.JANUARY, 1);
@@ -48,8 +48,8 @@ protected void onCreate(Bundle savedInstanceState) {
         instance2.set(instance2.get(Calendar.YEAR), Calendar.DECEMBER, 31);
 
         widget.state().edit()
-                .setMinimumDate(instance1.getTime())
-                .setMaximumDate(instance2.getTime())
+                .setMinimumDate(instance1)
+                .setMaximumDate(instance2)
                 .commit();
 
         widget.addDecorators(

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/decorators/HighlightWeekendsDecorator.java
Patch:
@@ -9,13 +9,14 @@
 import com.prolificinteractive.materialcalendarview.DayViewFacade;
 
 import java.util.Calendar;
+import java.util.Locale;
 
 /**
  * Highlight Saturdays and Sundays with a background
  */
 public class HighlightWeekendsDecorator implements DayViewDecorator {
 
-    private final Calendar calendar = Calendar.getInstance();
+    private final Calendar calendar = Calendar.getInstance(Locale.getDefault());
     private final Drawable highlightDrawable;
     private static final int color = Color.parseColor("#228BC34A");
 

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/decorators/OneDayDecorator.java
Patch:
@@ -9,7 +9,9 @@
 import com.prolificinteractive.materialcalendarview.DayViewFacade;
 import com.prolificinteractive.materialcalendarview.MaterialCalendarView;
 
+import java.util.Calendar;
 import java.util.Date;
+import java.util.Locale;
 
 /**
  * Decorate a day by making the text big and bold
@@ -37,6 +39,6 @@ public void decorate(DayViewFacade view) {
      * We're changing the internals, so make sure to call {@linkplain MaterialCalendarView#invalidateDecorators()}
      */
     public void setDate(Date date) {
-        this.date = CalendarDay.from(date);
+        this.date = CalendarDay.from(date.getTime());
     }
 }

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -311,7 +311,7 @@ public void transformPage(View page, float position) {
 
             setSelectionMode(a.getInteger(
                 R.styleable.MaterialCalendarView_mcv_selectionMode,
-                SELECTION_MODE_NONE
+                SELECTION_MODE_SINGLE
             ));
 
             final int tileSize = a.getLayoutDimension(R.styleable.MaterialCalendarView_mcv_tileSize, INVALID_TILE_DIMENSION);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -1121,6 +1121,7 @@ protected Parcelable onSaveInstanceState() {
         ss.dynamicHeightEnabled = mDynamicHeightEnabled;
         ss.currentMonth = currentMonth;
         ss.cacheCurrentPosition = state.cacheCurrentPosition;
+        ss.showWeekDays = showWeekDays;
         return ss;
     }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -1687,6 +1687,9 @@ private int getWeekCountBasedOnMode() {
             cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH));
             //noinspection ResourceType
             cal.setFirstDayOfWeek(getFirstDayOfWeek());
+            // By default this is '4', causes weeks to be counted incorrectly,
+            // when using dynamic height on Nougat devices
+            cal.setMinimalDaysInFirstWeek(1);
             weekCount = cal.get(Calendar.WEEK_OF_MONTH);
         }
         return showWeekDays ? weekCount + DAY_NAMES_ROW : weekCount;

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPager.java
Patch:
@@ -1,13 +1,13 @@
 package com.prolificinteractive.materialcalendarview;
 
 import android.content.Context;
-import android.support.v4.view.BetterViewPager;
+import android.support.v4.view.ViewPager;
 import android.view.MotionEvent;
 
 /**
  * Custom ViewPager that allows swiping to be disabled.
  */
-class CalendarPager extends BetterViewPager {
+class CalendarPager extends ViewPager {
 
     private boolean pagingEnabled = true;
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerView.java
Patch:
@@ -19,7 +19,6 @@
 import static com.prolificinteractive.materialcalendarview.MaterialCalendarView.SHOW_DEFAULTS;
 import static com.prolificinteractive.materialcalendarview.MaterialCalendarView.showOtherMonths;
 import static java.util.Calendar.DATE;
-import static java.util.Calendar.DAY_OF_WEEK;
 
 abstract class CalendarPagerView extends ViewGroup implements View.OnClickListener {
 

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/DynamicSettersActivity.java
Patch:
@@ -102,7 +102,7 @@ public void onClick(DialogInterface dialog, int which, boolean isChecked) {
     @OnCheckedChanged(R.id.enable_save_current_position)
     void onSaveCurrentPositionChecked(boolean checked) {
         widget.state().edit()
-                .setSaveCurrentPosition(checked)
+                .isCacheCalendarPositionEnabled(checked)
                 .commit();
     }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/TitleChanger.java
Patch:
@@ -54,7 +54,9 @@ public void change(final CalendarDay currentMonth) {
             doChange(currentTime, currentMonth, false);
         }
 
-        if (currentMonth.equals(previousMonth) || currentMonth.getMonth() == previousMonth.getMonth()) {
+        if (currentMonth.equals(previousMonth) ||
+                (currentMonth.getMonth() == previousMonth.getMonth()
+                        && currentMonth.getYear() == previousMonth.getYear())) {
             return;
         }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/TitleChanger.java
Patch:
@@ -54,7 +54,9 @@ public void change(final CalendarDay currentMonth) {
             doChange(currentTime, currentMonth, false);
         }
 
-        if (currentMonth.equals(previousMonth) || currentMonth.getMonth() == previousMonth.getMonth()) {
+        if (currentMonth.equals(previousMonth) ||
+                (currentMonth.getMonth() == previousMonth.getMonth()
+                        && currentMonth.getYear() == previousMonth.getYear())) {
             return;
         }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -393,7 +393,6 @@ private void setupChildren() {
         addView(topbar, new LayoutParams(1));
 
         buttonPast.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
-        buttonPast.setImageResource(R.drawable.mcv_action_previous);
         topbar.addView(buttonPast, new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1));
 
         title.setGravity(Gravity.CENTER);
@@ -402,7 +401,6 @@ private void setupChildren() {
         ));
 
         buttonFuture.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
-        buttonFuture.setImageResource(R.drawable.mcv_action_next);
         topbar.addView(buttonFuture, new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1));
 
         pager.setId(R.id.mcv_pager);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -393,7 +393,6 @@ private void setupChildren() {
         addView(topbar, new LayoutParams(1));
 
         buttonPast.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
-        buttonPast.setImageResource(R.drawable.mcv_action_previous);
         topbar.addView(buttonPast, new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1));
 
         title.setGravity(Gravity.CENTER);
@@ -402,7 +401,6 @@ private void setupChildren() {
         ));
 
         buttonFuture.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
-        buttonFuture.setImageResource(R.drawable.mcv_action_next);
         topbar.addView(buttonFuture, new LinearLayout.LayoutParams(0, LayoutParams.MATCH_PARENT, 1));
 
         pager.setId(R.id.mcv_pager);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/TitleChanger.java
Patch:
@@ -24,7 +24,7 @@ class TitleChanger {
     private final int translate;
     private final Interpolator interpolator = new DecelerateInterpolator(2f);
 
-    private int orientation = MaterialCalendarView.HORIZONTAL;
+    private int orientation = MaterialCalendarView.VERTICAL;
 
     private long lastAnimTime = 0;
     private CalendarDay previousMonth = null;

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -1095,6 +1095,9 @@ private void setRangeDates(CalendarDay min, CalendarDay max) {
         CalendarDay c = currentMonth;
         adapter.setRangeDates(min, max);
         currentMonth = c;
+        if (min != null) {
+            currentMonth = min.isAfter(currentMonth) ? min : currentMonth;
+        }
         int position = adapter.getIndexForDay(c);
         pager.setCurrentItem(position, false);
         updateUi();

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -1095,6 +1095,9 @@ private void setRangeDates(CalendarDay min, CalendarDay max) {
         CalendarDay c = currentMonth;
         adapter.setRangeDates(min, max);
         currentMonth = c;
+        if (min != null) {
+            currentMonth = min.isAfter(currentMonth) ? min : currentMonth;
+        }
         int position = adapter.getIndexForDay(c);
         pager.setCurrentItem(position, false);
         updateUi();

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -42,7 +42,7 @@ public static class Weekly implements DateRangeIndex {
 
         public Weekly(@NonNull CalendarDay min, @NonNull CalendarDay max, int firstDayOfWeek) {
             this.min = getFirstDayOfWeek(min, firstDayOfWeek);
-            this.count = weekNumberDifference(min, max) + 1;
+            this.count = weekNumberDifference(this.min, max) + 1;
         }
 
         @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -42,7 +42,7 @@ public static class Weekly implements DateRangeIndex {
 
         public Weekly(@NonNull CalendarDay min, @NonNull CalendarDay max, int firstDayOfWeek) {
             this.min = getFirstDayOfWeek(min, firstDayOfWeek);
-            this.count = weekNumberDifference(min, max) + 1;
+            this.count = weekNumberDifference(this.min, max) + 1;
         }
 
         @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -1136,6 +1136,8 @@ protected void onRestoreInstanceState(Parcelable state) {
         setWeekDayTextAppearance(ss.weekDayTextAppearance);
         setShowOtherDates(ss.showOtherDates);
         setAllowClickDaysOutsideCurrentMonth(ss.allowClickDaysOutsideCurrentMonth);
+        minDate = ss.minDate;
+        maxDate = ss.maxDate;
         setRangeDates(ss.minDate, ss.maxDate);
         clearSelection();
         for (CalendarDay calendarDay : ss.selectedDates) {

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarMode.java
Patch:
@@ -1,5 +1,6 @@
 package com.prolificinteractive.materialcalendarview;
 
+@Experimental
 public enum CalendarMode {
 
     MONTHS(6),

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekDayView.java
Patch:
@@ -13,6 +13,7 @@
 /**
  * Display a day of the week
  */
+@Experimental
 @SuppressLint("ViewConstructor")
 class WeekDayView extends TextView {
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -6,6 +6,7 @@
 import java.util.Date;
 import java.util.concurrent.TimeUnit;
 
+@Experimental
 public class WeekPagerAdapter extends CalendarPagerAdapter<WeekView> {
 
     public WeekPagerAdapter(MaterialCalendarView mcv) {

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekView.java
Patch:
@@ -10,6 +10,7 @@
  * Display a week of {@linkplain DayView}s and
  * seven {@linkplain WeekDayView}s.
  */
+@Experimental
 @SuppressLint("ViewConstructor")
 public class WeekView extends CalendarPagerView {
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarMode.java
Patch:
@@ -1,5 +1,6 @@
 package com.prolificinteractive.materialcalendarview;
 
+@Experimental
 public enum CalendarMode {
 
     MONTHS(6),

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekDayView.java
Patch:
@@ -13,6 +13,7 @@
 /**
  * Display a day of the week
  */
+@Experimental
 @SuppressLint("ViewConstructor")
 class WeekDayView extends TextView {
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -6,6 +6,7 @@
 import java.util.Date;
 import java.util.concurrent.TimeUnit;
 
+@Experimental
 public class WeekPagerAdapter extends CalendarPagerAdapter<WeekView> {
 
     public WeekPagerAdapter(MaterialCalendarView mcv) {

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekView.java
Patch:
@@ -10,6 +10,7 @@
  * Display a week of {@linkplain DayView}s and
  * seven {@linkplain WeekDayView}s.
  */
+@Experimental
 @SuppressLint("ViewConstructor")
 public class WeekView extends CalendarPagerView {
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -41,7 +41,7 @@ public static class Weekly implements DateRangeIndex {
 
         public Weekly(@NonNull CalendarDay min, @NonNull CalendarDay max, int firstDayOfWeek) {
             this.min = getFirstDayOfWeek(min, firstDayOfWeek);
-            this.count = weekNumberDifference(min, max);
+            this.count = weekNumberDifference(min, max) + 1;
         }
 
         @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -41,7 +41,7 @@ public static class Weekly implements DateRangeIndex {
 
         public Weekly(@NonNull CalendarDay min, @NonNull CalendarDay max, int firstDayOfWeek) {
             this.min = getFirstDayOfWeek(min, firstDayOfWeek);
-            this.count = weekNumberDifference(min, max);
+            this.count = weekNumberDifference(min, max) + 1;
         }
 
         @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerAdapter.java
Patch:
@@ -134,6 +134,7 @@ public int getItemPosition(Object object) {
     @Override
     public Object instantiateItem(ViewGroup container, int position) {
         V pagerView = createView(position);
+        pagerView.setContentDescription(mcv.getCalendarContentDescription());
         pagerView.setAlpha(0);
         pagerView.setSelectionEnabled(selectionEnabled);
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthPagerAdapter.java
Patch:
@@ -14,7 +14,7 @@ class MonthPagerAdapter extends CalendarPagerAdapter<MonthView> {
 
     @Override
     protected MonthView createView(int position) {
-        return new MonthView(mcv, getItem(position), getFirstDayOfWeek());
+        return new MonthView(mcv, getItem(position), mcv.getFirstDayOfWeek());
     }
 
     @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -14,7 +14,7 @@ public WeekPagerAdapter(MaterialCalendarView mcv) {
 
     @Override
     protected WeekView createView(int position) {
-        return new WeekView(mcv, getItem(position), getFirstDayOfWeek());
+        return new WeekView(mcv, getItem(position), mcv.getFirstDayOfWeek());
     }
 
     @Override
@@ -30,7 +30,7 @@ protected boolean isInstanceOfView(Object object) {
 
     @Override
     protected DateRangeIndex createRangeIndex(CalendarDay min, CalendarDay max) {
-        return new Weekly(min, max, getFirstDayOfWeek());
+        return new Weekly(min, max, mcv.getFirstDayOfWeek());
     }
 
     public static class Weekly implements DateRangeIndex {

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthPagerAdapter.java
Patch:
@@ -14,7 +14,7 @@ class MonthPagerAdapter extends CalendarPagerAdapter<MonthView> {
 
     @Override
     protected MonthView createView(int position) {
-        return new MonthView(mcv, getItem(position), getFirstDayOfWeek());
+        return new MonthView(mcv, getItem(position), mcv.getFirstDayOfWeek());
     }
 
     @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerAdapter.java
Patch:
@@ -122,9 +122,9 @@ public int getItemPosition(Object object) {
         if (!(isInstanceOfView(object))) {
             return POSITION_NONE;
         }
-        MonthView monthView = (MonthView) object;
-        CalendarDay month = monthView.getMonth();
-        if (month == null) {
+        CalendarPagerView pagerView = (CalendarPagerView) object;
+        CalendarDay firstViewDay = pagerView.getFirstViewDay();
+        if (firstViewDay == null) {
             return POSITION_NONE;
         }
         int index = indexOf((V) object);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerAdapter.java
Patch:
@@ -122,9 +122,9 @@ public int getItemPosition(Object object) {
         if (!(isInstanceOfView(object))) {
             return POSITION_NONE;
         }
-        MonthView monthView = (MonthView) object;
-        CalendarDay month = monthView.getMonth();
-        if (month == null) {
+        CalendarPagerView pagerView = (CalendarPagerView) object;
+        CalendarDay firstViewDay = pagerView.getFirstViewDay();
+        if (firstViewDay == null) {
             return POSITION_NONE;
         }
         int index = indexOf((V) object);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -989,6 +989,7 @@ private void setRangeDates(CalendarDay min, CalendarDay max) {
         currentMonth = c;
         int position = adapter.getIndexForDay(c);
         pager.setCurrentItem(position, false);
+        updateUi();
     }
 
     public static class SavedState extends BaseSavedState {

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -989,6 +989,7 @@ private void setRangeDates(CalendarDay min, CalendarDay max) {
         currentMonth = c;
         int position = adapter.getIndexForDay(c);
         pager.setCurrentItem(position, false);
+        updateUi();
     }
 
     public static class SavedState extends BaseSavedState {

File: library/src/main/java/com/prolificinteractive/materialcalendarview/TitleChanger.java
Patch:
@@ -51,7 +51,7 @@ public void change(final CalendarDay currentMonth) {
             doChange(currentTime, currentMonth, false);
         }
 
-        if (currentMonth.equals(previousMonth)) {
+        if (currentMonth.equals(previousMonth) || currentMonth.getMonth() == previousMonth.getMonth()) {
             return;
         }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/TitleChanger.java
Patch:
@@ -51,7 +51,7 @@ public void change(final CalendarDay currentMonth) {
             doChange(currentTime, currentMonth, false);
         }
 
-        if (currentMonth.equals(previousMonth)) {
+        if (currentMonth.equals(previousMonth) || currentMonth.getMonth() == previousMonth.getMonth()) {
             return;
         }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthPagerAdapter.java
Patch:
@@ -33,7 +33,7 @@ protected DateRangeIndex createRangeIndex(CalendarDay min, CalendarDay max) {
         return new Monthly(min, max);
     }
 
-    private static class Monthly implements DateRangeIndex {
+    public static class Monthly implements DateRangeIndex {
 
         private final CalendarDay min;
         private final int count;

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -33,7 +33,7 @@ protected DateRangeIndex createRangeIndex(CalendarDay min, CalendarDay max) {
         return new Weekly(min, max, getFirstDayOfWeek());
     }
 
-    private static class Weekly implements DateRangeIndex {
+    public static class Weekly implements DateRangeIndex {
 
         private static final int DAYS_IN_WEEK = 7;
         private final CalendarDay min;

File: library/src/test/java/com/prolificinteractive/materialcalendarview/DateRangeIndexTest.java
Patch:
@@ -14,7 +14,7 @@ public class DateRangeIndexTest {
     @Test
     public void testSingleMonth() {
         CalendarDay date = CalendarDay.from(2015, 6, 1);
-        DateRangeIndex index = new DateRangeIndex(date, date);
+        DateRangeIndex index = new MonthPagerAdapter.Monthly(date, date);
 
         assertEquals(1, index.getCount());
         assertEquals(date, index.getItem(0));
@@ -31,7 +31,7 @@ public void testBigRange() {
         maxCal.set(3000, 0, 1);
         CalendarDay maxDay = CalendarDay.from(maxCal);
 
-        DateRangeIndex index = new DateRangeIndex(minDay, maxDay);
+        DateRangeIndex index = new MonthPagerAdapter.Monthly(minDay, maxDay);
 
         assertEquals(2000 * 12 + 1, index.getCount());
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthPagerAdapter.java
Patch:
@@ -33,7 +33,7 @@ protected DateRangeIndex createRangeIndex(CalendarDay min, CalendarDay max) {
         return new Monthly(min, max);
     }
 
-    private static class Monthly implements DateRangeIndex {
+    public static class Monthly implements DateRangeIndex {
 
         private final CalendarDay min;
         private final int count;

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -33,7 +33,7 @@ protected DateRangeIndex createRangeIndex(CalendarDay min, CalendarDay max) {
         return new Weekly(min, max, getFirstDayOfWeek());
     }
 
-    private static class Weekly implements DateRangeIndex {
+    public static class Weekly implements DateRangeIndex {
 
         private static final int DAYS_IN_WEEK = 7;
         private final CalendarDay min;

File: library/src/test/java/com/prolificinteractive/materialcalendarview/DateRangeIndexTest.java
Patch:
@@ -14,7 +14,7 @@ public class DateRangeIndexTest {
     @Test
     public void testSingleMonth() {
         CalendarDay date = CalendarDay.from(2015, 6, 1);
-        DateRangeIndex index = new DateRangeIndex(date, date);
+        DateRangeIndex index = new MonthPagerAdapter.Monthly(date, date);
 
         assertEquals(1, index.getCount());
         assertEquals(date, index.getItem(0));
@@ -31,7 +31,7 @@ public void testBigRange() {
         maxCal.set(3000, 0, 1);
         CalendarDay maxDay = CalendarDay.from(maxCal);
 
-        DateRangeIndex index = new DateRangeIndex(minDay, maxDay);
+        DateRangeIndex index = new MonthPagerAdapter.Monthly(minDay, maxDay);
 
         assertEquals(2000 * 12 + 1, index.getCount());
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPager.java
Patch:
@@ -7,11 +7,11 @@
 /**
  * Custom ViewPager that allows swiping to be disabled.
  */
-class MonthPager extends BetterViewPager {
+class CalendarPager extends BetterViewPager {
 
     private boolean pagingEnabled = true;
 
-    public MonthPager(Context context) {
+    public CalendarPager(Context context) {
         super(context);
     }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerView.java
Patch:
@@ -236,7 +236,7 @@ protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec
 
         //We expect to be somewhere inside a MaterialCalendarView, which should measure EXACTLY
         if (specHeightMode == MeasureSpec.UNSPECIFIED || specWidthMode == MeasureSpec.UNSPECIFIED) {
-            throw new IllegalStateException("MonthView should never be left to decide it's size");
+            throw new IllegalStateException("CalendarPagerView should never be left to decide it's size");
         }
 
         //The spec width should be a correct multiple

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthView.java
Patch:
@@ -13,9 +13,8 @@
 @SuppressLint("ViewConstructor")
 class MonthView extends CalendarPagerView {
 
-    protected static final int DEFAULT_DAYS_IN_WEEK = 7;
-    protected static final int DEFAULT_MAX_WEEKS = 6;
-    protected static final int DEFAULT_MONTH_TILE_HEIGHT = DEFAULT_MAX_WEEKS + 1;
+    private static final int DEFAULT_DAYS_IN_WEEK = 7;
+    private static final int DEFAULT_MAX_WEEKS = 6;
 
     public MonthView(@NonNull MaterialCalendarView view, CalendarDay month, int firstDayOfWeek) {
         super(view, month, firstDayOfWeek);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -41,7 +41,7 @@ private static class Weekly implements DateRangeIndex {
         public Weekly(@NonNull CalendarDay min, @NonNull CalendarDay max) {
             this.min = CalendarDay.from(min.getYear(), min.getMonth(), 1);
             max = CalendarDay.from(max.getYear(), max.getMonth(), 1);
-            this.count = weekNumberDifference(min, max) + 1;
+            this.count = weekNumberDifference(min, max);
         }
 
         @Override
@@ -67,7 +67,7 @@ public CalendarDay getItem(int position) {
         private int weekNumberDifference(@NonNull CalendarDay min, @NonNull CalendarDay max) {
             long millisDiff = max.getDate().getTime() - min.getDate().getTime();
             long dayDiff = TimeUnit.DAYS.convert(millisDiff, TimeUnit.MILLISECONDS);
-            return (int) (dayDiff / DAYS_IN_WEEK);
+            return (int) (dayDiff / DAYS_IN_WEEK) + 1;
         }
     }
 }

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPager.java
Patch:
@@ -7,11 +7,11 @@
 /**
  * Custom ViewPager that allows swiping to be disabled.
  */
-class MonthPager extends BetterViewPager {
+class CalendarPager extends BetterViewPager {
 
     private boolean pagingEnabled = true;
 
-    public MonthPager(Context context) {
+    public CalendarPager(Context context) {
         super(context);
     }
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/CalendarPagerView.java
Patch:
@@ -236,7 +236,7 @@ protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec
 
         //We expect to be somewhere inside a MaterialCalendarView, which should measure EXACTLY
         if (specHeightMode == MeasureSpec.UNSPECIFIED || specWidthMode == MeasureSpec.UNSPECIFIED) {
-            throw new IllegalStateException("MonthView should never be left to decide it's size");
+            throw new IllegalStateException("CalendarPagerView should never be left to decide it's size");
         }
 
         //The spec width should be a correct multiple

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthView.java
Patch:
@@ -13,9 +13,8 @@
 @SuppressLint("ViewConstructor")
 class MonthView extends CalendarPagerView {
 
-    protected static final int DEFAULT_DAYS_IN_WEEK = 7;
-    protected static final int DEFAULT_MAX_WEEKS = 6;
-    protected static final int DEFAULT_MONTH_TILE_HEIGHT = DEFAULT_MAX_WEEKS + 1;
+    private static final int DEFAULT_DAYS_IN_WEEK = 7;
+    private static final int DEFAULT_MAX_WEEKS = 6;
 
     public MonthView(@NonNull MaterialCalendarView view, CalendarDay month, int firstDayOfWeek) {
         super(view, month, firstDayOfWeek);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekPagerAdapter.java
Patch:
@@ -41,7 +41,7 @@ private static class Weekly implements DateRangeIndex {
         public Weekly(@NonNull CalendarDay min, @NonNull CalendarDay max) {
             this.min = CalendarDay.from(min.getYear(), min.getMonth(), 1);
             max = CalendarDay.from(max.getYear(), max.getMonth(), 1);
-            this.count = weekNumberDifference(min, max) + 1;
+            this.count = weekNumberDifference(min, max);
         }
 
         @Override
@@ -67,7 +67,7 @@ public CalendarDay getItem(int position) {
         private int weekNumberDifference(@NonNull CalendarDay min, @NonNull CalendarDay max) {
             long millisDiff = max.getDate().getTime() - min.getDate().getTime();
             long dayDiff = TimeUnit.DAYS.convert(millisDiff, TimeUnit.MILLISECONDS);
-            return (int) (dayDiff / DAYS_IN_WEEK);
+            return (int) (dayDiff / DAYS_IN_WEEK) + 1;
         }
     }
 }

File: library/src/main/java/com/prolificinteractive/materialcalendarview/DayViewFacade.java
Patch:
@@ -38,7 +38,6 @@ public void setBackgroundDrawable(@NonNull Drawable drawable) {
 
     /**
      * Set a custom selection drawable
-     * <p/>
      * TODO: define states that can/should be used in StateListDrawables
      *
      * @param drawable the drawable for selection
@@ -65,7 +64,6 @@ public void addSpan(@NonNull Object span) {
 
     /**
      * <p>Set days to be in a disabled state, or re-enabled.</p>
-     * <p/>
      * <p>Note, passing true here will <b>not</b> override minimum and maximum dates, if set.
      * This will only re-enable disabled dates.</p>
      *

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -1022,7 +1022,7 @@ private static int getThemeAccentColor(Context context) {
 
     /**
      * Sets the first day of the week.
-     * <p/>
+
      * Uses the java.util.Calendar day constants.
      *
      * @param day The first day of the week as a java.util.Calendar day constant.

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -470,7 +470,7 @@ TypedValue.COMPLEX_UNIT_DIP, dp, getResources().getDisplayMetrics()
      * @return true if there is a future month that can be shown
      */
     private boolean canGoForward() {
-        return pager.isPagingEnabled() && pager.getCurrentItem() < (adapter.getCount() - 1);
+        return pager.getCurrentItem() < (adapter.getCount() - 1);
     }
 
     /**
@@ -479,7 +479,7 @@ private boolean canGoForward() {
      * @return true if there is a previous month that can be shown
      */
     private boolean canGoBack() {
-        return pager.isPagingEnabled() && pager.getCurrentItem() > 0;
+        return pager.getCurrentItem() > 0;
     }
 
     /**

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MonthPagerAdapter.java
Patch:
@@ -107,6 +107,7 @@ public int getItemPosition(Object object) {
     public Object instantiateItem(ViewGroup container, int position) {
         CalendarDay month = months.get(position);
         MonthView monthView = new MonthView(container.getContext(), month, firstDayOfTheWeek);
+        monthView.setAlpha(0);
 
         monthView.setWeekDayFormatter(weekDayFormatter);
         monthView.setDayFormatter(dayFormatter);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/DayView.java
Patch:
@@ -100,7 +100,7 @@ public void setSelectionColor(int color) {
      */
     public void setSelectionDrawable(Drawable selectionDrawable) {
         this.selectionDrawable = selectionDrawable;
-        invalidate();
+        regenerateBackground();
     }
 
     /**

File: library/src/main/java/com/prolificinteractive/materialcalendarview/DayViewDecorator.java
Patch:
@@ -6,6 +6,8 @@
 public interface DayViewDecorator {
 
     /**
+     * @param day {@linkplain CalendarDay} to possibly decorate
+     *
      * @return true if this decorator should be applied to the provided day
      */
     boolean shouldDecorate(CalendarDay day);

File: library/src/main/java/com/prolificinteractive/materialcalendarview/DayViewFacade.java
Patch:
@@ -68,6 +68,8 @@ public void addSpan(@NonNull Object span) {
      *
      * <p>Note, passing true here will <b>not</b> override minimum and maximum dates, if set.
      * This will only re-enable disabled dates.</p>
+     *
+     * @param daysDisabled true to disable days, false to re-enable days
      */
     public void setDaysDisabled(boolean daysDisabled) {
         this.daysDisabled = daysDisabled;

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -56,7 +56,7 @@
 public class MaterialCalendarView extends FrameLayout {
 
     /**
-     *
+     * Default tile size in DIPs
      */
     public static final int DEFAULT_TILE_SIZE_DP = 44;
 

File: library/src/main/java/com/prolificinteractive/materialcalendarview/DayView.java
Patch:
@@ -117,7 +117,7 @@ public CalendarDay getDate() {
 
     private void setEnabled() {
         super.setEnabled(isInRange && !isDecoratedDisabled);
-        setVisibility(isEnabled() || showOtherDates ? View.VISIBLE : View.INVISIBLE);
+        setVisibility(isInRange || showOtherDates ? View.VISIBLE : View.INVISIBLE);
     }
 
     protected void setupSelection(boolean showOtherDates, boolean inRange, boolean inMonth) {

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/DisableDaysActivity.java
Patch:
@@ -31,7 +31,6 @@ protected void onCreate(Bundle savedInstanceState) {
 
         MaterialCalendarView widget = (MaterialCalendarView) findViewById(R.id.calendarView);
         widget.setOnDateChangedListener(this);
-        widget.setShowOtherDates(true);
 
         // Add a decorator to disable prime numbered days
         widget.addDecorator(new PrimeDayDisableDecorator());

File: library/src/main/java/com/prolificinteractive/materialcalendarview/AnimatorListener.java
Patch:
@@ -2,7 +2,7 @@
 
 import android.animation.Animator;
 
-public class AnimatorListener implements Animator.AnimatorListener {
+class AnimatorListener implements Animator.AnimatorListener {
   @Override public void onAnimationStart(Animator animator) { }
 
   @Override public void onAnimationEnd(Animator animator) { }

File: library/src/main/java/com/prolificinteractive/materialcalendarview/MaterialCalendarView.java
Patch:
@@ -374,7 +374,7 @@ public void setCurrentDate(Date date) {
      * @return The current day shown, will be set to first day of the month
      */
     public CalendarDay getCurrentDate() {
-        return currentDate;
+        return adapter.getItem(pager.getCurrentItem());
     }
 
     /**

File: sample/src/main/java/com/prolificinteractive/materialcalendarview/sample/RangeActivity.java
Patch:
@@ -31,13 +31,13 @@ protected void onCreate(Bundle savedInstanceState) {
         widget.setOnDateChangedListener(this);
 
         Calendar calendar = Calendar.getInstance();
-        widget.setSelectedDate(calendar);
+        widget.setSelectedDate(calendar.getTime());
 
         calendar.set(calendar.get(Calendar.YEAR), Calendar.JANUARY, 1);
-        widget.setMinimumDate(calendar);
+        widget.setMinimumDate(calendar.getTime());
 
         calendar.set(calendar.get(Calendar.YEAR) + 2, Calendar.OCTOBER, 31);
-        widget.setMaximumDate(calendar);
+        widget.setMaximumDate(calendar.getTime());
     }
 
     @Override

File: library/src/main/java/com/prolificinteractive/materialcalendarview/WeekDayView.java
Patch:
@@ -24,8 +24,6 @@ public WeekDayView(Context context, AttributeSet attrs) {
 
         setGravity(Gravity.CENTER);
 
-        setTextAppearance(context, R.style.TextAppearance_MaterialCalendarWidget_WeekDay);
-
         if(isInEditMode()) {
             setText("Mon");
         }

File: library/src/main/java/com/prolificinteractive/materialcalendarview/DayView.java
Patch:
@@ -16,6 +16,7 @@
 import android.view.Gravity;
 import android.view.View;
 import android.widget.CheckedTextView;
+import com.prolificinteractive.library.calendarwidget.R;
 
 /**
  * Display one day of a {@linkplain MaterialCalendarView}
@@ -36,7 +37,7 @@ public DayView(Context context, AttributeSet attrs) {
 
         setGravity(Gravity.CENTER);
 
-        setTextSize(12);
+        setTextAppearance(context, R.style.TextAppearance_MaterialCalendarWidget_Date);
 
         if(isInEditMode()) {
             setText("99");

