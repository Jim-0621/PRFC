File: app/src/main/java/com/example/zhpan/banner/activity/WebViewActivity.java
Patch:
@@ -14,8 +14,8 @@
 import androidx.appcompat.widget.Toolbar;
 
 import com.example.zhpan.banner.R;
-import com.scwang.smartrefresh.header.MaterialHeader;
-import com.scwang.smartrefresh.layout.api.RefreshLayout;
+import com.scwang.smart.refresh.header.MaterialHeader;
+import com.scwang.smart.refresh.layout.api.RefreshLayout;
 
 /**
  * Created by zhpan on 2017/4/16.

File: app/src/main/java/com/example/zhpan/banner/fragment/HomeFragment.java
Patch:
@@ -25,8 +25,8 @@
 import com.example.zhpan.banner.net.RxUtil;
 import com.example.zhpan.banner.net.common.ResponseObserver;
 import com.example.zhpan.banner.recyclerview.ui.CustomRecyclerView;
-import com.scwang.smartrefresh.header.MaterialHeader;
-import com.scwang.smartrefresh.layout.SmartRefreshLayout;
+import com.scwang.smart.refresh.header.MaterialHeader;
+import com.scwang.smart.refresh.layout.SmartRefreshLayout;
 import com.zhpan.bannerview.BannerViewPager;
 import com.zhpan.bannerview.constants.IndicatorGravity;
 import com.zhpan.bannerview.utils.BannerUtils;

File: app/src/main/java/com/example/zhpan/banner/fragment/OthersFragment.java
Patch:
@@ -13,8 +13,8 @@
 import com.example.zhpan.banner.R;
 import com.example.zhpan.banner.adapter.ViewBindingSampleAdapter;
 import com.example.zhpan.banner.view.FigureIndicatorView;
-import com.scwang.smartrefresh.header.MaterialHeader;
-import com.scwang.smartrefresh.layout.SmartRefreshLayout;
+import com.scwang.smart.refresh.header.MaterialHeader;
+import com.scwang.smart.refresh.layout.SmartRefreshLayout;
 import com.zhpan.bannerview.BannerViewPager;
 import com.zhpan.bannerview.constants.IndicatorGravity;
 import com.zhpan.bannerview.indicator.DrawableIndicator;

File: app/src/main/java/com/example/zhpan/banner/transform/PageTransformerFactory.java
Patch:
@@ -32,7 +32,7 @@ public static ViewPager2.PageTransformer createPageTransformer(int transformerSt
         transformer = new AccordionTransformer();
         break;
       case SCALE_IN:
-        transformer = new ScaleInTransformer(ScaleInTransformer.DEFAULT_MIN_SCALE);
+        transformer = new ScaleInTransformer(ScaleInTransformer.DEFAULT_MIN_SCALE, false);
         break;
     }
     return transformer;

File: bannerview/src/main/java/com/zhpan/bannerview/manager/BannerManager.java
Patch:
@@ -103,7 +103,7 @@ public void setMultiPageStyle(boolean overlap, float scale) {
       mDefaultPageTransformer = new OverlapPageTransformer(mBannerOptions
           .getOrientation(), scale, 0f, 1, 0);
     } else {
-      mDefaultPageTransformer = new ScaleInTransformer(scale);
+      mDefaultPageTransformer = new ScaleInTransformer(scale, mBannerOptions.isRtl());
     }
     mCompositePageTransformer.addTransformer(mDefaultPageTransformer);
   }

File: app/src/main/java/com/example/zhpan/banner/transform/PageTransformerFactory.java
Patch:
@@ -32,7 +32,7 @@ public static ViewPager2.PageTransformer createPageTransformer(int transformerSt
         transformer = new AccordionTransformer();
         break;
       case SCALE_IN:
-        transformer = new ScaleInTransformer(ScaleInTransformer.DEFAULT_MIN_SCALE);
+        transformer = new ScaleInTransformer(ScaleInTransformer.DEFAULT_MIN_SCALE, false);
         break;
     }
     return transformer;

File: bannerview/src/main/java/com/zhpan/bannerview/manager/BannerManager.java
Patch:
@@ -103,7 +103,7 @@ public void setMultiPageStyle(boolean overlap, float scale) {
       mDefaultPageTransformer = new OverlapPageTransformer(mBannerOptions
           .getOrientation(), scale, 0f, 1, 0);
     } else {
-      mDefaultPageTransformer = new ScaleInTransformer(scale);
+      mDefaultPageTransformer = new ScaleInTransformer(scale, mBannerOptions.isRtl());
     }
     mCompositePageTransformer.addTransformer(mDefaultPageTransformer);
   }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -15,6 +15,7 @@
  */
 package com.zhpan.bannerview;
 
+import android.annotation.SuppressLint;
 import android.content.Context;
 import android.graphics.Canvas;
 import android.graphics.Path;
@@ -69,6 +70,7 @@
  * Created by zhpan on 2017/3/28.
  */
 @SuppressWarnings({ "unused", "UnusedReturnValue" })
+@SuppressLint("NotifyDataSetChanged")
 public class BannerViewPager<T> extends RelativeLayout implements LifecycleObserver {
 
   private int currentPosition;

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -422,6 +422,8 @@ private void initRevealWidth(BannerOptions bannerOptions) {
       int orientation = bannerOptions.getOrientation();
       int padding2 = bannerOptions.getPageMargin() + rightRevealWidth;
       int padding1 = bannerOptions.getPageMargin() + leftRevealWidth;
+      if (padding1 < 0) padding1 = 0;
+      if (padding2 < 0) padding2 = 0;
       if (orientation == ViewPager2.ORIENTATION_HORIZONTAL) {
         recyclerView.setPadding(padding1, 0, padding2, 0);
       } else if (orientation == ViewPager2.ORIENTATION_VERTICAL) {

File: app/src/main/java/com/example/zhpan/banner/fragment/OthersFragment.java
Patch:
@@ -83,7 +83,7 @@ protected void initView(Bundle savedInstanceState, @NonNull View view) {
         .setOnPageClickListener(
             (clickedView, position) -> ToastUtils.showShort("Position:" + position))
         .setIndicatorSliderColor(getColor(R.color.red_normal_color),
-            getColor(R.color.red_checked_color)).create();
+            getColor(R.color.red_checked_color)).create(getPicList(2));
     initRadioGroup();
   }
 
@@ -102,7 +102,7 @@ private void initRadioGroup() {
         setRoundCorner();
       }
     });
-    radioButton.performClick();
+    mViewPager.post(() -> radioButton.performClick());
   }
 
   private void setRoundCorner() {

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -496,7 +496,7 @@ public List<T> getData() {
    */
   public void startLoop() {
     if (!isLooping && isAutoPlay() && mBannerPagerAdapter != null &&
-        mBannerPagerAdapter.getListSize() > 1) {
+        mBannerPagerAdapter.getListSize() > 1 && isAttachedToWindow()) {
       mHandler.postDelayed(mRunnable, getInterval());
       isLooping = true;
     }
@@ -828,7 +828,7 @@ public void create(List<T> data) {
    * refresh.
    */
   public void create() {
-    create(new ArrayList<T>());
+    create(new ArrayList<>());
   }
 
   /**
@@ -1056,7 +1056,7 @@ public void onPause() {
 
   @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)
   public void onResume() {
-    if (isAttachedToWindow() || !isStopLoopWhenDetachedFromWindow()) {
+    if (!isStopLoopWhenDetachedFromWindow()) {
       startLoop();
     }
   }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -651,6 +651,9 @@ public BannerViewPager<T> setPageMargin(int pageMargin) {
    */
   public BannerViewPager<T> setOnPageClickListener(OnPageClickListener onPageClickListener) {
     this.mOnPageClickListener = onPageClickListener;
+    if (mBannerPagerAdapter != null) {
+      mBannerPagerAdapter.setPageClickListener(mOnPageClickListener);
+    }
     return this;
   }
 

File: app/src/main/java/com/example/zhpan/banner/fragment/HomeFragment.java
Patch:
@@ -189,7 +189,7 @@ private void initVerticalBanner() {
         mViewPagerVertical
             .setAutoPlay(true)
             .setScrollDuration(500)
-            .stopLoopWhenDetachedFromWindow(false)
+            .stopLoopWhenDetachedFromWindow(true)
             .setLifecycleRegistry(getLifecycle())
             .setIndicatorStyle(IndicatorStyle.ROUND_RECT)
             .setIndicatorSlideMode(IndicatorSlideMode.SCALE)

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -7,6 +7,7 @@
 import android.os.Build;
 import android.os.Bundle;
 import android.os.Handler;
+import android.os.Looper;
 import android.os.Parcelable;
 import android.util.AttributeSet;
 import android.view.MotionEvent;

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -71,7 +71,7 @@ public class BannerViewPager<T> extends RelativeLayout implements LifecycleObser
 
   private BannerManager mBannerManager;
 
-  private final Handler mHandler = new Handler();
+  private final Handler mHandler = new Handler(Looper.getMainLooper());
 
   private BaseBannerAdapter<T> mBannerPagerAdapter;
 

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -479,7 +479,7 @@ protected void onRestoreInstanceState(Parcelable state) {
     super.onRestoreInstanceState(superState);
     currentPosition = bundle.getInt(KEY_CURRENT_POSITION);
     isCustomIndicator = bundle.getBoolean(KEY_IS_CUSTOM_INDICATOR);
-    setCurrentItem(currentPosition,false);
+    setCurrentItem(currentPosition, false);
   }
 
   /**
@@ -928,6 +928,7 @@ public void setCurrentItem(int item) {
     if (isCanLoopSafely()) {
       int currentItem = mViewPager.getCurrentItem();
       int pageSize = mBannerPagerAdapter.getListSize();
+      item = item >= pageSize ? pageSize - 1 : item;
       boolean canLoop = mBannerManager.getBannerOptions().isCanLoop();
       int realPosition =
           BannerUtils.getRealPosition(currentItem, mBannerPagerAdapter.getListSize());
@@ -954,6 +955,7 @@ public void setCurrentItem(int item) {
   public void setCurrentItem(int item, boolean smoothScroll) {
     if (isCanLoopSafely()) {
       int pageSize = mBannerPagerAdapter.getListSize();
+      item = item >= pageSize ? pageSize - 1 : item;
       int currentItem = mViewPager.getCurrentItem();
       boolean canLoop = mBannerManager.getBannerOptions().isCanLoop();
       int realPosition = BannerUtils.getRealPosition(currentItem, pageSize);

File: app/src/main/java/com/example/zhpan/banner/adapter/MultiViewTypesAdapter.java
Patch:
@@ -11,7 +11,7 @@
 /**
  * <pre>
  *   Created by zhpan on 2020/4/6.
- *   Description:Multiple view types adapter sample.
+ *   Description:Sample of multiple view types .
  * </pre>
  */
 public class MultiViewTypesAdapter extends BaseBannerAdapter<BannerData> {

File: app/src/main/java/com/example/zhpan/banner/fragment/HomeFragment.java
Patch:
@@ -125,7 +125,7 @@ public void onSuccess(DataWrapper response) {
                     headerView.setVisibility(View.VISIBLE);
                     List<BannerData> dataList = response.getDataBeanList();
                     BannerData bannerData = new BannerData();
-                    bannerData.setDrawable(R.drawable.bg_card0);
+                    bannerData.setDrawable(R.drawable.bg_card3);
                     bannerData.setType(TYPE_NEW);
                     bannerData.setTitle("这是一个自定义类型");
                     dataList.add(1, bannerData);

File: app/src/main/java/com/example/zhpan/banner/fragment/HomeFragment.java
Patch:
@@ -189,6 +189,7 @@ private void initVerticalBanner() {
         mViewPagerVertical
             .setAutoPlay(true)
             .setScrollDuration(500)
+            .stopLoopWhenDetachedFromWindow(false)
             .setLifecycleRegistry(getLifecycle())
             .setIndicatorStyle(IndicatorStyle.ROUND_RECT)
             .setIndicatorSlideMode(IndicatorSlideMode.SCALE)

File: app/src/main/java/com/example/zhpan/banner/fragment/OthersFragment.java
Patch:
@@ -73,7 +73,7 @@ protected void initView(Bundle savedInstanceState, @NonNull View view) {
         mViewPager.setIndicatorSliderGap(BannerUtils.dp2px(6))
                 .setIndicatorView(mIndicatorView)
                 .setLifecycleRegistry(getLifecycle())
-                .setRoundCorner(BannerUtils.dp2px(6))
+                .setRoundCorner(BannerUtils.dp2px(36), 0, 0, BannerUtils.dp2px(36))
                 .setOnPageClickListener((clickedView, position) -> {
                     ToastUtils.showShort("position:" + position);
                     int currentItem = mViewPager.getCurrentItem();

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -32,13 +32,11 @@
 import com.zhpan.indicator.annotation.AIndicatorSlideMode;
 import com.zhpan.indicator.annotation.AIndicatorStyle;
 import com.zhpan.indicator.base.IIndicator;
-import com.zhpan.indicator.enums.IndicatorOrientation;
 import com.zhpan.indicator.option.IndicatorOptions;
 
 import java.util.ArrayList;
 import java.util.List;
 
-import static android.os.Build.VERSION_CODES.JELLY_BEAN_MR1;
 import static com.zhpan.bannerview.BaseBannerAdapter.MAX_VALUE;
 import static com.zhpan.bannerview.constants.IndicatorGravity.CENTER;
 import static com.zhpan.bannerview.constants.IndicatorGravity.END;
@@ -930,7 +928,6 @@ public void setCurrentItem(int item, boolean smoothScroll) {
     /**
      * Set Page Style for Banner
      * {@link PageStyle#NORMAL}
-     * {@link PageStyle#MULTI_PAGE}
      *
      * @return BannerViewPager
      */

File: bannerview/src/main/java/com/zhpan/bannerview/provider/ReflectLayoutManager.java
Patch:
@@ -48,9 +48,7 @@ public static void reflectLayoutManager(ViewPager2 viewPager2, int scrollDuratio
                 layoutManager.setAccessible(true);
                 layoutManager.set(mScrollEventAdapter, scrollDurationManger);
             }
-        } catch (NoSuchFieldException e) {
-            e.printStackTrace();
-        } catch (IllegalAccessException e) {
+        } catch (NoSuchFieldException | IllegalAccessException e) {
             e.printStackTrace();
         }
     }

File: app/src/main/java/com/example/zhpan/banner/adapter/others/DataBindingAdapter.java
Patch:
@@ -14,7 +14,7 @@
  * </pre>
  */
 public class DataBindingAdapter {
-    @BindingAdapter(value = {"binding:url", "binding:placeholder"}, requireAll = false)
+    @BindingAdapter(value = {"url", "placeholder"}, requireAll = false)
     public static void bindUrl(ImageView imageView, String url, int placeholder) {
         Glide.with(imageView).load(url).error(placeholder).placeholder(placeholder).into(imageView);
     }

File: app/src/main/java/com/example/zhpan/banner/fragment/IndicatorFragment.java
Patch:
@@ -56,7 +56,6 @@ protected void initView(Bundle savedInstanceState, View view) {
                 .setOnPageClickListener((clickedView, position) -> ToastUtils.showShort("position:" + position))
                 .setAdapter(new ViewBindingSampleAdapter(getResources().getDimensionPixelOffset(R.dimen.dp_8))).create();
         initRadioGroup();
-        mViewPager.setUserInputEnabled(true);
     }
 
 

File: app/src/main/java/com/example/zhpan/banner/fragment/PageFragment.java
Patch:
@@ -98,7 +98,7 @@ private void setupBanner(@APageStyle int pageStyle) {
                 .setPageMargin(getResources().getDimensionPixelOffset(R.dimen.dp_15))
                 .setRevealWidth(getResources().getDimensionPixelOffset(R.dimen.dp_10))
                 .setPageStyle(pageStyle)
-                .create(getPicList(4));
+                .create(getPicList(0));
     }
 
     // 网易云音乐样式

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -161,10 +161,10 @@ public boolean dispatchTouchEvent(MotionEvent ev) {
 
     @Override
     public boolean onInterceptTouchEvent(MotionEvent ev) {
-        boolean canIntercept = mViewPager.isUserInputEnabled()
+        boolean doNotNeedIntercept = !mViewPager.isUserInputEnabled()
                 || mBannerPagerAdapter != null
                 && mBannerPagerAdapter.getData().size() <= 1;
-        if (!canIntercept) {
+        if (doNotNeedIntercept) {
             return super.onInterceptTouchEvent(ev);
         }
         switch (ev.getAction()) {
@@ -504,7 +504,7 @@ public BaseBannerAdapter<T> getAdapter() {
      *
      * @param radius round radius
      */
-    public <VH extends BaseViewHolder<T>> BannerViewPager<T> setRoundCorner(int radius) {
+    public BannerViewPager<T> setRoundCorner(int radius) {
         mBannerManager.getBannerOptions().setRoundRectRadius(radius);
         return this;
     }

File: app/src/main/java/com/example/zhpan/banner/fragment/HomeFragment.java
Patch:
@@ -106,7 +106,6 @@ private void initRecyclerView(View view) {
                 DividerItemDecoration.VERTICAL));
         articleAdapter = new ArticleAdapter(getActivity(), new ArrayList<>());
         recyclerView.setAdapter(articleAdapter);
-        recyclerView.getHeadAndFootAdapter();
     }
 
     private void initRefreshLayout(View view) {

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -401,9 +401,9 @@ private void initRevealWidth(BannerOptions bannerOptions) {
 
     private void initPageStyle(@APageStyle int pageStyle) {
         if (pageStyle == PageStyle.MULTI_PAGE_OVERLAP) {
-            setMultiPageStyle(true, pageStyle);
+            setMultiPageStyle(true, mBannerManager.getBannerOptions().getPageScale());
         } else if (pageStyle == PageStyle.MULTI_PAGE_SCALE) {
-            setMultiPageStyle(false, pageStyle);
+            setMultiPageStyle(false, mBannerManager.getBannerOptions().getPageScale());
         }
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/HomeFragment.java
Patch:
@@ -126,7 +126,7 @@ public void onSuccess(DataWrapper response) {
                         bannerData.setDrawable(R.drawable.bg_card0);
                         bannerData.setType(TYPE_NEW);
                         bannerData.setTitle("这是一个自定义类型");
-//                        dataList.add(1, bannerData);
+                        dataList.add(1, bannerData);
                         mViewPagerHorizontal.refreshData(dataList);
                         List<ArticleWrapper.Article> articleList = response.getArticleList();
                         ArticleWrapper.Article article = new ArticleWrapper.Article();

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -52,7 +52,7 @@
 /**
  * Created by zhpan on 2017/3/28.
  */
-@SuppressWarnings("unused")
+@SuppressWarnings({"unused","UnusedReturnValue"})
 public class BannerViewPager<T, VH extends BaseViewHolder<T>> extends RelativeLayout implements LifecycleObserver {
 
     private int currentPosition;

File: bannerview/src/main/java/com/zhpan/bannerview/BaseViewHolder.java
Patch:
@@ -21,6 +21,7 @@
  *   method to get position,this method will return a fake position.
  * </pre>
  */
+@SuppressWarnings("unused")
 public abstract class BaseViewHolder<T> extends RecyclerView.ViewHolder {
 
     private final SparseArray<View> mViews = new SparseArray<>();

File: bannerview/src/main/java/com/zhpan/bannerview/manager/BannerOptions.java
Patch:
@@ -16,6 +16,7 @@
  *   Description:BannerViewPager的配置参数
  * </pre>
  */
+@SuppressWarnings("unused")
 public class BannerOptions {
 
     public BannerOptions() {

File: bannerview/src/main/java/com/zhpan/bannerview/provider/RoundViewOutlineProvider.java
Patch:
@@ -21,7 +21,7 @@ public class RoundViewOutlineProvider extends ViewOutlineProvider {
     /**
      * 圆角弧度
      */
-    private float mRadius;
+    private final float mRadius;
 
     public RoundViewOutlineProvider(float radius) {
         this.mRadius = radius;

File: bannerview/src/main/java/com/zhpan/bannerview/provider/ScrollDurationManger.java
Patch:
@@ -24,8 +24,8 @@
  * thanks:https://github.com/zguop/banner/blob/master/pager2banner/src/main/java/com/to/aboomy/pager2banner/Banner.java
  */
 public class ScrollDurationManger extends LinearLayoutManager {
-    private LinearLayoutManager mParent;
-    private int scrollDuration;
+    private final LinearLayoutManager mParent;
+    private final int scrollDuration;
 
     public ScrollDurationManger(ViewPager2 viewPager2, int scrollDuration, LinearLayoutManager linearLayoutManager) {
         super(viewPager2.getContext(), linearLayoutManager.getOrientation(), false);

File: bannerview/src/main/java/com/zhpan/bannerview/transform/ScaleInTransformer.java
Patch:
@@ -8,7 +8,7 @@ public class ScaleInTransformer implements ViewPager2.PageTransformer {
 
     private static final float DEFAULT_CENTER = 0.5f;
     public static final float DEFAULT_MIN_SCALE = 0.85f;
-    private float mMinScale;
+    private final float mMinScale;
 
     public ScaleInTransformer(float minScale) {
         mMinScale = minScale;

File: app/src/main/java/com/example/zhpan/circleviewpager/adapter/HomeAdapter.java
Patch:
@@ -1,6 +1,7 @@
 package com.example.zhpan.circleviewpager.adapter;
 
 import android.view.View;
+import android.view.ViewGroup;
 
 import com.example.zhpan.circleviewpager.R;
 import com.example.zhpan.circleviewpager.net.BannerData;
@@ -23,7 +24,7 @@ protected void onBind(BaseViewHolder<BannerData> holder, BannerData data, int po
     }
 
     @Override
-    public BaseViewHolder<BannerData> createViewHolder(View itemView, int viewType) {
+    public BaseViewHolder<BannerData> createViewHolder(ViewGroup parent, View itemView, int viewType) {
         if (viewType == BannerData.TYPE_NEW) {
             return new NewTypeViewHolder(itemView);
         }

File: app/src/main/java/com/example/zhpan/circleviewpager/adapter/ImageResourceAdapter.java
Patch:
@@ -1,6 +1,7 @@
 package com.example.zhpan.circleviewpager.adapter;
 
 import android.view.View;
+import android.view.ViewGroup;
 
 import com.example.zhpan.circleviewpager.R;
 import com.example.zhpan.circleviewpager.viewholder.ImageResourceViewHolder;
@@ -27,7 +28,7 @@ protected void onBind(ImageResourceViewHolder holder, Integer data, int position
     }
 
     @Override
-    public ImageResourceViewHolder createViewHolder(View itemView, int viewType) {
+    public ImageResourceViewHolder createViewHolder(ViewGroup parent, View itemView, int viewType) {
         return new ImageResourceViewHolder(itemView, roundCorner);
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/IndicatorFragment.java
Patch:
@@ -2,6 +2,7 @@
 
 import android.os.Bundle;
 import android.view.View;
+import android.view.ViewGroup;
 import android.widget.RadioButton;
 import android.widget.RadioGroup;
 
@@ -62,7 +63,7 @@ protected void onBind(ImageResourceViewHolder holder, Integer data, int position
                     }
 
                     @Override
-                    public ImageResourceViewHolder createViewHolder(View itemView, int viewType) {
+                    public ImageResourceViewHolder createViewHolder(ViewGroup parent, View itemView, int viewType) {
                         return new ImageResourceViewHolder(itemView, getResources().getDimensionPixelOffset(R.dimen.dp_8));
                     }
 

File: bannerview/src/main/java/com/zhpan/bannerview/BaseBannerAdapter.java
Patch:
@@ -25,7 +25,7 @@ public abstract class BaseBannerAdapter<T, VH extends BaseViewHolder<T>> extends
     @Override
     public final VH onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
         View inflate = LayoutInflater.from(parent.getContext()).inflate(getLayoutId(viewType), parent, false);
-        return createViewHolder(inflate, viewType);
+        return createViewHolder(parent, inflate, viewType);
     }
 
     @Override
@@ -86,7 +86,7 @@ protected int getViewType(int position) {
 
     protected abstract void onBind(VH holder, T data, int position, int pageSize);
 
-    public abstract VH createViewHolder(View itemView, int viewType);
+    public abstract VH createViewHolder(ViewGroup parent, View itemView, int viewType);
 
     public abstract int getLayoutId(int viewType);
 }

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/HomeFragment.java
Patch:
@@ -125,7 +125,7 @@ public void onSuccess(DataWrapper response) {
                         bannerData.setDrawable(R.drawable.bg_card0);
                         bannerData.setType(TYPE_NEW);
                         bannerData.setTitle("这是一个自定义类型");
-                        dataList.add(1, bannerData);
+//                        dataList.add(1, bannerData);
                         mViewPagerHorizontal.refreshData(dataList);
                         List<ArticleWrapper.Article> articleList = response.getArticleList();
                         ArticleWrapper.Article article = new ArticleWrapper.Article();
@@ -160,6 +160,7 @@ private void initBanner() {
         HomeAdapter homeAdapter = new HomeAdapter();
         mViewPagerHorizontal
                 .setScrollDuration(600)
+                .setOffScreenPageLimit(2)
                 .setLifecycleRegistry(getLifecycle())
                 .setIndicatorStyle(IndicatorStyle.CIRCLE)
                 .setIndicatorSlideMode(IndicatorSlideMode.WORM)
@@ -182,6 +183,7 @@ public void onPageSelected(int position) {
         mViewPagerVertical
                 .setAutoPlay(true)
                 .setScrollDuration(500)
+
                 .setLifecycleRegistry(getLifecycle())
                 .setIndicatorStyle(IndicatorStyle.ROUND_RECT)
                 .setIndicatorSlideMode(IndicatorSlideMode.SCALE)

File: app/src/main/java/com/example/zhpan/circleviewpager/viewholder/NetViewHolder.java
Patch:
@@ -31,5 +31,6 @@ public NetViewHolder(@NonNull View itemView) {
     public void bindData(BannerData data, int position, int pageSize) {
         CornerImageView imageView = findView(R.id.banner_image);
         Glide.with(imageView).load(data.getImagePath()).placeholder(R.drawable.placeholder).into(imageView);
+        BannerUtils.log("NetViewHolder", "position:" + position);
     }
 }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -8,7 +8,6 @@
 import androidx.annotation.Nullable;
 import androidx.lifecycle.Lifecycle;
 import androidx.lifecycle.LifecycleObserver;
-import androidx.lifecycle.LifecycleRegistry;
 import androidx.lifecycle.OnLifecycleEvent;
 import androidx.recyclerview.widget.RecyclerView;
 import androidx.viewpager2.widget.CompositePageTransformer;

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/HomeFragment.java
Patch:
@@ -125,7 +125,7 @@ public void onSuccess(DataWrapper response) {
                         bannerData.setDrawable(R.drawable.bg_card0);
                         bannerData.setType(TYPE_NEW);
                         bannerData.setTitle("这是一个自定义类型");
-                        dataList.add(1, bannerData);
+//                        dataList.add(1, bannerData);
                         mViewPagerHorizontal.refreshData(dataList);
                         List<ArticleWrapper.Article> articleList = response.getArticleList();
                         ArticleWrapper.Article article = new ArticleWrapper.Article();
@@ -160,6 +160,7 @@ private void initBanner() {
         HomeAdapter homeAdapter = new HomeAdapter();
         mViewPagerHorizontal
                 .setScrollDuration(600)
+                .setOffScreenPageLimit(2)
                 .setLifecycleRegistry(getLifecycle())
                 .setIndicatorStyle(IndicatorStyle.CIRCLE)
                 .setIndicatorSlideMode(IndicatorSlideMode.WORM)
@@ -182,6 +183,7 @@ public void onPageSelected(int position) {
         mViewPagerVertical
                 .setAutoPlay(true)
                 .setScrollDuration(500)
+
                 .setLifecycleRegistry(getLifecycle())
                 .setIndicatorStyle(IndicatorStyle.ROUND_RECT)
                 .setIndicatorSlideMode(IndicatorSlideMode.SCALE)

File: app/src/main/java/com/example/zhpan/circleviewpager/viewholder/NetViewHolder.java
Patch:
@@ -31,5 +31,6 @@ public NetViewHolder(@NonNull View itemView) {
     public void bindData(BannerData data, int position, int pageSize) {
         CornerImageView imageView = findView(R.id.banner_image);
         Glide.with(imageView).load(data.getImagePath()).placeholder(R.drawable.placeholder).into(imageView);
+        BannerUtils.log("NetViewHolder", "position:" + position);
     }
 }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -8,7 +8,6 @@
 import androidx.annotation.Nullable;
 import androidx.lifecycle.Lifecycle;
 import androidx.lifecycle.LifecycleObserver;
-import androidx.lifecycle.LifecycleRegistry;
 import androidx.lifecycle.OnLifecycleEvent;
 import androidx.recyclerview.widget.RecyclerView;
 import androidx.viewpager2.widget.CompositePageTransformer;

File: bannerview/src/main/java/com/zhpan/bannerview/manager/AttributeController.java
Patch:
@@ -69,6 +69,7 @@ private void initBannerAttrs(TypedArray typedArray) {
         mBannerOptions.setPageMargin(pageMargin);
         mBannerOptions.setRoundRectRadius(roundCorner);
         mBannerOptions.setRightRevealWidth(revealWidth);
+        mBannerOptions.setLeftRevealWidth(revealWidth);
         mBannerOptions.setPageStyle(pageStyle);
         mBannerOptions.setScrollDuration(scrollDuration);
     }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -197,7 +197,7 @@ public boolean onInterceptTouchEvent(MotionEvent ev) {
             case MotionEvent.ACTION_DOWN:
                 startX = (int) ev.getX();
                 startY = (int) ev.getY();
-                getParent().requestDisallowInterceptTouchEvent(true);
+//                getParent().requestDisallowInterceptTouchEvent(true);
                 break;
             case MotionEvent.ACTION_MOVE:
                 int endX = (int) ev.getX();

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -358,7 +358,6 @@ else if (orientation == ViewPager2.ORIENTATION_VERTICAL) {
         mViewPager.unregisterOnPageChangeCallback(mOnPageChangeCallback);
         mViewPager.registerOnPageChangeCallback(mOnPageChangeCallback);
         mViewPager.setOrientation(bannerOptions.getOrientation());
-        mViewPager.setUserInputEnabled(bannerOptions.isUserInputEnabled());
         mViewPager.setOffscreenPageLimit(bannerOptions.getOffScreenPageLimit());
         initPageStyle();
         startLoop();
@@ -372,6 +371,8 @@ private void initPageStyle() {
             case PageStyle.MULTI_PAGE_SCALE:
                 setMultiPageStyle(false, mBannerManager.getBannerOptions().getPageScale());
                 break;
+            default:
+                break;
         }
     }
 
@@ -883,6 +884,7 @@ public BannerViewPager<T, VH> setIndicatorMargin(int left, int top, int right, i
      */
     public BannerViewPager<T, VH> setUserInputEnabled(boolean userInputEnabled) {
         mBannerManager.getBannerOptions().setUserInputEnabled(userInputEnabled);
+        mViewPager.setUserInputEnabled(userInputEnabled);
         return this;
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/OthersFragment.java
Patch:
@@ -185,6 +185,8 @@ private void updateData() {
 
     @Override
     public void onClick(View view) {
-        startActivity(new Intent(getActivity(), PhotoViewActivity.class));
+        int position = new Random().nextInt(5);
+        mViewPager.setCurrentItem(position, true);
+        ToastUtils.show("Jump to position:" + position);
     }
 }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -186,7 +186,7 @@ public boolean dispatchTouchEvent(MotionEvent ev) {
 
     @Override
     public boolean onInterceptTouchEvent(MotionEvent ev) {
-        if (!mViewPager.isUserInputEnabled() || mBannerPagerAdapter.getData().size() <= 1) {
+        if (!mViewPager.isUserInputEnabled() || mBannerPagerAdapter != null && mBannerPagerAdapter.getData().size() <= 1) {
             return super.onInterceptTouchEvent(ev);
         }
         switch (ev.getAction()) {

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/IndicatorFragment.java
Patch:
@@ -6,7 +6,7 @@
 import android.widget.RadioGroup;
 
 import com.example.zhpan.circleviewpager.R;
-import com.example.zhpan.circleviewpager.adapter.ImageResourceAdapter;
+import com.example.zhpan.circleviewpager.adapter.IndicatorAdapter;
 import com.example.zhpan.circleviewpager.viewholder.ImageResourceViewHolder;
 import com.zhpan.bannerview.BannerViewPager;
 import com.zhpan.bannerview.constants.IndicatorGravity;
@@ -69,7 +69,7 @@ protected void initView(Bundle savedInstanceState, View view) {
                 .setScrollDuration(800)
                 .setIndicatorGravity(IndicatorGravity.CENTER)
                 .setOnPageClickListener(position -> ToastUtils.show("position:" + position))
-                .setAdapter(new ImageResourceAdapter(0))
+                .setAdapter(new IndicatorAdapter(getResources().getDimensionPixelOffset(R.dimen.dp_8)))
                 .setRoundCorner(BannerUtils.dp2px(6)).create();
         initRadioGroup();
     }

File: bannerview/src/main/java/com/zhpan/bannerview/manager/AttributeController.java
Patch:
@@ -66,7 +66,7 @@ private void initBannerAttrs(TypedArray typedArray) {
         mBannerOptions.setCanLoop(isCanLoop);
         mBannerOptions.setPageMargin(pageMargin);
         mBannerOptions.setRoundRectRadius(roundCorner);
-        mBannerOptions.setRevealWidth(revealWidth);
+        mBannerOptions.setRightRevealWidth(revealWidth);
         mBannerOptions.setPageStyle(pageStyle);
         mBannerOptions.setScrollDuration(scrollDuration);
     }

File: bannerview/src/main/java/com/zhpan/bannerview/transform/ScaleInTransformer.java
Patch:
@@ -8,7 +8,6 @@ public class ScaleInTransformer implements ViewPager2.PageTransformer {
 
     private static final float DEFAULT_CENTER = 0.5f;
     public static final float DEFAULT_MIN_SCALE = 0.85f;
-    public static final float MAX_SCALE = 0.999f;
     private float mMinScale;
 
     public ScaleInTransformer(float minScale) {

File: app/src/main/java/com/example/zhpan/circleviewpager/net/BannerData.java
Patch:
@@ -19,6 +19,8 @@ public class BannerData {
      * url : https://flutter.cn/
      */
 
+    public static final int TYPE_VIDEO = 10000;
+
     private String desc;
     private int id;
     private String imagePath;

File: app/src/main/java/com/example/zhpan/circleviewpager/viewholder/NetViewHolder.java
Patch:
@@ -8,7 +8,6 @@
 import com.example.zhpan.circleviewpager.R;
 import com.example.zhpan.circleviewpager.net.BannerData;
 import com.example.zhpan.circleviewpager.view.CornerImageView;
-import com.zhpan.bannerview.BaseViewHolder;
 import com.zhpan.bannerview.utils.BannerUtils;
 
 /**
@@ -17,7 +16,7 @@
  *   Description:
  * </pre>
  */
-public class NetViewHolder extends BaseViewHolder<BannerData> {
+public class NetViewHolder extends BaseNetViewHolder {
 
     public NetViewHolder(@NonNull View itemView) {
         super(itemView);

File: bannerview/src/main/java/com/zhpan/bannerview/base/BaseViewHolder.java
Patch:
@@ -1,4 +1,4 @@
-package com.zhpan.bannerview.holder;
+package com.zhpan.bannerview.base;
 
 import android.view.View;
 
@@ -17,5 +17,5 @@ public BaseViewHolder(@NonNull View itemView) {
         super(itemView);
     }
 
-    public abstract void bind(T data, int position, int pageSize);
+    public abstract void onBind(T data, int position, int pageSize);
 }

File: bannerview/src/main/java/com/zhpan/bannerview/transform/BaseTransformer.java
Patch:
@@ -16,10 +16,11 @@
 
 package com.zhpan.bannerview.transform;
 
-import androidx.viewpager.widget.ViewPager.PageTransformer;
+import androidx.viewpager2.widget.ViewPager2;
+
 import android.view.View;
 
-public abstract class BaseTransformer implements PageTransformer {
+public abstract class BaseTransformer implements ViewPager2.PageTransformer {
 
     /**
      * Called each {@link #transformPage(View, float)}.

File: bannerview/src/main/java/com/zhpan/bannerview/transform/PageTransformerFactory.java
Patch:
@@ -1,6 +1,6 @@
 package com.zhpan.bannerview.transform;
 
-import androidx.viewpager.widget.ViewPager;
+import androidx.viewpager2.widget.ViewPager2;
 
 import static com.zhpan.bannerview.constants.TransformerStyle.ACCORDION;
 import static com.zhpan.bannerview.constants.TransformerStyle.DEPTH;
@@ -11,8 +11,8 @@
 
 public class PageTransformerFactory {
 
-    public ViewPager.PageTransformer createPageTransformer(int transformerStyle) {
-        ViewPager.PageTransformer transformer = null;
+    public ViewPager2.PageTransformer createPageTransformer(int transformerStyle) {
+        ViewPager2.PageTransformer transformer = null;
         switch (transformerStyle) {
             case DEPTH:
                 transformer = new DepthPageTransformer();

File: bannerview/src/main/java/com/zhpan/bannerview/transform/ScaleInTransformer.java
Patch:
@@ -2,9 +2,9 @@
 
 import android.view.View;
 
-import androidx.viewpager.widget.ViewPager;
+import androidx.viewpager2.widget.ViewPager2;
 
-public class ScaleInTransformer implements ViewPager.PageTransformer {
+public class ScaleInTransformer implements ViewPager2.PageTransformer {
 
     private static final float DEFAULT_CENTER = 0.5f;
     public static final float DEFAULT_MIN_SCALE = 0.85f;

File: app/src/main/java/com/example/zhpan/circleviewpager/view/DrawableIndicator.java
Patch:
@@ -158,8 +158,8 @@ public DrawableIndicator setIndicatorGap(int padding) {
         return this;
     }
 
-    public static Bitmap getBitmapFromVectorDrawable(Context context, int drawableId) {
-        Drawable drawable = AppCompatDrawableManager.get().getDrawable(context, drawableId);
+    private static Bitmap getBitmapFromVectorDrawable(Context context, int drawableId) {
+        Drawable drawable = context.getResources().getDrawable(drawableId);
         if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
             drawable = (DrawableCompat.wrap(drawable)).mutate();
         }

File: app/src/main/java/com/example/zhpan/circleviewpager/view/FigureIndicatorView.java
Patch:
@@ -54,14 +54,14 @@ protected void onDraw(Canvas canvas) {
         super.onDraw(canvas);
         if (getPageSize() > 1) {
             mPaint.setColor(backgroundColor);
-            canvas.drawCircle(getWidth() / 2, getHeight() / 2, radius, mPaint);
+            canvas.drawCircle(getWidth() / 2f, getHeight() / 2f, radius, mPaint);
             mPaint.setColor(textColor);
             mPaint.setTextSize(textSize);
             String text = getCurrentPosition() + 1 + "/" + getPageSize();
             int textWidth = (int) mPaint.measureText(text);
             Paint.FontMetricsInt fontMetricsInt = mPaint.getFontMetricsInt();
             int baseline = (getMeasuredHeight() - fontMetricsInt.bottom + fontMetricsInt.top) / 2 - fontMetricsInt.top;
-            canvas.drawText(text, (getWidth() - textWidth) / 2, baseline, mPaint);
+            canvas.drawText(text, (getWidth() - textWidth) / 2f, baseline, mPaint);
         }
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/HomeFragment.java
Patch:
@@ -60,7 +60,7 @@ protected void initTitle() {
     @Override
     public void onPause() {
         super.onPause();
-        LogUtils.e("HomeFragment","onPause");
+        LogUtils.e("HomeFragment", "onPause");
         if (mViewPager != null) {
             mViewPager.stopLoop();
         }
@@ -69,7 +69,7 @@ public void onPause() {
     @Override
     public void onResume() {
         super.onResume();
-        LogUtils.e("HomeFragment","onResume");
+        LogUtils.e("HomeFragment", "onResume");
         if (mViewPager != null) {
             mViewPager.startLoop();
         }
@@ -158,7 +158,7 @@ public void onPageSelected(int position) {
 
     private void onPageClicked(int position) {
         BannerData bannerData = mViewPager.getList().get(position);
-        Toast.makeText(getMContext(), "position:" + position + " " + bannerData.getTitle(), Toast.LENGTH_SHORT).show();
+        Toast.makeText(getMContext(), "position:" + position + " " + bannerData.getTitle() + "currentItem:" + mViewPager.getCurrentItem(), Toast.LENGTH_SHORT).show();
     }
 
     private View getHeaderView() {

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -141,6 +141,8 @@ public boolean dispatchTouchEvent(MotionEvent ev) {
                     } else {
                         getParent().requestDisallowInterceptTouchEvent(true);
                     }
+                } else if (2 * disX < disY) {
+                    getParent().requestDisallowInterceptTouchEvent(false);
                 }
                 break;
             case MotionEvent.ACTION_UP:

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -141,6 +141,8 @@ public boolean dispatchTouchEvent(MotionEvent ev) {
                     } else {
                         getParent().requestDisallowInterceptTouchEvent(true);
                     }
+                } else if (2 * disX < disY) {
+                    getParent().requestDisallowInterceptTouchEvent(false);
                 }
                 break;
             case MotionEvent.ACTION_UP:

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/HomeFragment.java
Patch:
@@ -136,7 +136,8 @@ private Observable<List<BannerData>> getBannerObserver() {
 
     private void initBanner() {
         mViewPager
-                .setAutoPlay(true)
+                .setAutoPlay(false)
+                .setCanLoop(false)
                 .setIndicatorSlideMode(IndicatorSlideMode.WORM)
                 .setInterval(5000)
                 .setScrollDuration(1200)

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -230,7 +230,7 @@ private void setIndicatorValues(List<T> list) {
         }
         mIndicatorView.setIndicatorOptions(bannerOptions.getIndicatorOptions());
         bannerOptions.getIndicatorOptions().setPageSize(list.size());
-//        mIndicatorView.setPageSize(list.size());
+        mIndicatorView.notifyDataChanged();
     }
 
     private void initIndicator(IIndicator indicatorView) {

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/HomeFragment.java
Patch:
@@ -137,9 +137,10 @@ private Observable<List<BannerData>> getBannerObserver() {
     private void initBanner() {
         mViewPager
                 .setAutoPlay(true)
-                .setIndicatorSlideMode(IndicatorSlideMode.SMOOTH)
+                .setIndicatorSlideMode(IndicatorSlideMode.WORM)
                 .setInterval(5000)
                 .setScrollDuration(1200)
+                .setIndicatorRadius(getResources().getDimensionPixelSize(R.dimen.dp_3))
                 .setIndicatorView(mIndicatorView)// 这里为了设置标题故用了自定义Indicator,如果无需标题则没必要添加此行代码
                 .setIndicatorColor(getColor(R.color.red_normal_color), getColor(R.color.red_checked_color))
                 .setHolderCreator(NetViewHolder::new)

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/PageFragment.java
Patch:
@@ -55,8 +55,10 @@ protected void initView(Bundle savedInstanceState, View view) {
         mRadioGroupPageStyle = view.findViewById(R.id.rg_page_style);
         radioButton = view.findViewById(R.id.rb_multi_page);
         mViewPager
+                .setIndicatorSlideMode(IndicatorSlideMode.NORMAL)
                 .setHolderCreator(() -> new ImageResourceViewHolder(getResources().getDimensionPixelOffset(R.dimen.dp_5)))
                 .setIndicatorColor(getColor(R.color.red_normal_color), getColor(R.color.red_checked_color))
+                .setIndicatorRadius(getResources().getDimensionPixelOffset(R.dimen.dp_4),getResources().getDimensionPixelOffset(R.dimen.dp_5))
                 .setOnPageClickListener(position -> ToastUtils.show("position:" + position))
                 .setInterval(5000);
         initRadioGroup();
@@ -90,7 +92,6 @@ private void initRadioGroup() {
 
     private void setupBanner(@APageStyle int pageStyle) {
         mViewPager
-                .setIndicatorSlideMode(IndicatorSlideMode.WORM)
                 .setPageMargin(getResources().getDimensionPixelOffset(R.dimen.dp_10))
                 .setRevealWidth(getResources().getDimensionPixelOffset(R.dimen.dp_10))
                 .setPageStyle(pageStyle)
@@ -100,7 +101,6 @@ private void setupBanner(@APageStyle int pageStyle) {
     //  仿QQ音乐的Banner
     private void setNetEaseMusicStyle() {
         mViewPager
-                .setIndicatorSlideMode(IndicatorSlideMode.NORMAL)
                 .setPageMargin(getResources().getDimensionPixelOffset(R.dimen.dp_15))
                 .setRevealWidth(BannerUtils.dp2px(0))
                 .setPageStyle(PageStyle.MULTI_PAGE)

File: bannerview/src/main/java/com/zhpan/bannerview/annotation/AIndicatorSlideMode.java
Patch:
@@ -19,6 +19,6 @@
  */
 @IntDef({NORMAL, SMOOTH,WORM})
 @Retention(RetentionPolicy.SOURCE)
-@Target(ElementType.PARAMETER)
+@Target({ElementType.PARAMETER,ElementType.FIELD})
 public @interface AIndicatorSlideMode {
 }

File: bannerview/src/main/java/com/zhpan/bannerview/adapter/BannerPagerAdapter.java
Patch:
@@ -28,9 +28,7 @@ public class BannerPagerAdapter<T, VH extends ViewHolder> extends PagerAdapter {
 
     private PageClickListener mPageClickListener;
 
-//    private List<View> mViewList = new ArrayList<>();
-
-    public static final int MAX_VALUE = 10000;
+    public static final int MAX_VALUE = 200;
 
     public BannerPagerAdapter(List<T> list, HolderCreator<VH> holderCreator) {
         mList = new ArrayList<>();

File: bannerview/src/main/java/com/zhpan/bannerview/adapter/BannerPagerAdapter.java
Patch:
@@ -30,7 +30,7 @@ public class BannerPagerAdapter<T, VH extends ViewHolder> extends PagerAdapter {
 
 //    private List<View> mViewList = new ArrayList<>();
 
-    public static final int MAX_VALUE = Integer.MAX_VALUE;
+    public static final int MAX_VALUE = 10000;
 
     public BannerPagerAdapter(List<T> list, HolderCreator<VH> holderCreator) {
         mList = new ArrayList<>();

File: bannerview/src/main/java/com/zhpan/bannerview/adapter/BannerPagerAdapter.java
Patch:
@@ -30,7 +30,7 @@ public class BannerPagerAdapter<T, VH extends ViewHolder> extends PagerAdapter {
 
 //    private List<View> mViewList = new ArrayList<>();
 
-    public static final int MAX_VALUE = Integer.MAX_VALUE;
+    public static final int MAX_VALUE = 10000;
 
     public BannerPagerAdapter(List<T> list, HolderCreator<VH> holderCreator) {
         mList = new ArrayList<>();

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/PageFragment.java
Patch:
@@ -9,6 +9,7 @@
 import com.example.zhpan.circleviewpager.viewholder.ImageResourceViewHolder;
 import com.zhpan.bannerview.BannerViewPager;
 import com.zhpan.bannerview.annotation.APageStyle;
+import com.zhpan.bannerview.constants.IndicatorSlideMode;
 import com.zhpan.bannerview.constants.PageStyle;
 import com.zhpan.bannerview.utils.BannerUtils;
 import com.zhpan.idea.utils.ToastUtils;
@@ -38,6 +39,7 @@ protected void initView(Bundle savedInstanceState, View view) {
         mRadioGroupPageStyle = view.findViewById(R.id.rg_page_style);
         radioButton = view.findViewById(R.id.rb_multi_page);
         mViewPager
+                .setIndicatorSlideMode(IndicatorSlideMode.SMOOTH)
                 .setHolderCreator(() -> new ImageResourceViewHolder(BannerUtils.dp2px(5)))
                 .setIndicatorColor(getColor(R.color.red_normal_color), getColor(R.color.red_checked_color))
                 .setOnPageClickListener(position -> ToastUtils.show("position:" + position))

File: app/src/main/java/com/example/zhpan/circleviewpager/recyclerview/ui/CustomAdapter.java
Patch:
@@ -91,7 +91,7 @@ public RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup,
                 headcount = 0;
             }
 //                customViewHolder.setIsRecyclable(false);
-//            Log.e("CustomAdapter", "onCreateViewHolder#HEADVIEW_TYPE");
+//            Log.log("CustomAdapter", "onCreateViewHolder#HEADVIEW_TYPE");
             return customViewHolder;
 //            }else{
 //                return new CustomViewHolder(mCache.get(contentView.getTag()));
@@ -159,7 +159,7 @@ public void onClick(View v) {
                     }
                 }
             });
-//            Log.e("CustomAdapter", "onBindViewHolder" + position + "------->" + customViewHolder);
+//            Log.log("CustomAdapter", "onBindViewHolder" + position + "------->" + customViewHolder);
         } else {
             mAdapter.onBindViewHolder(viewHolder, position - getHeadSize());
         }

File: app/src/main/java/com/example/zhpan/circleviewpager/viewholder/NetViewHolder.java
Patch:
@@ -26,7 +26,7 @@ public int getLayoutId() {
     @Override
     public void onBind(View itemView, BannerData data, int position, int size) {
         CornerImageView imageView = itemView.findViewById(R.id.banner_image);
-        imageView.setRoundCorner(BannerUtils.dp2px(5));
+        imageView.setRoundCorner(BannerUtils.dp2px(0));
         ImageLoaderOptions options = new ImageLoaderOptions.Builder()
                 .into(imageView).load(data.getImagePath())
                 .placeHolder(R.drawable.placeholder).build();

File: bannerview/src/main/java/com/zhpan/bannerview/annotation/ATransformerStyle.java
Patch:
@@ -11,6 +11,7 @@
 import static com.zhpan.bannerview.constants.TransformerStyle.DEPTH;
 import static com.zhpan.bannerview.constants.TransformerStyle.NONE;
 import static com.zhpan.bannerview.constants.TransformerStyle.ROTATE;
+import static com.zhpan.bannerview.constants.TransformerStyle.SCALE_IN;
 import static com.zhpan.bannerview.constants.TransformerStyle.STACK;
 
 /**
@@ -19,7 +20,7 @@
  *   Description:
  * </pre>
  */
-@IntDef({NONE, DEPTH, STACK, ACCORDION, ROTATE})
+@IntDef({NONE, DEPTH, STACK, ACCORDION, ROTATE,SCALE_IN})
 @Retention(RetentionPolicy.SOURCE)
 @Target(ElementType.PARAMETER)
 public @interface ATransformerStyle {

File: bannerview/src/main/java/com/zhpan/bannerview/constants/TransformerStyle.java
Patch:
@@ -6,4 +6,5 @@ public interface TransformerStyle {
     int STACK = 1 << 2;
     int ACCORDION = 1 << 3;
     int ROTATE = 1 << 4;
+    int SCALE_IN = 1 << 5;
 }

File: bannerview/src/main/java/com/zhpan/bannerview/holder/ViewHolder.java
Patch:
@@ -11,10 +11,11 @@
 
 public interface ViewHolder<T> {
 
+    /**
+     * @return Layout Resource of BannerViewPager item
+     */
     @LayoutRes int getLayoutId();
 
-//    void createView(View itemView,int position);
-
     /**
      * @param itemView  ViewPager item View
      * @param data     实体类对象

File: bannerview/src/main/java/com/zhpan/bannerview/manager/AttributeController.java
Patch:
@@ -69,7 +69,7 @@ private void initBannerAttrs(TypedArray typedArray) {
         mBannerOptions.setAutoPlay(isAutoPlay);
         mBannerOptions.setCanLoop(isCanLoop);
         mBannerOptions.setPageMargin(pageMargin);
-        mBannerOptions.setRoundCorner(roundCorner);
+        mBannerOptions.setRoundRectRadius(roundCorner);
         mBannerOptions.setRevealWidth(revealWidth);
         mBannerOptions.setPageStyle(pageStyle);
         mBannerOptions.setScrollDuration(scrollDuration);

File: bannerview/src/main/java/com/zhpan/bannerview/provider/ViewStyleSetter.java
Patch:
@@ -27,7 +27,7 @@ public ViewStyleSetter(View view) {
      * @param radius 圆角半径
      */
     @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
-    public void setRoundCorner(float radius) {
+    public void setRoundRect(float radius) {
         this.mView.setClipToOutline(true);// 用outline裁剪内容区域
         this.mView.setOutlineProvider(new RoundViewOutlineProvider(radius));
     }
@@ -36,7 +36,7 @@ public void setRoundCorner(float radius) {
      * 设置View为圆形
      */
     @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
-    public void setOval() {
+    public void setOvalView() {
         this.mView.setClipToOutline(true);// 用outline裁剪内容区域
         this.mView.setOutlineProvider(new OvalViewOutlineProvider());
     }

File: bannerview/src/main/java/com/zhpan/bannerview/utils/BannerUtils.java
Patch:
@@ -23,13 +23,13 @@ public static int dp2px(float dpValue) {
         return (int) (0.5F + dpValue * Resources.getSystem().getDisplayMetrics().density);
     }
 
-    public static void e(String tag, String msg) {
+    public static void log(String tag, String msg) {
         if (DEBUG) {
             Log.e(tag, msg);
         }
     }
 
-    public static void e(String msg) {
+    public static void log(String msg) {
         if (DEBUG) {
             Log.e("BannerView", msg);
         }

File: bannerview/src/main/java/com/zhpan/bannerview/annotation/AIndicatorStyle.java
Patch:
@@ -9,14 +9,15 @@
 
 import static com.zhpan.bannerview.constants.IndicatorStyle.CIRCLE;
 import static com.zhpan.bannerview.constants.IndicatorStyle.DASH;
+import static com.zhpan.bannerview.constants.IndicatorStyle.ROUND_RECT;
 
 /**
  * <pre>
  *   Created by zhangpan on 2019-10-18.
  *   Description:
  * </pre>
  */
-@IntDef({CIRCLE, DASH})
+@IntDef({CIRCLE, DASH,ROUND_RECT})
 @Retention(RetentionPolicy.SOURCE)
 @Target(ElementType.PARAMETER)
 public @interface AIndicatorStyle {

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/OthersFragment.java
Patch:
@@ -52,6 +52,7 @@ protected void initView(Bundle savedInstanceState, View view) {
         view.findViewById(R.id.btn_refresh).setOnClickListener(v -> updateData());
         mViewPager.setIndicatorGap(BannerUtils.dp2px(6))
                 .setRoundCorner(BannerUtils.dp2px(6))
+                .setOnPageClickListener(position -> ToastUtils.show("Position:" + position))
                 .setIndicatorColor(getColor(R.color.red_normal_color), getColor(R.color.red_checked_color))
                 .setHolderCreator(() -> new ImageResourceViewHolder(0));
         initRadioGroup();

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/drawer/IDrawer.java
Patch:
@@ -12,6 +12,8 @@
  */
 public interface IDrawer {
 
+    void onLayout(boolean changed, int left, int top, int right, int bottom);
+
     BaseDrawer.MeasureResult onMeasure(int widthMeasureSpec, int heightMeasureSpec);
 
     void onDraw(Canvas canvas);

File: bannerview/src/main/java/com/zhpan/bannerview/constants/IndicatorStyle.java
Patch:
@@ -9,4 +9,5 @@
 public interface IndicatorStyle {
     int CIRCLE = 0;
     int DASH = 1 << 1;
+    int ROUND_RECT = 1 << 2;
 }

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/IndicatorView.java
Patch:
@@ -13,9 +13,10 @@
 /**
  * <pre>
  *   Created by zhpan on 2019/11/23.
- *   Description:The Indicator in BannerViewPager，this include two indicator style,as below:
+ *   Description:The Indicator in BannerViewPager，this include three indicator styles,as below:
  *  {@link com.zhpan.bannerview.constants.IndicatorStyle#CIRCLE }
  *  {@link com.zhpan.bannerview.constants.IndicatorStyle#DASH}
+ *  {@link com.zhpan.bannerview.constants.IndicatorStyle#ROUND_RECT}
  * </pre>
  */
 public class IndicatorView extends BaseIndicatorView implements IIndicator {

File: bannerview/src/main/java/com/zhpan/bannerview/manager/AttributeController.java
Patch:
@@ -54,7 +54,6 @@ private void initIndicatorAttrs(TypedArray typedArray) {
         mBannerOptions.setIndicatorGap(normalIndicatorWidth);
         mBannerOptions.setIndicatorHeight(normalIndicatorWidth / 2);
         mBannerOptions.setCheckedIndicatorWidth(normalIndicatorWidth);
-
     }
 
     private void initBannerAttrs(TypedArray typedArray) {

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/drawer/BaseDrawer.java
Patch:
@@ -27,11 +27,11 @@ public abstract class BaseDrawer implements IDrawer {
 
     public class MeasureResult {
 
-        public int measureWidth;
+        int measureWidth;
 
-        public int measureHeight;
+        int measureHeight;
 
-        public void setMeasureResult(int measureWidth, int measureHeight) {
+        void setMeasureResult(int measureWidth, int measureHeight) {
             this.measureWidth = measureWidth;
             this.measureHeight = measureHeight;
         }

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/drawer/CircleDrawer.java
Patch:
@@ -16,7 +16,7 @@ public class CircleDrawer extends BaseDrawer {
 
     private float minWidth;
 
-    public CircleDrawer(IndicatorOptions indicatorOptions) {
+    CircleDrawer(IndicatorOptions indicatorOptions) {
         super(indicatorOptions);
     }
 

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/drawer/DashDrawer.java
Patch:
@@ -17,7 +17,7 @@ public class DashDrawer extends BaseDrawer {
 
     private float minWidth;
 
-    public DashDrawer(IndicatorOptions indicatorOptions) {
+    DashDrawer(IndicatorOptions indicatorOptions) {
         super(indicatorOptions);
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/view/FigureIndicatorView.java
Patch:
@@ -54,7 +54,7 @@ protected void onDraw(Canvas canvas) {
         canvas.drawCircle(getWidth() / 2, getHeight() / 2, radius, mPaint);
         mPaint.setColor(textColor);
         mPaint.setTextSize(textSize);
-        String text = currentPosition + 1 + "/" + pageSize;
+        String text = getCurrentPosition() + 1 + "/" + getPageSize();
         int textWidth = (int) mPaint.measureText(text);
         Paint.FontMetricsInt fontMetricsInt = mPaint.getFontMetricsInt();
         int baseline = (getMeasuredHeight() - fontMetricsInt.bottom + fontMetricsInt.top) / 2 - fontMetricsInt.top;

File: bannerview/src/main/java/com/zhpan/bannerview/adapter/BannerPagerAdapter.java
Patch:
@@ -8,7 +8,7 @@
 
 import com.zhpan.bannerview.holder.HolderCreator;
 import com.zhpan.bannerview.holder.ViewHolder;
-import com.zhpan.bannerview.utils.PositionUtils;
+import com.zhpan.bannerview.utils.BannerUtils;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -53,7 +53,7 @@ public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {
     @Override
     public @NonNull
     Object instantiateItem(@NonNull final ViewGroup container, final int position) {
-        View itemView = findViewByPosition(container, PositionUtils.getRealPosition(isCanLoop, position, mList.size()));
+        View itemView = findViewByPosition(container, BannerUtils.getRealPosition(isCanLoop, position, mList.size()));
         container.addView(itemView);
         return itemView;
     }
@@ -74,7 +74,7 @@ private View findViewByPosition(ViewGroup container, int position) {
     private View getView(final int position, ViewGroup container) {
         ViewHolder<T> holder = holderCreator.createViewHolder();
         if (holder == null) {
-            throw new NullPointerException("can not return a null holder");
+            throw new NullPointerException("Can not return a null holder");
         }
         return createView(holder, position, container);
     }

File: bannerview/src/main/java/com/zhpan/bannerview/constants/IndicatorGravity.java
Patch:
@@ -8,6 +8,6 @@
  */
 public interface IndicatorGravity {
     int CENTER = 0;
-    int START = 1;
-    int END = 2;
+    int START = 1 << 1;
+    int END = 1 << 2;
 }

File: bannerview/src/main/java/com/zhpan/bannerview/constants/IndicatorSlideMode.java
Patch:
@@ -8,5 +8,5 @@
  */
 public interface IndicatorSlideMode {
     int NORMAL = 0;
-    int SMOOTH = 1;
+    int SMOOTH = 1 << 1;
 }

File: bannerview/src/main/java/com/zhpan/bannerview/constants/IndicatorStyle.java
Patch:
@@ -8,5 +8,5 @@
  */
 public interface IndicatorStyle {
     int CIRCLE = 0;
-    int DASH = 1;
+    int DASH = 1 << 1;
 }

File: bannerview/src/main/java/com/zhpan/bannerview/constants/PageStyle.java
Patch:
@@ -10,9 +10,9 @@ public interface PageStyle {
 
     int NORMAL = 0;
 
-    int MULTI_PAGE = 1;
+    int MULTI_PAGE = 1 << 1;
 
-    int MULTI_PAGE_OVERLAP = 2;
+    int MULTI_PAGE_OVERLAP = 1 << 2;
 
-    int MULTI_PAGE_SCALE = 3;
+    int MULTI_PAGE_SCALE = 1 << 3;
 }

File: bannerview/src/main/java/com/zhpan/bannerview/holder/ViewHolder.java
Patch:
@@ -11,7 +11,7 @@
 
 public interface ViewHolder<T> {
     View createView(ViewGroup viewGroup,Context context, int position);
-   // void onBind(Context context, int position, T data);
+
     /**
      * @param context context
      * @param data 实体类对象

File: bannerview/src/main/java/com/zhpan/bannerview/transform/pagestyle/BasePageTransformer.java
Patch:
@@ -6,9 +6,6 @@
 
 import androidx.viewpager.widget.ViewPager;
 
-/**
- * Created by zhy on 16/5/7.
- */
 public abstract class BasePageTransformer implements ViewPager.PageTransformer {
     protected ViewPager.PageTransformer mPageTransformer = NonPageTransformer.INSTANCE;
     public static final float DEFAULT_CENTER = 0.5f;

File: bannerview/src/main/java/com/zhpan/bannerview/transform/pagestyle/NonPageTransformer.java
Patch:
@@ -4,9 +4,6 @@
 
 import androidx.viewpager.widget.ViewPager;
 
-/**
- * Created by zhy on 16/5/7.
- */
 public class NonPageTransformer implements ViewPager.PageTransformer {
     @Override
     public void transformPage(View page, float position) {

File: app/src/main/java/com/example/zhpan/circleviewpager/fragment/PageFragment.java
Patch:
@@ -115,9 +115,8 @@ public void onStop() {
 
     @Override
     public void onResume() {
-
+        super.onResume();
         if (mViewPager != null)
             mViewPager.startLoop();
-        super.onResume();
     }
 }

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/MainActivity.java
Patch:
@@ -11,6 +11,7 @@
 
 import com.example.zhpan.circleviewpager.R;
 import com.example.zhpan.circleviewpager.adapter.AdapterFragmentPager;
+import com.zhpan.bannerview.view.CatchViewPager;
 
 import butterknife.BindView;
 import butterknife.ButterKnife;
@@ -21,7 +22,7 @@ public class MainActivity extends AppCompatActivity {
     @BindView(R.id.rg_tab)
     RadioGroup rgTab;
     @BindView(R.id.vp_fragment)
-    ViewPager mViewPager;
+    CatchViewPager mViewPager;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -35,6 +36,7 @@ protected void onCreate(Bundle savedInstanceState) {
     private void initData() {
         AdapterFragmentPager mAdapter = new AdapterFragmentPager(getSupportFragmentManager());
         mViewPager.setAdapter(mAdapter);
+        mViewPager.disableTouchScroll(true);
         mViewPager.setOffscreenPageLimit(2);
         mViewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
             @Override
@@ -87,5 +89,4 @@ private void setListener() {
     public static void start(Context context) {
         context.startActivity(new Intent(context, MainActivity.class));
     }
-
 }

File: app/src/main/java/com/example/zhpan/circleviewpager/view/CornerImageView.java
Patch:
@@ -7,7 +7,6 @@
 import androidx.appcompat.widget.AppCompatImageView;
 
 import com.zhpan.bannerview.provider.ViewStyleSetter;
-import com.zhpan.bannerview.utils.DpUtils;
 
 public class CornerImageView extends AppCompatImageView {
     public CornerImageView(Context context) {

File: app/src/main/java/com/example/zhpan/circleviewpager/view/FigureIndicatorView.java
Patch:
@@ -10,7 +10,7 @@
 import androidx.annotation.Nullable;
 
 import com.zhpan.bannerview.indicator.BaseIndicatorView;
-import com.zhpan.bannerview.utils.DpUtils;
+import com.zhpan.bannerview.utils.BannerUtils;
 
 /**
  * <pre>
@@ -20,13 +20,13 @@
  */
 public class FigureIndicatorView extends BaseIndicatorView {
 
-    private int radius = DpUtils.dp2px(20);
+    private int radius = BannerUtils.dp2px(20);
 
     private int backgroundColor = Color.parseColor("#88FF5252");
 
     private int textColor = Color.WHITE;
 
-    private int textSize=DpUtils.dp2px(13);
+    private int textSize= BannerUtils.dp2px(13);
 
     public FigureIndicatorView(Context context) {
         this(context, null);

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/BaseIndicatorView.java
Patch:
@@ -10,7 +10,7 @@
 
 import com.zhpan.bannerview.annotation.AIndicatorSlideMode;
 import com.zhpan.bannerview.constants.IndicatorSlideMode;
-import com.zhpan.bannerview.utils.DpUtils;
+import com.zhpan.bannerview.utils.BannerUtils;
 
 /**
  * <pre>
@@ -75,7 +75,7 @@ public BaseIndicatorView(Context context, @Nullable AttributeSet attrs) {
 
     public BaseIndicatorView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
         super(context, attrs, defStyleAttr);
-        normalIndicatorWidth = DpUtils.dp2px(8);
+        normalIndicatorWidth = BannerUtils.dp2px(8);
         checkedIndicatorWidth = normalIndicatorWidth;
         indicatorGap = normalIndicatorWidth;
         normalColor = Color.parseColor("#8C18171C");

File: ideahttp/src/main/java/com/zhpan/idea/net/common/ResponseObserver.java
Patch:
@@ -25,7 +25,7 @@
  * Created by zhpan on 2017/4/18.
  */
 
-public abstract class DefaultObserver<T> implements Observer<T> {
+public abstract class ResponseObserver<T> implements Observer<T> {
     @Override
     public void onSubscribe(Disposable d) {
 

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/IndicatorStyleActivity.java
Patch:
@@ -26,8 +26,7 @@ protected void onCreate(Bundle savedInstanceState) {
         setContentView(R.layout.activity_indicator_slide_mode);
         setTitle(getString(R.string.indicator_style));
         mViewPager = findViewById(R.id.banner_view_dash);
-        mViewPager.setRoundCorner(DpUtils.dp2px(8))
-                .setIndicatorGap(DpUtils.dp2px(6))
+        mViewPager.setIndicatorGap(DpUtils.dp2px(6))
                 .setHolderCreator(() -> new ImageResourceViewHolder(0));
         initRadioGroup();
     }

File: bannerview/src/main/java/com/zhpan/bannerview/transform/pagestyle/ScaleInTransformer.java
Patch:
@@ -9,6 +9,7 @@
 public class ScaleInTransformer extends BasePageTransformer {
 
     public static final float DEFAULT_MIN_SCALE = 0.85f;
+    public static final float MAX_SCALE = 0.999f;
     private float mMinScale = DEFAULT_MIN_SCALE;
 
     public ScaleInTransformer() {

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/IndicatorStyleActivity.java
Patch:
@@ -62,6 +62,7 @@ private void setupCircleIndicator() {
                 .setIndicatorGravity(IndicatorGravity.CENTER)
                 .setIndicatorGap(DpUtils.dp2px(6))
                 .setPageMargin(0)
+                .setIndicatorMargin(0,0,0,DpUtils.dp2px(10))
                 .setOnPageClickListener(position -> ToastUtils.show("position:" + position))
                 .setIndicatorColor(Color.parseColor("#935656"), Color.parseColor("#FF4C39"))
                 .setIndicatorRadius(DpUtils.dp2px(4), DpUtils.dp2px(5)).create(mDrawableList);

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/CircleIndicatorView.java
Patch:
@@ -2,7 +2,6 @@
 
 import android.content.Context;
 import android.graphics.Canvas;
-import android.graphics.Paint;
 import android.util.AttributeSet;
 
 /**
@@ -43,7 +42,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         mNormalRadius = normalIndicatorWidth / 2;
         mCheckedRadius = checkedIndicatorWidth / 2;
         maxRadius = Math.max(mCheckedRadius, mNormalRadius);
-        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + 2 * maxRadius * pageSize),
+        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + 2 * (maxRadius + mNormalRadius * (pageSize - 1))),
                 (int) (2 * maxRadius));
     }
 

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/DashIndicatorView.java
Patch:
@@ -39,7 +39,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         super.onMeasure(widthMeasureSpec, heightMeasureSpec);
         maxWidth = Math.max(normalIndicatorWidth, checkedIndicatorWidth);
         minWidth = Math.min(normalIndicatorWidth, checkedIndicatorWidth);
-        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + maxWidth * pageSize),
+        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + maxWidth + (pageSize - 1) * minWidth),
                 (int) (sliderHeight));
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/IndicatorStyleActivity.java
Patch:
@@ -62,6 +62,7 @@ private void setupCircleIndicator() {
                 .setIndicatorGravity(IndicatorGravity.CENTER)
                 .setIndicatorGap(DpUtils.dp2px(6))
                 .setPageMargin(0)
+                .setIndicatorMargin(0,0,0,DpUtils.dp2px(10))
                 .setOnPageClickListener(position -> ToastUtils.show("position:" + position))
                 .setIndicatorColor(Color.parseColor("#935656"), Color.parseColor("#FF4C39"))
                 .setIndicatorRadius(DpUtils.dp2px(4), DpUtils.dp2px(5)).create(mDrawableList);

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/CircleIndicatorView.java
Patch:
@@ -2,7 +2,6 @@
 
 import android.content.Context;
 import android.graphics.Canvas;
-import android.graphics.Paint;
 import android.util.AttributeSet;
 
 /**
@@ -43,7 +42,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         mNormalRadius = normalIndicatorWidth / 2;
         mCheckedRadius = checkedIndicatorWidth / 2;
         maxRadius = Math.max(mCheckedRadius, mNormalRadius);
-        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + 2 * maxRadius * pageSize),
+        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + 2 * (maxRadius + mNormalRadius * (pageSize - 1))),
                 (int) (2 * maxRadius));
     }
 

File: bannerview/src/main/java/com/zhpan/bannerview/indicator/DashIndicatorView.java
Patch:
@@ -39,7 +39,7 @@ protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
         super.onMeasure(widthMeasureSpec, heightMeasureSpec);
         maxWidth = Math.max(normalIndicatorWidth, checkedIndicatorWidth);
         minWidth = Math.min(normalIndicatorWidth, checkedIndicatorWidth);
-        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + maxWidth * pageSize),
+        setMeasuredDimension((int) ((pageSize - 1) * indicatorGap + maxWidth + (pageSize - 1) * minWidth),
                 (int) (sliderHeight));
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/PageStyleActivity.java
Patch:
@@ -25,9 +25,9 @@ private void setupBanner() {
         mBannerViewPager
                 .setPageMargin(DpUtils.dp2px(20))
                 .setRevealWidth(DpUtils.dp2px(20))
+                .setPageStyle(PageStyle.MULTI_PAGE)
                 .setHolderCreator(() -> new ImageResourceViewHolder(DpUtils.dp2px(5)))
                 .setIndicatorColor(Color.parseColor("#935656"), Color.parseColor("#FF4C39"))
-                .setPageStyle(PageStyle.MULTI_PAGE)
                 .setOnPageClickListener(position -> ToastUtils.show("position:" + position))
                 .create(mDrawableList);
     }

File: bannerview/src/main/java/com/zhpan/bannerview/BannerViewPager.java
Patch:
@@ -304,7 +304,7 @@ private void setupViewPager() {
         }
     }
 
-    private void initPageStyle(){
+    private void initPageStyle() {
         switch (mPageStyle) {
             case PageStyle.MULTI_PAGE:
                 setMultiPageStyle();
@@ -717,6 +717,8 @@ public BannerViewPager<T, VH> setPageStyle(@APageStyle int pageStyle) {
     }
 
     private void setMultiPageStyle() {
+        mPageMargin=mPageMargin==0?DpUtils.dp2px(20):mPageMargin;
+        mRevealWidth=mRevealWidth==0?DpUtils.dp2px(20):mRevealWidth;
         setClipChildren(false);
         RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) mViewPager.getLayoutParams();
         params.leftMargin = mPageMargin + mRevealWidth;

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/BaseDataActivity.java
Patch:
@@ -7,7 +7,7 @@
 import java.util.ArrayList;
 import java.util.List;
 
-public class BaseDataActivity extends AppCompatActivity {
+public abstract class BaseDataActivity extends AppCompatActivity {
     protected List<Integer> mDrawableList = new ArrayList<>();
     @Override
     protected void onCreate(Bundle savedInstanceState) {

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/CustomerBannerPageActivity.java
Patch:
@@ -43,7 +43,7 @@ private void setupViewPager() {
                 .setHolderCreator(() -> {
                     CustomPageViewHolder customPageViewHolder = new CustomPageViewHolder();
                     customPageViewHolder.setOnSubViewClickListener((view, position) -> Toast.makeText(CustomerBannerPageActivity.this,
-                            "立即体验" + (position + 1), Toast.LENGTH_SHORT).show());
+                            "立即体验" + position, Toast.LENGTH_SHORT).show());
                     return customPageViewHolder;
                 }).create(getData());
     }

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/IndicatorStyleActivity.java
Patch:
@@ -66,9 +66,10 @@ private void setupCircleIndicator() {
 
     private void setupDashIndicator() {
         mViewPager.setIndicatorStyle(IndicatorStyle.DASH)
-                .setIndicatorHeight(DpUtils.dp2px(2.5f))
+                .setIndicatorHeight(DpUtils.dp2px(3f))
                 .setIndicatorGravity(IndicatorGravity.CENTER)
-                .setIndicatorWidth(DpUtils.dp2px(6), DpUtils.dp2px(12))
+                .setIndicatorGap(DpUtils.dp2px(3))
+                .setIndicatorWidth(DpUtils.dp2px(3), DpUtils.dp2px(10))
                 .setIndicatorColor(Color.parseColor("#888888"),
                         Color.parseColor("#118EEA")).create(mDrawableList);
     }

File: app/src/main/java/com/example/zhpan/circleviewpager/viewholder/ImageResourceViewHolder.java
Patch:
@@ -11,6 +11,7 @@
 import com.example.zhpan.circleviewpager.imageloader.ImageLoaderManager;
 import com.example.zhpan.circleviewpager.imageloader.ImageLoaderOptions;
 import com.example.zhpan.circleviewpager.net.BannerData;
+import com.example.zhpan.circleviewpager.view.CornerImageView;
 import com.zhpan.bannerview.holder.ViewHolder;
 
 /**
@@ -20,7 +21,7 @@
  * </pre>
  */
 public class ImageResourceViewHolder implements ViewHolder<Integer> {
-    private ImageView mImageView;
+    private CornerImageView mImageView;
 
     @Override
     public View createView(ViewGroup viewGroup, Context context, int position) {

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/NetworkBannerActivity.java
Patch:
@@ -94,6 +94,8 @@ private void initBanner() {
         recyclerView.setAdapter(articleAdapter);
         mBannerViewPager.showIndicator(true)
                 .setInterval(3000)
+                .setCanLoop(false)
+                .setAutoPlay(true)
                 .setRoundCorner(7f)
                 .setIndicatorColor(Color.parseColor("#935656"), Color.parseColor("#FF4C39"))
                 .setIndicatorGravity(BannerViewPager.END)

File: app/src/main/java/com/example/zhpan/circleviewpager/App.java
Patch:
@@ -6,6 +6,9 @@
 import com.example.zhpan.circleviewpager.imageloader.ImageLoaderManager;
 import com.zhpan.idea.utils.Utils;
 
+import leakcanary.AppWatcher;
+import leakcanary.LeakCanary;
+
 /**
  * <pre>
  *   Created by zhangpan on 2019-08-14.

File: bannerview/src/main/java/com/zhpan/bannerview/view/IndicatorView.java
Patch:
@@ -91,6 +91,7 @@ public IndicatorView setCheckedColor(int checkedColor) {
 
     public IndicatorView setPageSize(int pageSize) {
         this.mPageSize = pageSize;
+        requestLayout();
         return this;
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/activity/MainActivity.java
Patch:
@@ -32,6 +32,9 @@ public void onClick(View view) {
             case R.id.btn_view_pager3:
                 intent = new Intent(this, BannerPhotoViewActivity.class);
                 break;
+            case R.id.btn_view_pager4:
+                intent = new Intent(this, NetworkBannerActivity.class);
+                break;
             default:
                 intent = new Intent(this, ViewPagerActivity.class);
                 break;

File: bannerview/src/main/java/com/zhpan/bannerview/provider/RoundViewOutlineProvider.java
Patch:
@@ -27,9 +27,7 @@ public RoundViewOutlineProvider(float radius) {
 
     @Override
     public void getOutline(View view, Outline outline) {
-        Rect rect = new Rect();
-        view.getGlobalVisibleRect(rect);//将view的区域保存在rect中
-        Rect selfRect = new Rect(0, 0, rect.right - rect.left, rect.bottom - rect.top);//绘制区域
+        Rect selfRect = new Rect(0, 0, view.getWidth(), view.getHeight());// 绘制区域
         outline.setRoundRect(selfRect, mRadius);
     }
 }

File: viewpager/src/main/java/com/example/viewpager/view/CircleViewPager.java
Patch:
@@ -12,7 +12,6 @@
 import android.widget.FrameLayout;
 import android.widget.ImageView;
 import android.widget.LinearLayout;
-import android.widget.RelativeLayout;
 import com.example.viewpager.R;
 import com.example.viewpager.adapter.CirclePagerAdapter;
 import com.example.viewpager.utils.ImageLoaderUtil;
@@ -250,6 +249,7 @@ public interface OnPageClickListener {
 
     //  adapter中图片点击的回掉方法
     public void imageClick(int position) {
+        if(mOnPageClickListener!=null)
         mOnPageClickListener.onPageClick(position);
     }
 

File: app/src/main/java/com/example/zhpan/circleviewpager/MainActivity.java
Patch:
@@ -30,15 +30,15 @@ private void initView() {
     private void initData() {
         mList.add("http://pic.58pic.com/58pic/15/36/01/17C58PICR67_1024.jpg");
         mList.add("http://img.tupianzj.com/uploads/allimg/160822/9-160R2213608.jpg");
-       mList.add("http://img1.ph.126.net/3NuwEWzx-efuHLUhoAg1Rw==/1459447754345023507.jpg");
+        mList.add("http://img1.ph.126.net/3NuwEWzx-efuHLUhoAg1Rw==/1459447754345023507.jpg");
         mList.add("http://pic.58pic.com/58pic/15/36/02/06Q58PICH7S_1024.jpg");
-       /*  mList.add("http://images.jfdaily.com/jiefang/life/new/201502/W020150213267781833219.jpg");*/
+        mList.add("http://images.jfdaily.com/jiefang/life/new/201502/W020150213267781833219.jpg");
     }
 
     private void setViewPager() {
         mViewpager.setDarkDotRes(R.drawable.red_dot_night);
         mViewpager.setLightDotRes(R.drawable.red_dot);
-        mViewpager.setDotWidth(10);
+        mViewpager.setDotWidth(7);
         mViewpager.setInterval(5000);
         mViewpager.setUrlList(mList);
         mViewpager.setOnPageClickListener(new CircleViewPager.OnPageClickListener() {

