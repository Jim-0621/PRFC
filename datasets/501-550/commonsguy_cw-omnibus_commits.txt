File: Notifications/BigNotify/app/src/main/java/com/commonsware/android/bignotify/MainActivity.java
Patch:
@@ -62,13 +62,11 @@ private NotificationCompat.Builder buildNormal() {
       new NotificationCompat.Builder(this, CHANNEL_WHATEVER);
 
     b.setAutoCancel(true)
-     .setDefaults(Notification.DEFAULT_ALL)
      .setContentTitle(getString(R.string.download_complete))
      .setContentText(getString(R.string.fun))
      .setContentIntent(buildPendingIntent(Settings.ACTION_SECURITY_SETTINGS))
      .setSmallIcon(android.R.drawable.stat_sys_download_done)
-     .setTicker(getString(R.string.download_complete))
-     .setPriority(NotificationCompat.PRIORITY_HIGH)
+     .setPriority(Notification.PRIORITY_HIGH)
      .addAction(android.R.drawable.ic_media_play,
                 getString(R.string.play),
                 buildPendingIntent(Settings.ACTION_SETTINGS));

File: JobScheduler/PowerHungry/app/src/main/java/com/commonsware/android/job/DownloadJob.java
Patch:
@@ -32,7 +32,7 @@ class DownloadJob implements Runnable {
   @Override
   public void run() {
     try {
-      File root=getExternalFilesDir(null);
+      File root=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
 
       root.mkdirs();
 

File: ContentProvider/ConstantsPlus/app/src/main/java/com/commonsware/android/constants/Provider.java
Patch:
@@ -84,10 +84,10 @@ public Cursor query(Uri url, String[] projection, String selection,
   @Override
   public String getType(Uri url) {
     if (isCollectionUri(url)) {
-      return("vnd.commonsware.cursor.dir/constant");
+      return("vnd.android.cursor.dir/constant");
     }
 
-    return("vnd.commonsware.cursor.item/constant");
+    return("vnd.android.cursor.item/constant");
   }
 
   @Override

File: Presentation/Decktastic/app/src/main/java/com/commonsware/android/preso/decktastic/RosterFragment.java
Patch:
@@ -97,11 +97,11 @@ private static class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
+      android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_BACKGROUND);
       PresoRoster.getInstance().load(ctxt);
 
       EventBus.getDefault().postSticky(new RosterLoadedEvent());

File: Sensor/Monitor/app/src/main/java/com/commonsware/android/sensor/monitor/MainActivity.java
Patch:
@@ -48,9 +48,9 @@ protected void onCreate(Bundle savedInstanceState) {
   }
 
   @Override
-  public void onPause() {
+  public void onStop() {
     mgr.unregisterListener(log);
-    super.onPause();
+    super.onStop();
   }
 
   @Override

File: Java8/VideoLambda/app/src/main/java/com/commonsware/android/recyclerview/videolist/MainActivity.java
Patch:
@@ -169,8 +169,6 @@ void setVideos(Cursor c) {
       else {
         ArrayList<Video> temp=new ArrayList<>();
 
-        c.moveToFirst();
-
         while (c.moveToNext()) {
           temp.add(new Video(c));
         }

File: ACRA/Simple/app/src/main/java/com/commonsware/android/button/ACRADialogApplication.java
Patch:
@@ -26,6 +26,7 @@
   resDialogText = R.string.msg_acra_dialog,
   resDialogCommentPrompt = R.string.msg_acra_comment_prompt,
   resDialogEmailPrompt = R.string.msg_acra_email_prompt,
+  resDialogTheme = R.style.AppTheme_Dialog,
   httpMethod=org.acra.sender.HttpSender.Method.PUT,
   reportType=org.acra.sender.HttpSender.Type.JSON
 )

File: Testing/EspressoIntents/app/src/androidTest/java/com/commonsware/android/rotation/bundle/IntentTests.java
Patch:
@@ -143,7 +143,7 @@ private void rotate() {
     int target=
       (getOrientation()==Configuration.ORIENTATION_LANDSCAPE ?
         ActivityInfo.SCREEN_ORIENTATION_PORTRAIT :
-        ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
+        ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
 
     main.getActivity().setRequestedOrientation(target);
   }

File: Presentation/Simple/app/src/main/java/com/commonsware/android/preso/simple/MainActivity.java
Patch:
@@ -49,7 +49,7 @@ protected void onStart() {
         cb=new RouteCallback();
         router=(MediaRouter)getSystemService(MEDIA_ROUTER_SERVICE);
       }
-      
+
       handleRoute(router.getSelectedRoute(MediaRouter.ROUTE_TYPE_LIVE_VIDEO));
       router.addCallback(MediaRouter.ROUTE_TYPE_LIVE_VIDEO, cb);
     }

File: KBMouse/CopyPaste/drag/src/main/java/com/commonsware/android/dragdrop/MainActivity.java
Patch:
@@ -88,7 +88,7 @@ public boolean onOptionsItemSelected(MenuItem item) {
       return(true);
     }
 
-    return super.onOptionsItemSelected(item);
+    return(super.onOptionsItemSelected(item));
   }
 
   @Override

File: ContentProvider/Files/app/src/main/java/com/commonsware/android/cp/files/FileProvider.java
Patch:
@@ -48,7 +48,7 @@ public boolean onCreate() {
 
   @Override
   public ParcelFileDescriptor openFile(Uri uri, String mode)
-                                                            throws FileNotFoundException {
+    throws FileNotFoundException {
     File root=getContext().getFilesDir();
     File f=new File(root, uri.getPath()).getAbsoluteFile();
 

File: Documents/DocumentTree/app/src/main/java/com/commonsware/android/documenttree/DocumentHelper.java
Patch:
@@ -35,6 +35,6 @@ public boolean onPreferenceClick(Preference preference) {
 
     host.startActivityForHelper(i, this);
 
-    return (true);
+    return(true);
   }
 }

File: Introspection/SAWMonitor/app/src/main/java/com/commonsware/android/sawmonitor/SettingsFragment.java
Patch:
@@ -62,8 +62,7 @@ public boolean onPreferenceChange(Preference preference,
   }
 
   void populateWhitelist(MultiSelectListPreference whitelist) {
-    List<ApplicationInfo> apps=
-      pm.getInstalledApplications(PackageManager.GET_PERMISSIONS);
+    List<ApplicationInfo> apps=pm.getInstalledApplications(0);
 
     Collections.sort(apps,
       new ApplicationInfo.DisplayNameComparator(pm));

File: UnitTest/Robolectric/app/src/main/java/com/commonsware/android/abf/ActionBarFragment.java
Patch:
@@ -1,13 +1,13 @@
 /***
   Copyright (c) 2008-2012 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
-  use this file except in compliance with the License. You may obtain   a copy
+  use this file except in compliance with the License. You may obtain	a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required
   by applicable law or agreed to in writing, software distributed under the
-  License is distributed on an "AS IS" BASIS,   WITHOUT WARRANTIES OR CONDITIONS
+  License is distributed on an "AS IS" BASIS,	WITHOUT	WARRANTIES OR CONDITIONS
   OF ANY KIND, either express or implied. See the License for the specific
   language governing permissions and limitations under the License.
-    
+  
   From _The Busy Coder's Guide to Android Development_
     https://commonsware.com/Android
  */

File: UnitTest/Robolectric/app/src/main/java/com/commonsware/android/abf/ActionBarFragmentActivity.java
Patch:
@@ -1,13 +1,13 @@
 /***
   Copyright (c) 2008-2012 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
-  use this file except in compliance with the License. You may obtain   a copy
+  use this file except in compliance with the License. You may obtain	a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required
   by applicable law or agreed to in writing, software distributed under the
-  License is distributed on an "AS IS" BASIS,   WITHOUT WARRANTIES OR CONDITIONS
+  License is distributed on an "AS IS" BASIS,	WITHOUT	WARRANTIES OR CONDITIONS
   OF ANY KIND, either express or implied. See the License for the specific
   language governing permissions and limitations under the License.
-    
+  
   From _The Busy Coder's Guide to Android Development_
     https://commonsware.com/Android
  */

File: UnitTest/Robolectric/app/src/main/java/com/commonsware/android/abf/ActionBarFragment.java
Patch:
@@ -1,13 +1,13 @@
 /***
   Copyright (c) 2008-2012 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
-  use this file except in compliance with the License. You may obtain	a copy
+  use this file except in compliance with the License. You may obtain   a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required
   by applicable law or agreed to in writing, software distributed under the
-  License is distributed on an "AS IS" BASIS,	WITHOUT	WARRANTIES OR CONDITIONS
+  License is distributed on an "AS IS" BASIS,   WITHOUT WARRANTIES OR CONDITIONS
   OF ANY KIND, either express or implied. See the License for the specific
   language governing permissions and limitations under the License.
-	
+    
   From _The Busy Coder's Guide to Android Development_
     https://commonsware.com/Android
  */

File: UnitTest/Robolectric/app/src/main/java/com/commonsware/android/abf/ActionBarFragmentActivity.java
Patch:
@@ -1,13 +1,13 @@
 /***
   Copyright (c) 2008-2012 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
-  use this file except in compliance with the License. You may obtain	a copy
+  use this file except in compliance with the License. You may obtain   a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required
   by applicable law or agreed to in writing, software distributed under the
-  License is distributed on an "AS IS" BASIS,	WITHOUT	WARRANTIES OR CONDITIONS
+  License is distributed on an "AS IS" BASIS,   WITHOUT WARRANTIES OR CONDITIONS
   OF ANY KIND, either express or implied. See the License for the specific
   language governing permissions and limitations under the License.
-	
+    
   From _The Busy Coder's Guide to Android Development_
     https://commonsware.com/Android
  */

File: Fragments/Static/app/src/main/java/com/commonsware/android/sfrag/ContentFragment.java
Patch:
@@ -16,6 +16,7 @@
 
 import android.app.Activity;
 import android.app.Fragment;
+import android.content.Context;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.LayoutInflater;
@@ -45,7 +46,7 @@ public void onAttach(Activity a) {
     super.onAttach(a);
     Log.d(getClass().getSimpleName(), "onAttach()");
   }
-  
+
   @Override
   public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

File: JobScheduler/DeepBackground/src/main/java/com/commonsware/android/deepbg/PollReceiver.java
Patch:
@@ -59,7 +59,7 @@ static void scheduleExactAlarm(Context ctxt, AlarmManager alarms,
       alarms.setAndAllowWhileIdle(AlarmManager.ELAPSED_REALTIME_WAKEUP,
           SystemClock.elapsedRealtime() + period, pi);
     }
-    if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.KITKAT) {
+    else if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.KITKAT) {
       alarms.setExact(AlarmManager.ELAPSED_REALTIME_WAKEUP,
           SystemClock.elapsedRealtime() + period, pi);
     }

File: HTTP/Picasso/src/com/commonsware/android/picasso/QuestionsFragment.java
Patch:
@@ -1,5 +1,5 @@
 /***
-  Copyright (c) 20132-14 CommonsWare, LLC
+  Copyright (c) 2013-2014 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
   use this file except in compliance with the License. You may obtain a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required

File: HTTP/PicassoMNC/app/src/main/java/com/commonsware/android/picasso/QuestionsFragment.java
Patch:
@@ -1,5 +1,5 @@
 /***
-  Copyright (c) 20132-14 CommonsWare, LLC
+  Copyright (c) 2013-2014 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
   use this file except in compliance with the License. You may obtain a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required

File: Diagnostics/Activity/app/src/main/java/com/commonsware/android/debug/activity/QuestionsFragment.java
Patch:
@@ -1,5 +1,5 @@
 /***
-  Copyright (c) 20132-14 CommonsWare, LLC
+  Copyright (c) 2013-2014 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
   use this file except in compliance with the License. You may obtain a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required

File: Database/FTS/src/com/commonsware/android/fts/QuestionsFragment.java
Patch:
@@ -1,5 +1,5 @@
 /***
-  Copyright (c) 20132-14 CommonsWare, LLC
+  Copyright (c) 2013-2014 CommonsWare, LLC
   Licensed under the Apache License, Version 2.0 (the "License"); you may not
   use this file except in compliance with the License. You may obtain a copy
   of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required

File: ActionBar/OverlayNative/src/com/commonsware/android/actionbaroverlay/ActionBarDemoActivity.java
Patch:
@@ -45,7 +45,6 @@ public void onCreate(Bundle icicle) {
         getResources().getDrawable(R.drawable.action_bar_background);
 
     getActionBar().setBackgroundDrawable(d);
-    getActionBar().setSplitBackgroundDrawable(d);
   }
 
   @Override

File: RecyclerView/SingleActivatedList/src/com/commonsware/android/recyclerview/singleactivatedlist/ChoiceCapableAdapter.java
Patch:
@@ -36,7 +36,7 @@ void onChecked(int position, boolean isChecked) {
 
       if (checked>=0) {
         RowController row=
-            (RowController)rv.findViewHolderForPosition(checked);
+            (RowController)rv.findViewHolderForAdapterPosition(checked);
 
         if (row!=null) {
           row.setChecked(false);

File: RecyclerView/HorizontalVideoList/src/com/commonsware/android/recyclerview/horizontalvideolist/MainActivity.java
Patch:
@@ -77,6 +77,7 @@ public RowController onCreateViewHolder(ViewGroup parent, int viewType) {
 
     void setVideos(Cursor videos) {
       this.videos=videos;
+      notifyDataSetChanged();
     }
 
     @Override

File: ContentProvider/ConstantsPlus/src/com/commonsware/android/constants/ConstantsBrowser.java
Patch:
@@ -42,10 +42,10 @@ public class ConstantsBrowser extends ListActivity implements OnClickListener {
   public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
 
-    task=new LoadCursorTask();
-    task.execute();
+    task=new LoadCursorTask().execute();
   }
 
+
   @Override
   public void onDestroy() {
     if (task != null) {

File: Diagnostics/WebServer/app/src/debug/java/com/commonsware/android/debug/webserver/PicassoDiagnosticService.java
Patch:
@@ -27,6 +27,7 @@
 import com.github.jknack.handlebars.io.AbstractTemplateLoader;
 import com.github.jknack.handlebars.io.StringTemplateSource;
 import com.github.jknack.handlebars.io.TemplateSource;
+import com.koushikdutta.async.AsyncServer;
 import com.koushikdutta.async.http.server.AsyncHttpServer;
 import com.koushikdutta.async.http.server.AsyncHttpServerRequest;
 import com.koushikdutta.async.http.server.AsyncHttpServerResponse;
@@ -64,6 +65,7 @@ public void onCreate() {
   @Override
   public void onDestroy() {
     server.stop();
+    AsyncServer.getDefault().stop(); // no, really, I mean stop
 
     super.onDestroy();
   }

File: RecyclerView/ActionModeList/src/com/commonsware/android/recyclerview/actionmodelist/MainActivity.java
Patch:
@@ -113,7 +113,7 @@ public void onDestroyActionMode(ActionMode mode) {
     void onChecked(int position, boolean isChecked) {
       super.onChecked(position, isChecked);
 
-      if (getCheckedCount()>0) {
+      if (isChecked) {
         if (activeMode==null) {
           activeMode=startActionMode(this);
         }

File: RecyclerView/ActionModeList2/src/com/commonsware/android/recyclerview/actionmodelist2/MainActivity.java
Patch:
@@ -176,7 +176,7 @@ public void onCheckedPosition(int position) {
     void onChecked(int position, boolean isChecked) {
       super.onChecked(position, isChecked);
 
-      if (getCheckedCount()>0) {
+      if (isChecked) {
         if (activeMode==null) {
           activeMode=startActionMode(this);
         }

File: RecyclerView/VideoList/src/com/commonsware/android/recyclerview/videolist/MainActivity.java
Patch:
@@ -76,6 +76,7 @@ public RowController onCreateViewHolder(ViewGroup parent, int viewType) {
 
     void setVideos(Cursor videos) {
       this.videos=videos;
+      notifyDataSetChanged();
     }
 
     @Override

File: RecyclerView/VideoTable/src/com/commonsware/android/recyclerview/videotable/MainActivity.java
Patch:
@@ -110,6 +110,7 @@ public BaseVideoController onCreateViewHolder(ViewGroup parent, int viewType) {
 
     void setVideos(Cursor videos) {
       this.videos=videos;
+      notifyDataSetChanged();
     }
 
     @Override

File: Notifications/DownloadNotify/src/com/commonsware/android/downloader/DownloadFragment.java
Patch:
@@ -42,8 +42,7 @@ public View onCreateView(LayoutInflater inflater, ViewGroup parent,
   public void onClick(View v) {
     Intent i=new Intent(getActivity(), Downloader.class);
 
-    i.setDataAndType(Uri.parse("http://commonsware.com/Android/excerpt.pdf"),
-                     "application/pdf");
+    i.setData(Uri.parse("http://commonsware.com/Android/excerpt.pdf"));
 
     getActivity().startService(i);
     getActivity().finish();

File: EmPubLite-AndroidStudio/T12-Book/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -41,11 +41,11 @@ private class LoadThread extends Thread {
       super();
 
       this.assets=assets;
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
       Gson gson=new Gson();
 
       try {

File: EmPubLite-AndroidStudio/T13-Prefs/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -4,7 +4,6 @@
 import android.app.Fragment;
 import android.content.Context;
 import android.content.SharedPreferences;
-import android.content.res.AssetManager;
 import android.os.Bundle;
 import android.os.Process;
 import android.preference.PreferenceManager;
@@ -29,6 +28,7 @@ public void onCreate(Bundle savedInstanceState) {
   @Override
   public void onAttach(Activity host) {
     super.onAttach(host);
+
     if (contents == null) {
       new LoadThread(host).start();
     }
@@ -49,13 +49,13 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
       Gson gson=new Gson();
 
       try {

File: EmPubLite-AndroidStudio/T14-Database/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -49,13 +49,13 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
       Gson gson=new Gson();
 
       try {

File: EmPubLite-AndroidStudio/T15-Share/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -49,13 +49,13 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
       Gson gson=new Gson();
 
       try {

File: EmPubLite-AndroidStudio/T16-Update/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -67,11 +67,12 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
+
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
       Gson gson=new Gson();

File: EmPubLite-AndroidStudio/T17-Alarm/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -67,11 +67,12 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
+
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
       Gson gson=new Gson();

File: EmPubLite-AndroidStudio/T18-Notify/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -67,11 +67,12 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
+
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
       Gson gson=new Gson();

File: EmPubLite-AndroidStudio/T19-LargeScreen/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -67,11 +67,12 @@ private class LoadThread extends Thread {
       super();
 
       this.ctxt=ctxt.getApplicationContext();
-      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
     }
 
     @Override
     public void run() {
+      Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
+
       prefs=PreferenceManager.getDefaultSharedPreferences(ctxt);
 
       Gson gson=new Gson();

File: LargeScreen/EU4You/src/com/commonsware/android/eu4you/DetailsActivity.java
Patch:
@@ -27,8 +27,8 @@ public class DetailsActivity extends Activity {
   public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
 
-    details=
-        (DetailsFragment)getFragmentManager().findFragmentById(R.id.details);
+    details=(DetailsFragment)getFragmentManager()
+                               .findFragmentById(android.R.id.content);
 
     if (details == null) {
       details=new DetailsFragment();

File: EmPubLite-AndroidStudio/T19-LargeScreen/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -193,7 +193,7 @@ private void showAbout() {
       }
 
       getFragmentManager().beginTransaction().addToBackStack(null)
-          .replace(R.id.sidebar, about).commit();
+          .replace(R.id.sidebar, about, ABOUT).commit();
     }
     else {
       Intent i=new Intent(this, SimpleContentActivity.class);
@@ -212,7 +212,7 @@ private void showHelp() {
       }
 
       getFragmentManager().beginTransaction().addToBackStack(null)
-          .replace(R.id.sidebar, help).commit();
+          .replace(R.id.sidebar, help, HELP).commit();
     }
     else {
       Intent i=new Intent(this, SimpleContentActivity.class);

File: EmPubLite-AndroidStudio/T18-Notify/EmPubLite/app/src/main/java/com/commonsware/empublite/DownloadCheckService.java
Patch:
@@ -21,6 +21,7 @@
 import java.util.zip.ZipEntry;
 import java.util.zip.ZipInputStream;
 import de.greenrobot.event.EventBus;
+import de.greenrobot.event.NoSubscriberEvent;
 import retrofit.RestAdapter;
 
 public class DownloadCheckService extends WakefulIntentService {
@@ -46,7 +47,7 @@ protected void doWakefulWork(Intent intent) {
         unzip(book, updateDir);
         book.delete();
 
-        EventBus.getDefault().register(this, 0);
+        EventBus.getDefault().register(this);
         EventBus.getDefault().post(new BookUpdatedEvent());
         EventBus.getDefault().unregister(this);
       }
@@ -57,7 +58,7 @@ protected void doWakefulWork(Intent intent) {
     }
   }
 
-  public void onEvent(BookUpdatedEvent event) {
+  public void onEvent(NoSubscriberEvent event) {
     NotificationCompat.Builder builder=new NotificationCompat.Builder(this);
     Intent toLaunch=new Intent(this, EmPubLiteActivity.class);
     PendingIntent pi=PendingIntent.getActivity(this, 0, toLaunch, 0);

File: EmPubLite-AndroidStudio/T18-Notify/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -32,7 +32,7 @@ public void onCreate(Bundle savedInstanceState) {
   public void onAttach(Activity host) {
     super.onAttach(host);
 
-    EventBus.getDefault().register(this, 1);
+    EventBus.getDefault().register(this);
 
     if (contents == null) {
       new LoadThread(host).start();
@@ -57,7 +57,6 @@ public SharedPreferences getPrefs() {
   public void onEvent(BookUpdatedEvent event) {
     if (getActivity() != null) {
       new LoadThread(getActivity()).start();
-      EventBus.getDefault().cancelEventDelivery(event);
     }
   }
 

File: EmPubLite-AndroidStudio/T19-LargeScreen/EmPubLite/app/src/main/java/com/commonsware/empublite/DownloadCheckService.java
Patch:
@@ -21,6 +21,7 @@
 import java.util.zip.ZipEntry;
 import java.util.zip.ZipInputStream;
 import de.greenrobot.event.EventBus;
+import de.greenrobot.event.NoSubscriberEvent;
 import retrofit.RestAdapter;
 
 public class DownloadCheckService extends WakefulIntentService {
@@ -46,7 +47,7 @@ protected void doWakefulWork(Intent intent) {
         unzip(book, updateDir);
         book.delete();
 
-        EventBus.getDefault().register(this, 0);
+        EventBus.getDefault().register(this);
         EventBus.getDefault().post(new BookUpdatedEvent());
         EventBus.getDefault().unregister(this);
       }
@@ -57,7 +58,7 @@ protected void doWakefulWork(Intent intent) {
     }
   }
 
-  public void onEvent(BookUpdatedEvent event) {
+  public void onEvent(NoSubscriberEvent event) {
     NotificationCompat.Builder builder=new NotificationCompat.Builder(this);
     Intent toLaunch=new Intent(this, EmPubLiteActivity.class);
     PendingIntent pi=PendingIntent.getActivity(this, 0, toLaunch, 0);

File: EmPubLite-AndroidStudio/T19-LargeScreen/EmPubLite/app/src/main/java/com/commonsware/empublite/ModelFragment.java
Patch:
@@ -32,7 +32,7 @@ public void onCreate(Bundle savedInstanceState) {
   public void onAttach(Activity host) {
     super.onAttach(host);
 
-    EventBus.getDefault().register(this, 1);
+    EventBus.getDefault().register(this);
 
     if (contents == null) {
       new LoadThread(host).start();
@@ -57,7 +57,6 @@ public SharedPreferences getPrefs() {
   public void onEvent(BookUpdatedEvent event) {
     if (getActivity() != null) {
       new LoadThread(getActivity()).start();
-      EventBus.getDefault().cancelEventDelivery(event);
     }
   }
 

File: EmPubLite-AndroidStudio/T12-Book/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -99,8 +99,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T13-Prefs/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -132,7 +132,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T14-Database/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -139,7 +139,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T15-Share/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -139,7 +139,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T16-Update/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -144,7 +144,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T17-Alarm/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -146,7 +146,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T18-Notify/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -146,7 +146,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite-AndroidStudio/T19-LargeScreen/EmPubLite/app/src/main/java/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -222,7 +222,7 @@ private void showHelp() {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T12-Book/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -102,8 +102,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T13-Prefs/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -134,8 +134,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T14-Database/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -142,8 +142,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T15-Share/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -142,8 +142,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T16-Update/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -147,8 +147,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T17-Alarm/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -150,8 +150,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T18-Notify/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -150,8 +150,7 @@ private void setupPager(BookContents contents) {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: EmPubLite/T19-LargeScreen/src/com/commonsware/empublite/EmPubLiteActivity.java
Patch:
@@ -229,8 +229,7 @@ private void showHelp() {
 
   private void setupStrictMode() {
     StrictMode.ThreadPolicy.Builder builder=
-        new StrictMode.ThreadPolicy.Builder().detectDiskWrites()
-                                             .detectNetwork();
+        new StrictMode.ThreadPolicy.Builder().detectNetwork();
 
     if (BuildConfig.DEBUG) {
       builder.penaltyDeath();

File: LargeScreen/EU4You/src/com/commonsware/android/eu4you/CountriesFragment.java
Patch:
@@ -73,7 +73,7 @@ public View getView(int position, View convertView, ViewGroup parent) {
       if (convertView == null) {
         convertView=
             LayoutInflater.from(getActivity()).inflate(R.layout.row,
-                                                       null);
+                                                       parent, false);
         wrapper=new CountryViewHolder(convertView);
         convertView.setTag(wrapper);
       }

File: EventBus/AsyncDemo/src/com/commonsware/android/eventbus/AsyncDemoFragment.java
Patch:
@@ -52,8 +52,7 @@ public void onDetach() {
   }
 
   public void onEventMainThread(WordReadyEvent event) {
-    model.add(event.getWord());
-    adapter.notifyDataSetChanged();
+    adapter.add(event.getWord());
   }
 
   public void setModel(ArrayList<String> model) {

File: ConfigChange/Bundle/src/com/commonsware/android/rotation/bundle/RotationBundleDemo.java
Patch:
@@ -69,6 +69,8 @@ protected void onSaveInstanceState(Bundle outState) {
 
   @Override
   protected void onRestoreInstanceState(Bundle state) {
+    super.onRestoreInstanceState(state);
+    
     String contactUri=state.getString("contact");
 
     if (contactUri != null) {

File: ActionBar/Share/src/com/commonsware/android/sap/MainActivity.java
Patch:
@@ -22,9 +22,9 @@
 import android.widget.Toast;
 import com.actionbarsherlock.app.SherlockActivity;
 import com.actionbarsherlock.view.Menu;
-import com.actionbarsherlock.view.MenuInflater;
 import com.actionbarsherlock.widget.ShareActionProvider;
 
+
 public class MainActivity extends SherlockActivity implements
     ShareActionProvider.OnShareTargetSelectedListener, TextWatcher {
   private ShareActionProvider share=null;
@@ -43,7 +43,7 @@ public void onCreate(Bundle icicle) {
 
   @Override
   public boolean onCreateOptionsMenu(Menu menu) {
-    new MenuInflater(this).inflate(R.menu.actions, menu);
+    getSupportMenuInflater().inflate(R.menu.actions, menu);
 
     share=
         (ShareActionProvider)menu.findItem(R.id.share)
@@ -64,7 +64,7 @@ public boolean onShareTargetSelected(ShareActionProvider source,
 
   @Override
   public void afterTextChanged(Editable s) {
-    shareIntent.putExtra(Intent.EXTRA_TEXT, editor.getText());
+    shareIntent.putExtra(Intent.EXTRA_TEXT, s.toString());
     share.setShareIntent(shareIntent);
   }
 

File: Internet/Download/src/com/commonsware/android/downmgr/DownloadFragment.java
Patch:
@@ -141,6 +141,8 @@ private void queryStatus(View v) {
 
       Toast.makeText(getActivity(), statusMessage(c), Toast.LENGTH_LONG)
            .show();
+      
+      c.close();
     }
   }
 

File: MiscSecurity/SigDump/src/com/commonsware/android/signature/dump/PackageListAdapter.java
Patch:
@@ -39,7 +39,7 @@ public View getView(int position, View convertView, ViewGroup parent) {
 
   @TargetApi(Build.VERSION_CODES.HONEYCOMB)
   private static int getRowResourceId() {
-    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
+    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
       return(android.R.layout.simple_list_item_activated_1);
     }
 

File: Activities/Launch/src/com/commonsware/android/activities/LaunchDemo.java
Patch:
@@ -37,7 +37,7 @@ public void onCreate(Bundle icicle) {
   public void showMe(View v) {
     String _lat=lat.getText().toString();
     String _lon=lon.getText().toString();
-    Uri uri=Uri.parse("geo:"+_lat+","+_lon);
+    Uri uri=Uri.parse("geo:"+_lat+","+_lon+"?z=15");
     
     startActivity(new Intent(Intent.ACTION_VIEW, uri));
   }

File: Push/GCMClient2/src/com/commonsware/android/gcm/client/MainActivity.java
Patch:
@@ -22,8 +22,8 @@
 import android.widget.Toast;
 
 public class MainActivity extends Activity {
-  static final String SENDER_ID="21221004115"; // change
-                                                        // me!
+  static final String SENDER_ID="this is so fake"; // change
+                                                   // me!
 
   @Override
   public void onCreate(Bundle savedInstanceState) {

File: ActionMode/ActionModeMC/src/com/commonsware/android/actionmodemc/HCMultiChoiceModeListener.java
Patch:
@@ -14,13 +14,16 @@
 
 package com.commonsware.android.actionmodemc;
 
+import android.annotation.TargetApi;
+import android.os.Build;
 import android.view.ActionMode;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
 import android.widget.AbsListView;
 import android.widget.ListView;
 
+@TargetApi(Build.VERSION_CODES.HONEYCOMB)
 public class HCMultiChoiceModeListener implements AbsListView.MultiChoiceModeListener {
   ActionModeDemo host;
   ActionMode activeMode;

File: Prefs/FragmentsBC/src/com/commonsware/android/preffragsbc/PreferenceContentsFragment.java
Patch:
@@ -51,9 +51,9 @@ public void onResume() {
     SharedPreferences prefs=
         PreferenceManager.getDefaultSharedPreferences(getActivity());
 
-    checkbox.setText(new Boolean(prefs.getBoolean("checkbox", false)).toString());
+    checkbox.setText(Boolean.valueOf(prefs.getBoolean("checkbox", false)).toString());
     ringtone.setText(prefs.getString("ringtone", "<unset>"));
-    checkbox2.setText(new Boolean(prefs.getBoolean("checkbox2", false)).toString());
+    checkbox2.setText(Boolean.valueOf(prefs.getBoolean("checkbox2", false)).toString());
     text.setText(prefs.getString("text", "<unset>"));
     list.setText(prefs.getString("list", "<unset>"));
   }

File: Prefs/FragmentsBC/src/com/commonsware/android/preffragsbc/StockPreferenceFragment.java
Patch:
@@ -14,9 +14,12 @@
 
 package com.commonsware.android.preffragsbc;
 
+import android.annotation.TargetApi;
+import android.os.Build;
 import android.os.Bundle;
 import android.preference.PreferenceFragment;
 
+@TargetApi(Build.VERSION_CODES.HONEYCOMB)
 public class StockPreferenceFragment extends PreferenceFragment {
   @Override
   public void onCreate(Bundle savedInstanceState) {

File: EmPubLite/T17-Alarm/src/com/commonsware/empublite/DownloadCheckService.java
Patch:
@@ -1,7 +1,6 @@
 package com.commonsware.empublite;
 
 import android.app.DownloadManager;
-import android.app.IntentService;
 import android.content.Context;
 import android.content.Intent;
 import android.net.Uri;
@@ -14,10 +13,11 @@
 import java.io.InputStreamReader;
 import java.net.HttpURLConnection;
 import java.net.URL;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 import org.json.JSONException;
 import org.json.JSONObject;
 
-public class DownloadCheckService extends IntentService {
+public class DownloadCheckService extends WakefulIntentService {
   public static final String PREF_PENDING_UPDATE="pendingUpdateDir";
   public static final String UPDATE_FILENAME="book.zip";
   private static final String UPDATE_BASEDIR="updates";
@@ -29,7 +29,7 @@ public DownloadCheckService() {
   }
 
   @Override
-  protected void onHandleIntent(Intent intent) {
+  protected void doWakefulWork(Intent intent) {
     BufferedReader reader=null;
 
     try {

File: EmPubLite/T17-Alarm/src/com/commonsware/empublite/DownloadInstallService.java
Patch:
@@ -1,6 +1,5 @@
 package com.commonsware.empublite;
 
-import android.app.IntentService;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Environment;
@@ -15,8 +14,9 @@
 import java.io.InputStream;
 import java.util.zip.ZipEntry;
 import java.util.zip.ZipInputStream;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 
-public class DownloadInstallService extends IntentService {
+public class DownloadInstallService extends WakefulIntentService {
   public static final String PREF_UPDATE_DIR="updateDir";
   public static final String PREF_PREV_UPDATE="previousUpdateDir";
   public static final String ACTION_UPDATE_READY=
@@ -27,7 +27,7 @@ public DownloadInstallService() {
   }
 
   @Override
-  protected void onHandleIntent(Intent intent) {
+  protected void doWakefulWork(Intent intent) {
     SharedPreferences prefs=
         PreferenceManager.getDefaultSharedPreferences(this);
     String prevUpdateDir=prefs.getString(PREF_UPDATE_DIR, null);

File: EmPubLite/T18-Notify/src/com/commonsware/empublite/DownloadCheckService.java
Patch:
@@ -1,7 +1,6 @@
 package com.commonsware.empublite;
 
 import android.app.DownloadManager;
-import android.app.IntentService;
 import android.content.Context;
 import android.content.Intent;
 import android.net.Uri;
@@ -14,10 +13,11 @@
 import java.io.InputStreamReader;
 import java.net.HttpURLConnection;
 import java.net.URL;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 import org.json.JSONException;
 import org.json.JSONObject;
 
-public class DownloadCheckService extends IntentService {
+public class DownloadCheckService extends WakefulIntentService {
   public static final String PREF_PENDING_UPDATE="pendingUpdateDir";
   public static final String UPDATE_FILENAME="book.zip";
   private static final String UPDATE_BASEDIR="updates";
@@ -29,7 +29,7 @@ public DownloadCheckService() {
   }
 
   @Override
-  protected void onHandleIntent(Intent intent) {
+  protected void doWakefulWork(Intent intent) {
     BufferedReader reader=null;
 
     try {

File: EmPubLite/T18-Notify/src/com/commonsware/empublite/DownloadInstallService.java
Patch:
@@ -1,6 +1,5 @@
 package com.commonsware.empublite;
 
-import android.app.IntentService;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Environment;
@@ -15,8 +14,9 @@
 import java.io.InputStream;
 import java.util.zip.ZipEntry;
 import java.util.zip.ZipInputStream;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 
-public class DownloadInstallService extends IntentService {
+public class DownloadInstallService extends WakefulIntentService {
   public static final String PREF_UPDATE_DIR="updateDir";
   public static final String PREF_PREV_UPDATE="previousUpdateDir";
   public static final String ACTION_UPDATE_READY=
@@ -27,7 +27,7 @@ public DownloadInstallService() {
   }
 
   @Override
-  protected void onHandleIntent(Intent intent) {
+  protected void doWakefulWork(Intent intent) {
     SharedPreferences prefs=
         PreferenceManager.getDefaultSharedPreferences(this);
     String prevUpdateDir=prefs.getString(PREF_UPDATE_DIR, null);

File: EmPubLite/T19-LargeScreen/src/com/commonsware/empublite/DownloadCheckService.java
Patch:
@@ -1,7 +1,6 @@
 package com.commonsware.empublite;
 
 import android.app.DownloadManager;
-import android.app.IntentService;
 import android.content.Context;
 import android.content.Intent;
 import android.net.Uri;
@@ -14,10 +13,11 @@
 import java.io.InputStreamReader;
 import java.net.HttpURLConnection;
 import java.net.URL;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 import org.json.JSONException;
 import org.json.JSONObject;
 
-public class DownloadCheckService extends IntentService {
+public class DownloadCheckService extends WakefulIntentService {
   public static final String PREF_PENDING_UPDATE="pendingUpdateDir";
   public static final String UPDATE_FILENAME="book.zip";
   private static final String UPDATE_BASEDIR="updates";
@@ -29,7 +29,7 @@ public DownloadCheckService() {
   }
 
   @Override
-  protected void onHandleIntent(Intent intent) {
+  protected void doWakefulWork(Intent intent) {
     BufferedReader reader=null;
 
     try {

File: EmPubLite/T19-LargeScreen/src/com/commonsware/empublite/DownloadInstallService.java
Patch:
@@ -1,6 +1,5 @@
 package com.commonsware.empublite;
 
-import android.app.IntentService;
 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Environment;
@@ -15,8 +14,9 @@
 import java.io.InputStream;
 import java.util.zip.ZipEntry;
 import java.util.zip.ZipInputStream;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 
-public class DownloadInstallService extends IntentService {
+public class DownloadInstallService extends WakefulIntentService {
   public static final String PREF_UPDATE_DIR="updateDir";
   public static final String PREF_PREV_UPDATE="previousUpdateDir";
   public static final String ACTION_UPDATE_READY=
@@ -27,7 +27,7 @@ public DownloadInstallService() {
   }
 
   @Override
-  protected void onHandleIntent(Intent intent) {
+  protected void doWakefulWork(Intent intent) {
     SharedPreferences prefs=
         PreferenceManager.getDefaultSharedPreferences(this);
     String prevUpdateDir=prefs.getString(PREF_UPDATE_DIR, null);

File: Files/ReadWrite/src/com/commonsware/android/frw/EditorFragment.java
Patch:
@@ -86,7 +86,7 @@ else if (item.getItemId() == R.id.saveBackground) {
   private File getTarget() {
     File root=null;
 
-    if (external.isChecked()) {
+    if (external!=null && external.isChecked()) {
       root=getActivity().getExternalFilesDir(null);
     }
     else {

File: Fragments/Dynamic/src/com/commonsware/android/dfrag/ContentFragment.java
Patch:
@@ -28,7 +28,7 @@ public class ContentFragment extends Fragment implements
   public View onCreateView(LayoutInflater inflater,
                            ViewGroup container,
                            Bundle savedInstanceState) {
-    View result=inflater.inflate(R.layout.mainfrag, container);
+    View result=inflater.inflate(R.layout.mainfrag, container, false);
 
     result.findViewById(R.id.showOther).setOnClickListener(this);
 

File: Fragments/Static/src/com/commonsware/android/sfrag/ContentFragment.java
Patch:
@@ -28,7 +28,7 @@ public class ContentFragment extends SherlockFragment implements
   public View onCreateView(LayoutInflater inflater,
                            ViewGroup container,
                            Bundle savedInstanceState) {
-    View result=inflater.inflate(R.layout.mainfrag, container);
+    View result=inflater.inflate(R.layout.mainfrag, container, false);
 
     result.findViewById(R.id.showOther).setOnClickListener(this);
 

File: Notifications/BigNotify/src/com/commonsware/android/bignotify/MainActivity.java
Patch:
@@ -32,8 +32,7 @@ public void onCreate(Bundle savedInstanceState) {
 
     NotificationManager mgr=
         (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
-    NotificationCompat.Builder normal=
-        buildNormal(getString(R.string.sample));
+    NotificationCompat.Builder normal=buildNormal();
     NotificationCompat.InboxStyle big=
         new NotificationCompat.InboxStyle(normal);
 
@@ -48,7 +47,7 @@ public void onCreate(Bundle savedInstanceState) {
     finish();
   }
 
-  private NotificationCompat.Builder buildNormal(CharSequence title) {
+  private NotificationCompat.Builder buildNormal() {
     NotificationCompat.Builder b=new NotificationCompat.Builder(this);
 
     b.setAutoCancel(true)

File: Threads/PostDelayed/src/com/commonsware/android/post/PostDelayedDemo.java
Patch:
@@ -13,13 +13,13 @@ public class PostDelayedDemo extends Activity {
   protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
+    root=findViewById(android.R.id.content);
   }
   
   @Override
   public void onResume() {
     super.onResume();
     
-    root=findViewById(android.R.id.content);
     everyFiveSeconds.run();
   }
   

File: LargeScreen/EU4You/src/com/commonsware/android/eu4you/CountryListener.java
Patch:
@@ -16,4 +16,5 @@
 
 public interface CountryListener {
   void onCountrySelected(Country c);
+  boolean isPersistentSelection();
 }

File: EmPubLite/T17-Alarm/src/com/commonsware/empublite/DownloadCompleteReceiver.java
Patch:
@@ -5,6 +5,7 @@
 import android.content.Intent;
 import android.os.Environment;
 import java.io.File;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 
 public class DownloadCompleteReceiver extends BroadcastReceiver {
   @Override
@@ -15,7 +16,7 @@ public void onReceive(Context ctxt, Intent i) {
                  DownloadCheckService.UPDATE_FILENAME);
 
     if (update.exists()) {
-      ctxt.startService(new Intent(ctxt, DownloadInstallService.class));
+      WakefulIntentService.sendWakefulWork(ctxt, DownloadInstallService.class);
     }
   }
 }

File: EmPubLite/T18-Notify/src/com/commonsware/empublite/DownloadCompleteReceiver.java
Patch:
@@ -5,6 +5,7 @@
 import android.content.Intent;
 import android.os.Environment;
 import java.io.File;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 
 public class DownloadCompleteReceiver extends BroadcastReceiver {
   @Override
@@ -15,7 +16,7 @@ public void onReceive(Context ctxt, Intent i) {
                  DownloadCheckService.UPDATE_FILENAME);
 
     if (update.exists()) {
-      ctxt.startService(new Intent(ctxt, DownloadInstallService.class));
+      WakefulIntentService.sendWakefulWork(ctxt, DownloadInstallService.class);
     }
   }
 }

File: EmPubLite/T19-LargeScreen/src/com/commonsware/empublite/DatabaseHelper.java
Patch:
@@ -20,7 +20,7 @@ synchronized static DatabaseHelper getInstance(Context ctxt) {
     return(singleton);
   }
 
-  public DatabaseHelper(Context ctxt) {
+  private DatabaseHelper(Context ctxt) {
     super(ctxt, DATABASE_NAME, null, SCHEMA_VERSION);
     this.ctxt=ctxt;
   }

File: EmPubLite/T19-LargeScreen/src/com/commonsware/empublite/DownloadCompleteReceiver.java
Patch:
@@ -5,6 +5,7 @@
 import android.content.Intent;
 import android.os.Environment;
 import java.io.File;
+import com.commonsware.cwac.wakeful.WakefulIntentService;
 
 public class DownloadCompleteReceiver extends BroadcastReceiver {
   @Override
@@ -15,7 +16,7 @@ public void onReceive(Context ctxt, Intent i) {
                  DownloadCheckService.UPDATE_FILENAME);
 
     if (update.exists()) {
-      ctxt.startService(new Intent(ctxt, DownloadInstallService.class));
+      WakefulIntentService.sendWakefulWork(ctxt, DownloadInstallService.class);
     }
   }
 }

File: WebKit/Browser1/src/com/commonsware/android/browser1/BrowserDemo1.java
Patch:
@@ -27,6 +27,6 @@ public void onCreate(Bundle icicle) {
     setContentView(R.layout.main);
     browser=(WebView)findViewById(R.id.webkit);
     
-    browser.loadUrl("http://google.com");
+    browser.loadUrl("http://commonsware.com");
   }
 }

File: Fragments/Static/src/com/commonsware/android/sfrag/ContentFragment.java
Patch:
@@ -16,13 +16,13 @@
 
 import android.app.Activity;
 import android.os.Bundle;
-import android.support.v4.app.Fragment;
 import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import com.actionbarsherlock.app.SherlockFragment;
 
-public class ContentFragment extends Fragment implements
+public class ContentFragment extends SherlockFragment implements
     View.OnClickListener {
   @Override
   public View onCreateView(LayoutInflater inflater,

